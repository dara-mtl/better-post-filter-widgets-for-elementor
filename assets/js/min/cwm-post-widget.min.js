!function(e){e(window).on("elementor/frontend/init",function(){var t=elementorModules.frontend.handlers.Base.extend({bindEvents:function(){this.fetchMasonry(),this.changePostStatus(),this.getPinnedPosts(),this.getPostsByAjax(),this.getAjaxSearch(),this.postCarousel()},debounce:function(e,t){let s;return function(){let i=this,o=arguments;clearTimeout(s),s=setTimeout(()=>{e.apply(i,o)},t)}},fetchMasonry:function(){var t=this.getElementSettings(),s=this.$element.find(".cwm-masonry");if(0===s.length)return;var i=s.find(".post-wrapper");if(0===i.length)return;let o=elementorFrontend.config.responsive.breakpoints,n=()=>{let e=window.innerWidth,s="";return e<=o.widescreen.value&&void 0!==t.nb_columns_widescreen&&(s=t.nb_columns_widescreen||4),e<=o.laptop.value&&void 0!==t.nb_columns&&(s=t.nb_columns||3),e<=o.tablet_extra.value&&void 0!==t.nb_columns_tablet_extra&&(s=t.nb_columns_tablet_extra||3),e<=o.tablet.value&&void 0!==t.nb_columns_tablet&&(s=t.nb_columns_tablet||2),e<=o.mobile_extra.value&&void 0!==t.nb_columns_mobile_extra&&(s=t.nb_columns_mobile_extra||2),e<=o.mobile.value&&void 0!==t.nb_columns_mobile&&(s=t.nb_columns_mobile||1),(void 0===s||""===s)&&(s=t.nb_columns||3),s},r=()=>{let t=n();s.removeClass().addClass("elementor-grid cwm-masonry masonry-layout columns-"+t),s.children(".masonry-column").remove();for(let o=1;o<=t;o++){let r=e("<div></div>").addClass("masonry-column masonry-column-"+o);s.append(r)}let a=1;s.find(".post-wrapper").remove(),i.each(function(i,o){let n=s.find(".masonry-column-"+a);e(o).css({opacity:"0"}),n.append(e(o)),a=a<t?a+1:1}),setTimeout(function(){i.css({opacity:"1"})},100)};r(),e(window).on("resize",this.debounce(r,200))},changePostStatus:function(){e(document).off("click",".edit-button, .unpublish-button").on("click",".edit-button, .unpublish-button",function(t){var s=e(this).attr("data-postid"),i=e(this);return e.ajax({type:"POST",url:ajax_var.url,async:!0,data:{action:"change_post_status",post_id:s,nonce:ajax_var.nonce},success:function(e){i.removeAttr("href").removeAttr("onclick").text("Done!")},error:function(e,t,s){console.log("AJAX request failed: "+t+", "+s)}}),!1})},getPinnedPosts:function(){e(document).off("click",".post-pin").on("click",".post-pin",function(t){t.preventDefault();var s=e(this),i=s.data("postid"),o=s.attr("class"),n=e(".pinned_post_query");e.ajax({type:"POST",url:ajax_var.url,data:{action:"pin_post",post_id:i,pin_class:o,nonce:ajax_var.nonce},success:function(){s.toggleClass("unpin"),0!==n.length&&(e('.post-pin[data-postid="'+i+'"]').not(s).removeClass("unpin"),n.animate({opacity:.65},"normal",function(){n.load(location.href+" .pinned_post_query:first > *",function(){n.animate({opacity:1},"normal")})}))}})})},getPostsByAjax:function(){if(!document.getElementById("elementor-preview-iframe")){var t=this,s=!1,i=this.$element,o=i.find(".post-container"),n=i.find(".loader"),r=i.data("id"),a=" .elementor-element-"+r+" .post-container-inner",l=o.find(".pagination"),d=l.data("page"),p=l.data("max-page")-1,c=c||{};if(0!==o.length){var u=this.getElementSettings();if(u)var f=u.pagination||u.pagination_type,h=u.scroll_to_top,m=u.scroll_threshold&&u.scroll_threshold.size?u.scroll_threshold.size:0,w=m+(u.scroll_threshold&&u.scroll_threshold.unit?u.scroll_threshold.unit:"px");else var w="0px";if(i.on("click",".pagination a",function(t){!e(this).closest(".pagination-filter").length&&(t.preventDefault(),o.addClass("load"),(o.hasClass("shortcode")||o.hasClass("template"))&&n.show(),function t(s){if("infinite"==f||"load_more"==f){var n=i.find(".load-more");n.text("Loading..."),n.prop("disabled",!0),e.get(s,function(t){var s=o.find(".elementor-grid").children().clone();o.empty().append(e(t).find(a)),o.find(".elementor-grid").prepend(s),o.hide().show().removeClass("load"),g()}).fail(function(e,t,s){console.error("An error occurred while fetching the posts: "+t),console.error("HTTP status: "+e.status),console.error("Error thrown: "+s)})}else e.get(s,function(t){o.empty().append(e(t).find(a)),o.hide().show().removeClass("load"),g()}).fail(function(e,t,s){console.error("An error occurred while fetching the posts: "+t),console.error("HTTP status: "+e.status),console.error("Error thrown: "+s)})}(e(this).attr("href")))}),i.off("click.postWidget",".load-more").on("click",".load-more",function(t){!e(this).hasClass("load-more-filter")&&(t.preventDefault(),s=!0,i.find(".pagination a.next").click())}),"infinite"===f){if(l.hasClass("pagination-filter")){c[r]&&(c[r].unobserve(v.get(0)),c[r]=null);return}var v=i.find(".e-load-more-anchor");v.length&&(c[r]||(c[r]=new IntersectionObserver(function(e){if(e.forEach(function(e){if(e.isIntersecting){var t=i.find(".pagination a.next");!s&&t.length&&(s=!0,t.click())}}),!i.find(".pagination a.next").length){c[r].unobserve(v.get(0)),c[r]=null;return}},{root:null,rootMargin:w,threshold:0})),c[r].observe(v.get(0)))}}}function g(){var e=i.find(".load-more");n.hide(),(d+=1)>p&&e.hide(),"yes"==h&&window.scrollTo({top:o.offset().top-150,behavior:"smooth"}),s=!1,t.fetchMasonry(),t.postCarousel()}},getAjaxSearch:function(){if(!e("div.filter-container").length){var t=this.getElementSettings(),s=t.scroll_to_top,i=(t.post_status,t.post_type_search),o=this.$element,n=o.find(".post-container"),r=o.find(".loader"),a=o.data("id"),l=window.elementorFrontendConfig.post.id,d=o.html();(0===l||"undefined"===l)&&(l=e(document).find("main div").data("elementor-id")),o.on("click",".pagination-filter a",function(t){p(e(this).attr("href").split("?")[1].split("=")[1]),t.preventDefault()}),o.on("submit",".search-container form",function(){return p(),!1})}function p(t){n.addClass("load"),(n.hasClass("shortcode")||n.hasClass("template"))&&r.fadeIn();var p=e(".search-container form").find('input[name="s"]').val();e.ajax({type:"POST",url:ajax_var.url,async:!0,data:{action:"post_filter_results",widget_id:a,page_id:l,search_query:p,post_type:i,paged:t,base:window.location.pathname,nonce:ajax_var.nonce},success:function(t){var s=JSON.parse(t),i=s.html,n=s.base;if("0"===t)o.off(),o.html(d).removeClass("load");else{r.fadeOut(),o.html(i).fadeIn().removeClass("load");var a=o.find('nav[aria-label="Pagination"]');a.addClass("pagination-filter"),a.find("a.page-numbers").each(function(){var t=e(this).attr("href");n.endsWith("/")&&(n=n.slice(0,-1));var s=t.replace("/wp-admin/admin-ajax.php",n);e(this).attr("href",s)})}},complete:function(){"yes"==s&&window.scrollTo({top:n.offset().top-150,behavior:"smooth"}),elementorFrontend.elementsHandler.runReadyTrigger(o),elementorFrontend.config.experimentalFeatures.e_lazyload&&document.dispatchEvent(new Event("elementor/lazyload/observe"))}})}},postCarousel:function(){var t=this.getElementSettings(),s=this.$element.data("id"),i=this.$element.find(".cwm-swiper");if(0===i.length)return;let o;o?(o.destroy(!0,!0),o=null):i.removeClass("cwm-swiper");let n=t.carousel_breakpoints?parseInt(t.carousel_breakpoints):0,r=()=>{i.removeClass("elementor-grid").addClass(`swiper swiper-container cwm-swiper-${s}`),i.children(".post-wrapper").addClass("swiper-slide").wrapAll('<div class="swiper-wrapper"></div>');let n=e(`<div class="swiper-button-next cwm-slider-arrow-${s}"></div>`),r=e(`<div class="swiper-button-prev cwm-slider-arrow-${s}"></div>`),a=e(`<div class="swiper-pagination swiper-pagination-${s}"></div>`),l=e(`<div style="display:none;" class="swiper-button-next cwm-slider-arrow-${s}"></div>`),d=e(`<div style="display:none;" class="swiper-button-prev cwm-slider-arrow-${s}"></div>`),p=e(`<div style="display:none;" class="swiper-pagination swiper-pagination-${s}"></div>`);t.post_slider_arrows?i.append(n).append(r):i.append(l).append(d),t.post_slider_pagination?i.append(a):i.append(p);let c=t.post_slider_autoplay||!1;c?t.autoplay={delay:t.post_slider_autoplay_delay}:t.autoplay=!1;let u={},f=elementorFrontend.config.responsive.breakpoints;u[f.mobile.value]={slidesPerView:parseFloat(t.post_slider_slides_per_view_mobile)||1,slidesPerGroup:parseInt(t.post_slider_slides_to_scroll_mobile)||1,spaceBetween:parseFloat(t.post_slider_gap_mobile)||parseFloat(t.post_slider_gap)||0},void 0!==t.post_slider_slides_per_view_mobile_extra&&(u[f.mobile_extra.value]={slidesPerView:parseFloat(t.post_slider_slides_per_view_mobile_extra)||1,slidesPerGroup:parseInt(t.post_slider_slides_to_scroll_mobile_extra)||1,spaceBetween:parseFloat(t.post_slider_gap_mobile_extra)||parseFloat(t.post_slider_gap)||0}),u[f.tablet.value]={slidesPerView:parseFloat(t.post_slider_slides_per_view_tablet)||1,slidesPerGroup:parseInt(t.post_slider_slides_to_scroll_tablet)||1,spaceBetween:parseFloat(t.post_slider_gap_tablet)||parseFloat(t.post_slider_gap)||0},void 0!==t.post_slider_slides_per_view_tablet_extra&&(u[f.tablet_extra.value]={slidesPerView:parseFloat(t.post_slider_slides_per_view_tablet_extra)||1,slidesPerGroup:parseInt(t.post_slider_slides_to_scroll_tablet_extra)||1,spaceBetween:parseFloat(t.post_slider_gap_tablet_extra)||parseFloat(t.post_slider_gap)||0}),u[f.laptop.value]={slidesPerView:parseFloat(t.post_slider_slides_per_view)||1,slidesPerGroup:parseInt(t.post_slider_slides_to_scroll)||1,spaceBetween:parseFloat(t.post_slider_gap)||0},void 0!==t.post_slider_slides_per_view_widescreen&&(u[f.widescreen.value]={slidesPerView:parseFloat(t.post_slider_slides_per_view_widescreen)||1,slidesPerGroup:parseInt(t.post_slider_slides_to_scroll_widescreen)||1,spaceBetween:parseFloat(t.post_slider_gap_widescreen)||parseFloat(t.post_slider_gap)||0}),"fade"===t.post_slider_transition_effect?t.breakpoints={}:t.breakpoints=u;let h={allowTouchMove:"yes"===t.post_slider_allow_touch_move,autoHeight:"yes"===t.post_slider_auto_h,effect:t.post_slider_transition_effect,direction:"horizontal",loop:"yes"===t.post_slider_loop,centerInsufficientSlides:!1,parallax:"yes"===t.post_slider_parallax,handleElementorBreakpoints:!0,speed:t.post_slider_speed,slidesPerView:parseFloat(t.post_slider_slides_per_view),slidesPerGroup:parseInt(t.post_slider_slides_to_scroll),spaceBetween:parseFloat(t.post_slider_gap),breakpoints:t.breakpoints,centeredSlides:"yes"===t.post_slider_centered_slides,centeredSlidesBounds:"yes"===t.post_slider_slides_round_lenghts,navigation:{nextEl:`.swiper-button-next.cwm-slider-arrow-${s}`,prevEl:`.swiper-button-prev.cwm-slider-arrow-${s}`},pagination:{el:`.swiper-pagination-${s}`,type:t.post_slider_pagination_type,clickable:!0},autoplay:t.autoplay,mousewheel:"yes"===t.post_slider_allow_mousewheel,watchOverflow:!0};if("yes"===t.post_slider_lazy_load&&(h.preloadImages=!1,h.lazy={loadPrevNext:!0}),void 0===o){let m=elementorFrontend.utils.swiper;new m(i,h).then(e=>{o=e,this.syncPagination()})}else{let w=elementorFrontend.utils.swiper;new w(i,h).then(e=>{o=e,this.syncPagination()}),o&&(o=new o(i,h)),this.syncPagination()}},a=()=>{o&&"function"==typeof o.destroy&&(o.destroy(!0,!0),o=null,i.removeClass(`swiper swiper-container cwm-swiper-${s}`).addClass("elementor-grid"),i.find(".post-wrapper").removeClass("swiper-slide").unwrap(".swiper-wrapper"),i.find(`.swiper-button-next.cwm-slider-arrow-${s}, .swiper-button-prev.cwm-slider-arrow-${s}, .swiper-pagination-${s}`).remove(),i.find(".post-wrapper").removeAttr("style"),i.addClass("elementor-grid"))},l=()=>{let t=e(window).width(),s=t<=n;s&&!o?r():!s&&o&&a()};t.carousel_breakpoints&&0!==t.carousel_breakpoints.length?(l(),e(window).off("resize."+s),e(window).on("resize."+s,this.debounce(l,200))):r()},syncPagination:function(){let e=document.querySelector("#sync1 .swiper-container"),t=document.querySelector("#sync2 .swiper-container");if(!e||!t)return;let s=e.swiper,i=t.swiper,o=!1,n=(e,t)=>{if(!o){o=!0;let s=e.realIndex;if(e.params.loop){let i=e.slides.length-2*e.loopedSlides,n=e.activeIndex%i;s=n+e.loopedSlides}t.slideToLoop(s),o=!1}};s.on("slideChange",function(){n(s,i)}),i.on("slideChange",function(){n(i,s)})}});elementorFrontend.elementsHandler.attachHandler("post-widget",t)})}(jQuery);