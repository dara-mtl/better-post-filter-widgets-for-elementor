!function(e){e(window).on("elementor/frontend/init",function(){var t=elementorModules.frontend.handlers.Base.extend({bindEvents:function(){this.changePostStatus(),this.getPinnedPosts(),this.getPostsByAjax(),this.getAjaxSearch(),this.postCarousel()},changePostStatus:function(){var t;this.$element.find(".elementor-widget-container").on("click",".edit-button, .unpublish-button",function(){var t=e(this).attr("data-postid"),s=e(this);return e.ajax({type:"POST",url:ajax_var.url,async:!0,data:{action:"change_post_status",post_id:t,nonce:ajax_var.nonce},success:function(e){s.removeAttr("href").removeAttr("onclick").text("Done!")},error:function(e,t,s){console.log("AJAX request failed: "+t+", "+s)}}),!1})},getPinnedPosts:function(){this.$element.find(".post-container").on("click",".post-pin",function(t){t.preventDefault();var s=e(this),i=s.data("postid"),o=s.attr("class"),n=e(".pinned_post_query");e.ajax({type:"POST",url:ajax_var.url,data:{action:"pin_post",post_id:i,pin_class:o,nonce:ajax_var.nonce},success:function(){s.toggleClass("unpin"),0!==n.length&&(e('.post-pin[data-postid="'+i+'"]').not(s).removeClass("unpin"),n.animate({opacity:.65},"normal",function(){n.load(location.href+" .pinned_post_query:first > *",function(){n.animate({opacity:1},"normal")})}))}})})},getPostsByAjax:function(){var t=!1,s=this.$element,i=s.find(".post-container"),o=s.find(".loader"),n=" .elementor-element-"+s.data("id")+" .post-container-inner",a=i.find(".pagination"),r=a.data("page"),l=a.data("max-page")-1;if(0!==i.length){var d=this.getElementSettings(),p=d.pagination,c=d.scroll_to_top;s.on("click",".pagination a",function(t){!e(this).closest(".pagination-filter").length&&(t.preventDefault(),i.addClass("load"),(i.hasClass("shortcode")||i.hasClass("template"))&&o.show(),function t(o){if("infinite"==p||"load_more"==p){var a=s.find(".load-more");a.text("Loading..."),a.prop("disabled",!0),e.get(o,function(t){var s=i.find(".elementor-grid").children().clone();i.empty().append(e(t).find(n)),i.find(".elementor-grid").prepend(s),i.hide().show().removeClass("load"),u()}).fail(function(e,t,s){console.error("An error occurred while fetching the posts: "+t),console.error("HTTP status: "+e.status),console.error("Error thrown: "+s)})}else e.get(o,function(t){i.empty().append(e(t).find(n)),i.hide().show().removeClass("load"),u()}).fail(function(e,t,s){console.error("An error occurred while fetching the posts: "+t),console.error("HTTP status: "+e.status),console.error("Error thrown: "+s)})}(e(this).attr("href")))}),s.on("click",".load-more",function(t){!e(this).hasClass("load-more-filter")&&(t.preventDefault(),s.find(".pagination a.next").click())}),"infinite"===p&&e(window).on("scroll",function(){if(0===e(document).find(".pagination-filter").length){var i=s.find(".pagination a.next"),o=e(document).height(),n=e(window).height()+e(window).scrollTop();o-n<=300&&!t&&r<=l&&(t=!0,i.click())}})}function u(){var e=s.find(".load-more");o.hide(),(r+=1)>l&&e.hide(),"yes"==c&&window.scrollTo({top:i.offset().top-150,behavior:"smooth"}),t=!1}},getAjaxSearch:function(){if(!e("div.filter-container").length){var t=this.getElementSettings(),s=t.scroll_to_top,i=(t.post_status,t.post_type_search),o=this.$element,n=o.find(".post-container"),a=o.find(".loader"),r=o.data("id"),l=window.elementorFrontendConfig.post.id,d=o.html();(0===l||"undefined"===l)&&(l=e(document).find("main div").data("elementor-id")),o.on("click",".pagination-filter a",function(t){p(e(this).attr("href").split("?")[1].split("=")[1]),t.preventDefault()}),o.on("submit",".search-container form",function(){return p(),!1})}function p(t){n.addClass("load"),(n.hasClass("shortcode")||n.hasClass("template"))&&a.fadeIn();var p=e(".search-container form").find('input[name="s"]').val();e.ajax({type:"POST",url:ajax_var.url,async:!0,data:{action:"post_filter_results",widget_id:r,page_id:l,search_query:p,post_type:i,paged:t,base:window.location.pathname,nonce:ajax_var.nonce},success:function(t){var s=JSON.parse(t),i=s.html,n=s.base;if("0"===t)o.html(d).removeClass("load");else{a.fadeOut(),o.html(i).fadeIn().removeClass("load");var r=o.find('nav[aria-label="Pagination"]');r.addClass("pagination-filter"),r.find("a.page-numbers").each(function(){var t=e(this).attr("href");n.endsWith("/")&&(n=n.slice(0,-1));var s=t.replace("/wp-admin/admin-ajax.php",n);e(this).attr("href",s)})}},complete:function(){"yes"==s&&window.scrollTo({top:n.offset().top-150,behavior:"smooth"}),setTimeout(function(){elementorFrontend.elementsHandler.runReadyTrigger(o)},500)}})}},postCarousel:function(){var t=this.getElementSettings(),s=this.$element.find(".cwm-swiper");if(0===s.length)return;let i;i&&(i.destroy(!0,!0),i=null),s.addClass("swiper swiper-container"),s.children(".post-wrapper").addClass("swiper-slide").wrapAll('<div class="swiper-wrapper"></div>');let o=e('<div class="swiper-button-next cwm-slider-arrow"></div>'),n=e('<div class="swiper-button-prev cwm-slider-arrow"></div>'),a=e('<div class="swiper-pagination"></div>'),r=e('<div style="display:none;" class="swiper-button-next cwm-slider-arrow"></div>'),l=e('<div style="display:none;" class="swiper-button-prev cwm-slider-arrow"></div>'),d=e('<div style="display:none;" class="swiper-pagination"></div>');t.post_slider_arrows?s.append(o).append(n):s.append(r).append(l),t.post_slider_pagination?s.append(a):s.append(d);let p=t.post_slider_autoplay||!1;p?t.autoplay={delay:t.post_slider_autoplay_delay}:t.autoplay=!1;let c={},u=elementorFrontend.config.responsive.breakpoints;c[u.mobile.value]={slidesPerView:parseFloat(t.post_slider_slides_per_view_mobile)||1,slidesPerGroup:parseInt(t.post_slider_slides_to_scroll_mobile)||1,spaceBetween:parseFloat(t.post_slider_gap_mobile)||parseFloat(t.post_slider_gap)||0},void 0!==t.post_slider_slides_per_view_mobile_extra&&(c[u.mobile_extra.value]={slidesPerView:parseFloat(t.post_slider_slides_per_view_mobile_extra)||1,slidesPerGroup:parseInt(t.post_slider_slides_to_scroll_mobile_extra)||1,spaceBetween:parseFloat(t.post_slider_gap_mobile_extra)||parseFloat(t.post_slider_gap)||0}),c[u.tablet.value]={slidesPerView:parseFloat(t.post_slider_slides_per_view_tablet)||1,slidesPerGroup:parseInt(t.post_slider_slides_to_scroll_tablet)||1,spaceBetween:parseFloat(t.post_slider_gap_tablet)||parseFloat(t.post_slider_gap)||0},void 0!==t.post_slider_slides_per_view_tablet_extra&&(c[u.tablet_extra.value]={slidesPerView:parseFloat(t.post_slider_slides_per_view_tablet_extra)||1,slidesPerGroup:parseInt(t.post_slider_slides_to_scroll_tablet_extra)||1,spaceBetween:parseFloat(t.post_slider_gap_tablet_extra)||parseFloat(t.post_slider_gap)||0}),c[u.laptop.value]={slidesPerView:parseFloat(t.post_slider_slides_per_view)||1,slidesPerGroup:parseInt(t.post_slider_slides_to_scroll)||1,spaceBetween:parseFloat(t.post_slider_gap)||0},void 0!==t.post_slider_slides_per_view_widescreen&&(c[u.widescreen.value]={slidesPerView:parseFloat(t.post_slider_slides_per_view_widescreen)||1,slidesPerGroup:parseInt(t.post_slider_slides_to_scroll_widescreen)||1,spaceBetween:parseFloat(t.post_slider_gap_widescreen)||parseFloat(t.post_slider_gap)||0}),"fade"===t.post_slider_transition_effect?t.breakpoints={}:t.breakpoints=c;let f={allowTouchMove:"yes"===t.post_slider_allow_touch_move,autoHeight:"yes"===t.post_slider_auto_h,effect:t.post_slider_transition_effect,direction:"horizontal",loop:"yes"===t.post_slider_loop,centerInsufficientSlides:!1,parallax:"yes"===t.post_slider_parallax,handleElementorBreakpoints:!0,speed:t.post_slider_speed,slidesPerView:parseFloat(t.post_slider_slides_per_view),slidesPerGroup:parseInt(t.post_slider_slides_to_scroll),spaceBetween:parseFloat(t.post_slider_gap),breakpoints:t.breakpoints,centeredSlides:"yes"===t.post_slider_centered_slides,centeredSlidesBounds:"yes"===t.post_slider_slides_round_lenghts,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",type:t.post_slider_pagination_type,clickable:!0},autoplay:t.autoplay,mousewheel:"yes"===t.post_slider_allow_mousewheel,watchOverflow:!0};if(void 0===i){let h=elementorFrontend.utils.swiper;new h(s,f).then(e=>{i=e})}else i=new i(s,f)}});elementorFrontend.elementsHandler.attachHandler("post-widget",t)})}(jQuery);