!function(e){"use strict";e(window).on("elementor/frontend/init",(function(){var t={},a={};let i="";i=e(".elementor-widget-filter-widget").length?"filter-widget":e(".elementor-widget-search-bar-widget").length?"search-bar-widget":"sorting-widget",e(".elementor-widget-filter-widget, .elementor-widget-search-bar-widget, .elementor-widget-sorting-widget").each((function(){var i=e(this),n=i.data("id"),r=i.data("settings"),o=r?.target_selector;if(o&&e(o).length){var l=e(o),d=l.data("filters-list")?l.data("filters-list").split(","):[];d.includes(n)||(d.push(n),l.data("filters-list",d.join(",")),l.attr("data-filters-list",d.join(",")));var s=l.data("id");if(t[s]||(t[s]=l.html()),!a[s]){const e=l.data("settings");let t=e?.posts_per_page?parseInt(e.posts_per_page):null;if(!t){let e=l.find(".elementor-posts, .grid, .columns, .elementor-grid").first();e.length&&(t=e.children("article, .post, .item, .entry").length)}if(!t){let e=l.find(".swiper-wrapper").first();e.length&&(t=e.children(".swiper-slide").length)}if(!t){let e=l.find("ul.products").first();e.length&&(t=e.children("li").length)}if(!t){let e=l.find("ul").first();e.length&&(t=e.children("li").length)}if(!t){let e=l.find("div").first();e.length&&(t=e.children("div").length)}a[s]=t>0?t:50}}}));const n=elementorModules.frontend.handlers.Base.extend({bindEvents(){this.getAjaxFilter()},getAjaxFilter(){let i=!1;const n=this.$element.find(".filter-container");n.find(".bpfwe-select2 select").each((function(t){const a=e(this),i=a.closest(".bpfwe-select2"),n="bpfwe-select2-"+t;a.attr("id",n).prop("multiple",!1).select2({dropdownParent:i}),i.css({visibility:"visible",opacity:"1",transition:"opacity 0.3s ease-in-out"})})),n.find(".bpfwe-multi-select2 select").each((function(t){const a=e(this),i=a.closest(".bpfwe-multi-select2"),n="bpfwe-multi-select2-"+t;function r(){var e=i.find(".select2-selection__rendered");e.find(".select2-selection__e-plus-button").remove(),0===a.val().length&&e.prepend('<span class="select2-selection__choice select2-selection__e-plus-button">+</span>')}a.attr("id",n).prop("multiple",!0).select2({dropdownParent:i}),a.val(null).trigger("change"),i.css({visibility:"visible",opacity:"1",transition:"opacity 0.3s ease-in-out"}),r(),a.on("change",r)})),n.on("click","li.more",(function(){e(this).closest("ul.taxonomy-filter").toggleClass("show-toggle")})),n.on("click",".low-group-trigger",(function(){var t=e(this),a=t.closest("li"),i=a.hasClass("child-term")?a.children(".low-terms-group"):a.next(".low-terms-group");i.toggle();var n=i.is(":visible");t.text(n?"-":"+"),t.attr("aria-expanded",n)})),e(document).off("keydown","form.form-tax input").on("keydown","form.form-tax input",(function(e){13===e.which&&e.preventDefault()}));const r=window.location.href,o=this.$element.data("settings");if(!o)return;let l=o?.target_selector??"";if(!l||!e(l).length){let t=e(".elementor-widget-loop-carousel, .elementor-widget-loop-grid, .elementor-widget-post-widget, .elementor-widget-posts").first();if(t.length){let e=t.attr("class")?.split(" ").find((e=>e.startsWith("elementor-widget-")))||"";l=t.attr("id")?`#${t.attr("id")}`:e?`.${e}`:""}}if(!l||"."===l)return;let d=o?.group_logic??"",s=o?.dynamic_filtering??"",c=o?.scroll_to_top??"",f=o?.nothing_found_message??"It seems we can’t find what you’re looking for.",p=1,g="",m=e(l),u=m.data("id");m.find(".loader");m.find(".pagination").data("max-page");var h={};const v=m.data("settings");if(v&&(v.pagination||v.pagination_type)){g=v.pagination||v.pagination_type;var w=(v.scroll_threshold?.size||0)+(v.scroll_threshold?.unit||"px")}else w="0px";let _=window.elementorFrontendConfig.post.id;if(!_){if(!u)return;var y=e('[data-id="'+u+'"]').parents("[data-elementor-id]").last();y.length&&(_=y.data("elementor-id"))}function x(e,t){let a;return function(){const i=this,n=arguments;clearTimeout(a),a=setTimeout((()=>e.apply(i,n)),t)}}let b,C=!1;function k(e){var t;return(t=e.includes("?page=")?e.match(/\?page=(\d+)/):e.includes("?paged=")?e.match(/\?paged=(\d+)/):e.match(/\/(\d+)(\/|$)/)?e.match(/\/(\d+)(\/|$)/):e.match(/[?&](\w+)=\d+/))||(t=e.match(/(\d+)(\/|$)/)),t?t[1]:null}function j(){let e=window.location.origin+window.location.pathname;e=e.replace(/\/page\/\d+\/?$/,""),history.replaceState(null,"",e)}function E(t){let a=t.find(".post-container").data("total-post")||0;a=Number(a),e(".filter-post-count .number").text(a)}function I(o,l,p){let g=o?e('div[data-filters-list*="'+o+'"]').data("id"):u;if(!g)return;p&&(g=p);let m=e('div[data-id="'+g+'"]');if(!m.length)return;let v=t[g],y=a[g],b=m.data("filters-list")?m.data("filters-list").split(","):[],C=m.find(".post-container"),j="",F="",$="",z="",T="",P=m.data("settings")?.pagination||m.data("settings")?.pagination_type||"";"cwm_infinite"!==P&&"infinite"!==P||!h[g]||(h[g].disconnect(),h[g]=null);let H=e('.elementor-widget-sorting-widget[data-id="'+o+'"]').length>0,A=e('.elementor-widget-search-bar-widget[data-id="'+o+'"]').length>0,O=e('.elementor-widget-filter-widget[data-id="'+o+'"]').length>0;(H||A||O)&&(m.removeClass("filter-active"),m.data("current-page",1));let M=!1;b.forEach((function(t){if(!T){var a=e('.elementor-widget-sorting-widget[data-id="'+t+'"]');a.length&&(T=a.data("settings")?.filter_post_type||"")}if(!T){var i=e('.elementor-widget-search-bar-widget[data-id="'+t+'"]');i.length&&(T=i.data("settings")?.filter_post_type||"")}var n=e('.elementor-widget-filter-widget[data-id="'+t+'"]');n.length&&(T=n.data("settings")?.filter_post_type||"")})),b.forEach((function(t){var a=e('.elementor-widget-search-bar-widget[data-id="'+t+'"]');a.length&&(z=a.find("form.search-post input").val()||"",z&&(M=!0));var i=e('.elementor-widget-sorting-widget[data-id="'+t+'"]');if(i.length){var n=i.find(".form-order-by select"),r=n.find("option:first-child");n.find("option:selected").each((function(){var t=e(this);j=t.data("order"),$=t.data("meta"),F=t.val(),t.val()!==r.val()&&(M=!0)}))}}));var S=new URLSearchParams(window.location.search);S.has("search")&&(z=S.get("search"),z&&(M=!0)),m.removeClass("e-load-more-pagination-end"),C.addClass("load"),m.addClass("load"),m.addClass("filter-initialized"),(C.hasClass("shortcode")||C.hasClass("template"))&&m.find(".loader").fadeIn();var D=[],R=[],W=[],J=[];function L(e){return e.reduce((function(e,t){var a=e.reduce((function(e,a,i){return a.taxonomy===t.taxonomy?i:e}),-1);return a>=0?e[a].terms=e[a].terms.concat(t.terms):e=e.concat([{taxonomy:t.taxonomy,terms:[t.terms],logic:t.logic}]),e}),[])}b.forEach((function(t){var a=e('.elementor-widget-filter-widget[data-id="'+t+'"]');a.length&&(a.find(".bpfwe-taxonomy-wrapper input:checked, .bpfwe-custom-field-wrapper input:checked").each((function(){var t=e(this);(t.closest(".bpfwe-taxonomy-wrapper").length?D:R).push({taxonomy:t.data("taxonomy"),terms:t.val(),logic:t.closest("div").data("logic")}),M=!0})),a.find(".bpfwe-custom-field-wrapper input.input-text").each((function(){var t=e(this);t.val()&&(W.push({taxonomy:t.data("taxonomy"),terms:t.val(),logic:t.closest("div").data("logic")}),M=!0)})),a.find(".bpfwe-taxonomy-wrapper select option:selected, .bpfwe-custom-field-wrapper select option:selected").each((function(){var t=e(this);t.val()&&((t.closest(".bpfwe-taxonomy-wrapper").length?D:R).push({taxonomy:t.data("taxonomy"),terms:t.val(),logic:t.closest("div").data("logic")}),M=!0)})),a.find(".bpfwe-numeric-wrapper input").each((function(){var t=e(this),i=t.data("base-value");if(""===t.val()||t.val()!=i){""===t.val()&&t.val(i);var n=t.attr("class").split(" ")[0];a.find(".bpfwe-numeric-wrapper input").each((function(){var t=e(this);t.hasClass(n)&&(J.push({taxonomy:t.data("taxonomy"),terms:t.val(),logic:t.closest("div").data("logic")}),M=!0)}))}})))}));var N=L(D),q=L(R),B=L(W),Q=L(J);e.ajax({type:"POST",url:ajax_var.url,async:!0,data:{action:"post_filter_results",widget_id:g,page_id:_,group_logic:d,search_query:z,taxonomy_output:N,dynamic_filtering:s,custom_field_output:q,custom_field_like_output:B,numeric_output:Q,post_type:T,posts_per_page:y,order:j,order_by:F,order_by_meta:$,paged:l,archive_type:e('[name="archive_type"]').val(),archive_post_type:e('[name="archive_post_type"]').val(),archive_taxonomy:e('[name="archive_taxonomy"]').val(),archive_id:e('[name="archive_id"]').val(),nonce:ajax_var.nonce},success:function(t){var a=JSON.parse(t).html,i=r.replace(/\/page\/\d+\/?($|\?)/,"/$1").replace(/[?&]e-page-[a-z0-9]+=\d+/i,"").replace(/[?&]product-page=\d+/i,"").replace(/[?&]paged=\d+/i,"").replace(/\?&+/,"?").replace(/\?$/,"");n.find("form").serialize();if("0"!==t&&M){if(["infinite","load_more","load_more_on_click","load_more_infinite_scroll","cwm_infinite"].includes(P))if(m.hasClass("filter-active")){var o=m.find(".elementor-grid").children();m.hide().empty().append(e(a)),m.find(".elementor-grid").prepend(o),m.removeClass("e-load-more-pagination-loading"),m[m.hasClass("elementor-widget-posts")?"fadeIn":"show"](),m.removeClass("load")}else m.html(a).fadeIn().removeClass("load");else m.html(a).fadeIn().removeClass("load");if(m.find(".loader").fadeOut(),e(a).text().trim()){var l=m.find('nav[aria-label="Pagination"], nav[aria-label="Product Pagination"]');l.addClass("pagination-filter"),l.find("a.page-numbers").each((function(){var t=e(this).attr("href");i.endsWith("/")&&(i=i.slice(0,-1)),e(this).attr("href",t.replace(/.*wp-admin\/admin-ajax\.php/,i))}));var d=m.find(".e-load-more-anchor"),s=d.data("next-page"),c=m.find(".load-more"),p=m.find(".e-load-more-anchor").nextAll().find(".elementor-button-link.elementor-button");if(c.addClass("load-more-filter"),p.addClass("load-more-filter"),m.addClass("filter-active"),s){i.endsWith("/")&&(i=i.slice(0,-1)),d.attr("data-next-page",s.replace(/.*wp-admin\/admin-ajax\.php/,i))}g=m.data("settings");"load_more_infinite_scroll"===g?.pagination_type&&(g.pagination_type="cwm_infinite",m.data("settings",g)),"ajax"===g?.pagination_load_type&&(g.pagination_load_type="cwm_ajax",m.data("settings",g)),E(m)}else f=f.replace(/</g,"<").replace(/>/g,">"),f.trim()&&m.html('<div class="no-post">'+f+"</div>")}else{m.html(v).fadeIn().removeClass("load filter-active");var g=m.data("settings");"cwm_infinite"===g?.pagination_type&&(g.pagination_type="load_more_infinite_scroll",m.data("settings",g)),"cwm_ajax"===g?.pagination_load_type&&(g.pagination_load_type="ajax",m.data("settings",g)),E(m)}m.removeClass("filter-initialized")},complete:function(){var e=m.find(".load-more-filter");P=m.data("settings")?.pagination||m.data("settings")?.pagination_type||"";var t=m.find(".e-load-more-anchor");if(t.length){var a=t.data("page");n=t.data("max-page")-1}else{a=m.find(".pagination").data("page");var n=m.find(".pagination").data("max-page")-1}"yes"===c&&window.scrollTo({top:m.offset().top-150,behavior:"smooth"}),a>n&&(m.addClass("e-load-more-pagination-end"),e.hide()),i=!1,m.hasClass("filter-active")&&"infinite"===P&&x((function(){!function(e,t){var a=t.find(".e-load-more-anchor"),n=t.find(".pagination-filter a.next");if(!n.length)return void(h[e]&&(h[e].disconnect(),h[e]=null));n.length&&a.length&&(h[e]||(h[e]=new IntersectionObserver((function(a){a.forEach((function(a){if(a.isIntersecting){var n=t.find(".pagination-filter a.next");if(!i&&n.length&&t.hasClass("filter-active"))i=!0,I(null,k(n.attr("href")),e)}}))}),{root:null,rootMargin:w,threshold:0})),h[e].observe(a.get(0)))}(g,m)}),800)(),m.hasClass("filter-active")&&"cwm_infinite"===P&&x((function(){!function(e,t){var a=t.find(".e-load-more-anchor"),n=t.data("current-page")||1,r=a.data("max-page");if(n>=r)return void(h[e]&&(h[e].disconnect(),h[e]=null));a.length&&n<r&&(h[e]||(h[e]=new IntersectionObserver((function(a){a.forEach((function(a){a.isIntersecting&&!i&&t.hasClass("filter-active")&&(i=!0,n++,t.data("current-page",n),I(null,n,e))}))}),{root:null,rootMargin:w,threshold:0})),h[e].observe(a.get(0)))}(g,m)}),800)(),m.find("input").val(z),elementorFrontend.elementsHandler.runReadyTrigger(m),elementorFrontend.config.experimentalFeatures.e_lazyload&&document.dispatchEvent(new Event("elementor/lazyload/observe"))},error:function(e,t,a){console.log("AJAX error:",a),m.html(v).fadeIn().removeClass("load filter-active");var i=m.data("settings");"cwm_infinite"===i?.pagination_type&&(i.pagination_type="load_more_infinite_scroll",m.data("settings",i)),"cwm_ajax"===i?.pagination_load_type&&(i.pagination_load_type="ajax",m.data("settings",i)),E(m),elementorFrontend.elementsHandler.runReadyTrigger(m),elementorFrontend.config.experimentalFeatures.e_lazyload&&document.dispatchEvent(new Event("elementor/lazyload/observe"))}})}n.on("mousedown keydown touchstart","form.form-tax",(function(){C=!0,clearTimeout(b)})),n.on("mouseup keyup touchend","form.form-tax",(function(){b=setTimeout((()=>C=!1),700)})),e(document).off("change keydown input","form.form-tax, .bpfwe-numeric-wrapper input").on("change keydown input","form.form-tax, .bpfwe-numeric-wrapper input",x((function(t){var a=e(this).closest(".elementor-widget-filter-widget"),i=a.data("id");if(!i)return;if(!(a.find(".submit-form").length>0)){if("change"===t.type||"keydown"===t.type&&"Enter"===t.key)return j(),void I(i);C||(j(),I(i))}}),700)),e(document).off("click",".submit-form").on("click",".submit-form",(function(){var t=e(this).closest(".elementor-widget-filter-widget").data("id");if(t)return j(),I(t),!1})),e(document).off("change","form.form-order-by").on("change","form.form-order-by",(function(){var t=e(this).closest(".elementor-widget-sorting-widget").data("id");t&&(j(),I(t))})),e(document).off("submit","form.search-post").on("submit","form.search-post",(function(){var t=e(this).closest(".elementor-widget-search-bar-widget").data("id");if(t)return j(),I(t),!e(this).hasClass("no-redirect")&&void 0})),r.includes("?search=")&&I(),e(document).off("click",".pagination-filter a").on("click",".pagination-filter a",(function(t){var a=e(this).closest("[data-id]").data("id");t.preventDefault(),I(null,k(e(this).attr("href")),a)})),e(document).off("click",".load-more-filter").on("click",".load-more-filter",(function(t){t.preventDefault();var a=e(this).closest("[data-id]"),i=a.data("id"),n=a.find(".e-load-more-anchor").data("next-page");if(n){I(null,k(n),i)}else{var r=a.find(".pagination-filter a.next");if(r.length)r.trigger("click"),p++,a.data("current-page",p),a.find(".load-more").text("Loading...").prop("disabled",!0)}})),n.on("click",".reset-form",(function(){var t=e(this).closest(".elementor-widget-filter-widget").data("id"),a=e('div[data-filters-list*="'+t+'"]');a.data("id")&&a.length&&((a.data("filters-list")?a.data("filters-list").split(","):[]).forEach((function(t){var a=e('.elementor-widget-filter-widget[data-id="'+t+'"]');a.length&&(a.find("input:checked").prop("checked",!1),a.find("select").each((function(){e(this).val(e(this).find("option:first").val()).trigger("change")})),a.find(".bpfwe-numeric-wrapper input").each((function(){var t=e(this).data("base-value");e(this).val(t).trigger("input")})),a.find("input.input-text").val("").trigger("input"));var i=e('.elementor-widget-sorting-widget[data-id="'+t+'"]');i.length&&i.find("form.form-order-by select").prop("selectedIndex",0).trigger("change");var n=e('.elementor-widget-search-bar-widget[data-id="'+t+'"]');n.length&&n.find('form.search-post input[name="s"]').val("").trigger("input")})),j(),a.addClass("filter-initialized"),a.removeClass("filter-active"),a.data("current-page",1),I(t))})),E(m)}});elementorFrontend.isEditMode()?elementorFrontend.elementsHandler.attachHandler("filter-widget",n):elementorFrontend.elementsHandler.attachHandler(i,n)}))}(jQuery);