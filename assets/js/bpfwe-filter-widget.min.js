!function(e){"use strict";e(window).on("elementor/frontend/init",(function(){const t=e(document),i={},n={};let a="",r=!1,l=!1;function o(e,t){let i;return function(){const n=this,a=arguments;clearTimeout(i),i=setTimeout((()=>e.apply(n,a)),t)}}function s(e){const t={};return e.forEach((e=>{const{taxonomy:i,terms:n,logic:a}=e;t[i]||(t[i]={taxonomy:i,terms:[],logic:a}),t[i].terms=t[i].terms.concat(n)})),Object.values(t)}function d(e){const t=new URL(e,window.location.origin),i=t.searchParams.get("page_num");if(i&&!isNaN(i))return parseInt(i,10);const n=t.searchParams.get("paged");if(n&&!isNaN(n))return parseInt(n,10);const a=t.searchParams.get("page");if(a&&!isNaN(a))return parseInt(a,10);const r=e.match(/\/page\/(\d+)(\/|$)/);return r&&r[1]?parseInt(r[1],10):1}function c(){e(".elementor-widget-filter-widget, .elementor-widget-search-bar-widget, .elementor-widget-sorting-widget").each((function(){var t=e(this),a=t.data("id"),r=t.data("settings"),l=r?.target_selector;if(l&&e(l).length){var o=e(l),s=o.data("filters-list")?o.data("filters-list").split(","):[];s.includes(a)||(s.push(a),o.data("filters-list",s.join(",")),o.attr("data-filters-list",s.join(",")));var d=o.data("id");if(i[d]||(i[d]=o.html()),!n[d]){const e=o.data("settings");let t=e?.posts_per_page?parseInt(e.posts_per_page):null;if(!t){let e=o.find(".elementor-posts, .grid, .columns, .elementor-grid").first();e.length&&(t=e.children("article, .post, .item, .entry").length)}if(!t){let e=o.find(".swiper-wrapper").first();e.length&&(t=e.children(".swiper-slide").length)}if(!t){let e=o.find("ul.products").first();e.length&&(t=e.children("li").length)}if(!t){let e=o.find("ul").first();e.length&&(t=e.children("li").length)}if(!t){let e=o.find("div").first();e.length&&(t=e.children("div").length)}n[d]=t>0?t:50}}}))}a=e(".elementor-widget-filter-widget").length?"filter-widget":e(".elementor-widget-search-bar-widget").length?"search-bar-widget":"sorting-widget",c(),function(){const t=new URLSearchParams(window.location.search),i=t.get("results");if(!i)return;const n=e("#"+i);if(!n.length)return;let a=!1,r=!1;if(["min__regular_price","max__regular_price"].forEach((function(e){if(t.has(e)){const i=e.replace("__","_");t.set(i,t.get(e)),t.delete(e),r=!0}})),r){const e=window.location.pathname+"?"+t.toString();window.history.replaceState({},"",e)}function l(){const t=new URLSearchParams;t.set("results",i),n.find(":checkbox:checked, :radio:checked").each((function(){const i=e(this),n=i.attr("name");if(!n)return;const a=i.val(),r=t.get(n);t.set(n,r?r+","+a:a)})),n.find('input[type="text"], input[type="number"]').each((function(){const i=e(this),n=i.attr("name"),a=i.val();if(!n||!a)return;if(n.startsWith("min_")||n.startsWith("max_"))return void t.set(n,a);const r=function(e){const t=(e.closest(".flex-wrapper").attr("class")||"").split(/\s+/);for(let e=0;e<t.length;e++)if(t[e]&&"flex-wrapper"!==t[e])return t[e];return null}(i),l=r?n+"_"+r:n;t.set(l,a)})),n.find("select").each((function(){const i=e(this),n=i.attr("name");if(!n)return;let a=i.val();if(null===a||""===a)return;Array.isArray(a)&&(a=a.join(","));const r=t.get(n);t.set(n,r?r+","+a:a)}));const a=window.location.pathname+"?"+t.toString();window.history.replaceState({},"",a)}const o=function(){const t={};return n.find(".flex-wrapper").each((function(){const i=(e(this).attr("class")||"").split(/\s+/);for(let e=0;e<i.length;e++)i[e]&&"flex-wrapper"!==i[e]&&(t[i[e]]=!0)})),Object.keys(t).sort((function(e,t){return t.length-e.length}))}();t.forEach((function(t,i){if("results"===i)return;if(i.startsWith("min_")||i.startsWith("max_")){let e=n.find('[name="'+i+'"]');if(!e.length){const t=i.replace("_","__");e=n.find('[name="'+t+'"]')}return void(e.length&&(e.val(t),a=!0))}let r=!1;for(let l=0;l<o.length;l++){const s=o[l],d="_"+s;if(i.endsWith(d)){const l=i.slice(0,-d.length),o=n.find(".flex-wrapper."+s).find('[name="'+l+'"]');if(o.length){if(o.is('input[type="text"], input[type="number"]')){o.val(t),a=!0,r=!0;break}if(o.is(":checkbox, :radio")){const i=t.split(",");o.each((function(){i.includes(e(this).val())&&(e(this).prop("checked",!0),a=!0)})),r=!0;break}o.prop("multiple")&&t.split(",");a=!0,r=!0;break}}}if(r)return;const l=n.find('[name="'+i+'"]');if(l.length)if(l.is(":checkbox, :radio")){const i=t.split(",");l.each((function(){i.includes(e(this).val())&&(e(this).prop("checked",!0),a=!0)}))}else if(l.is('input[type="text"], input[type="number"]'))l.val(t),a=!0;else if(l.is("select")){const e=l.prop("multiple")?t.split(","):t;l.prop("multiple")?setTimeout((function(){l.val(e).trigger("change")}),100):l.val(e).trigger("change"),a=!0}})),a&&setTimeout((function(){n.find("select[multiple]").each((function(){const i=e(this),n=i.val();if(!n||0===n.length){const e=i.attr("name"),n=t.get(e);if(n){const e=n.split(",");i.val(e).trigger("change")}}})),l(),n.find(':checked, input[type="text"][value!=""], input[type="number"][value!=""]').trigger("change"),n.trigger("change")}),300),n.on("change input",'.bpfwe-filter-item, .input-text, [class^="bpfwe-filter-range-"], input[type="text"], input[type="number"], :checkbox, :radio, select',(function(){l()})),n.data("bpfweUpdateUrl",l)}(),t.on("click",".filter-title.collapsible",(function(){const t=e(this);let i=t.next(".bpfwe-taxonomy-wrapper, .bpfwe-custom-field-wrapper, .bpfwe-numeric-wrapper");i.length||(i=t.siblings(".bpfwe-taxonomy-wrapper, .bpfwe-custom-field-wrapper, .bpfwe-numeric-wrapper")),i.is(":visible")||i.css("display","flex").hide(),t.toggleClass("collapsed"),i.stop(!0,!0).slideToggle(300,(function(){i.is(":visible")&&i.css("display","flex")}))}));const f=elementorModules.frontend.handlers.Base.extend({bindEvents(){this.getAjaxFilter()},getAjaxFilter(){const a=this.$element.find(".filter-container");a.find(".bpfwe-select2 select").each((function(t){const i=e(this),n=i.closest(".bpfwe-select2"),a="bpfwe-select2-"+Math.floor(1e3*Math.random());i.attr("id",a).prop("multiple",!1).select2({dropdownParent:n}),n.css({visibility:"visible",opacity:"1",transition:"opacity 0.3s ease-in-out"})})),a.find(".bpfwe-multi-select2 select").each(((t,i)=>{const n=e(i),a=n.closest(".bpfwe-multi-select2"),r="bpfwe-multi-select2-"+Math.floor(1e3*Math.random());n.attr("id",r).prop("multiple",!0).select2({dropdownParent:a}),n.val(null).trigger("change.select2"),a.css({visibility:"visible",opacity:"1",transition:"opacity 0.3s ease-in-out"});const l=()=>{const e=a.find(".select2-selection__rendered");e.find(".select2-selection__e-plus-button").remove(),0===n.val().length&&e.prepend('<span class="select2-selection__choice select2-selection__e-plus-button">+</span>')};l(),n.on("change",l)})),a.find(".bpfwe-select-all").on("click",(function(){const t=e(this),i=t.data("taxonomy"),n=!t.hasClass("checked");t.toggleClass("checked",n);a.find("input.bpfwe-filter-item").filter('[data-taxonomy="'+i+'"]').filter((function(){return!e(this).closest("label").hasClass("bpfwe-option-disabled")})).prop("checked",n).trigger("change")})),a.find("input.bpfwe-filter-item").on("change",(function(){const t=e(this).data("taxonomy"),i=a.find("input.bpfwe-filter-item").filter('[data-taxonomy="'+t+'"]').filter((function(){return!e(this).closest("label").hasClass("bpfwe-option-disabled")})),n=a.find('.bpfwe-select-all[data-taxonomy="'+t+'"]'),r=i.length===i.filter(":checked").length;n.toggleClass("checked",r)})),a.on("click","li.more",(function(){e(this).closest("ul.taxonomy-filter").toggleClass("show-toggle")})),a.on("click",".low-group-trigger",(function(){var t=e(this),i=t.closest("li").children(".low-terms-group, .child-terms");i.toggle();var n=i.is(":visible");t.text(n?"-":"+"),t.attr("aria-expanded",n)})),r||(r=!0,t.off("mousedown.bpfwe-filter",'form.form-tax input[type="radio"]').on("mousedown.bpfwe-filter",'form.form-tax input[type="radio"]',(function(t){e(this).data("wasChecked",e(this).prop("checked"))})),t.off("click.bpfwe-filter",'form.form-tax input[type="radio"]').on("click.bpfwe-filter",'form.form-tax input[type="radio"]',(function(t){var i=e(this);i.data("wasChecked")&&i.prop("checked",!1).trigger("change"),i.removeData("wasChecked")})),t.off("mousedown.bpfwe-filter","form.form-tax label.bpfwe-visual-range-option").on("mousedown.bpfwe-filter","form.form-tax label.bpfwe-visual-range-option",(function(t){if(!e(t.target).is('input[type="radio"]')&&!e(t.target).closest('input[type="radio"]').length){var i=e(this),n=i.attr("for"),a=e();if(n){var r=document.getElementById(n);r&&(a=e(r))}else a=i.find('input[type="radio"]').first();a.length&&a.data("wasChecked",a.prop("checked"))}})),t.off("click.bpfwe-filter","form.form-tax label.bpfwe-visual-range-option").on("click.bpfwe-filter","form.form-tax label.bpfwe-visual-range-option",(function(t){if(!e(t.target).is('input[type="radio"]')&&!e(t.target).closest('input[type="radio"]').length){var i=e(this),n=i.attr("for"),a=e();if(n){var r=document.getElementById(n);r&&(a=e(r))}else a=i.find('input[type="radio"]').first();a.length&&(a.data("wasChecked")?(t.preventDefault(),a.prop("checked",!1).trigger("change")):(t.preventDefault(),a.prop("checked")||a.prop("checked",!0).trigger("change")),a.removeData("wasChecked"))}})),t.on("keydown.bpfwe-filter","form.form-tax input",(function(e){13===e.which&&e.preventDefault()})),t.on("submit.bpfwe-filter","form.form-tax",(function(e){e.preventDefault()})),t.off("change.bpfwe-filter input.bpfwe-filter","form.form-tax").on("change.bpfwe-filter input.bpfwe-filter","form.form-tax",o((function(t){var i=e(t.target);if(i.is(".bpfwe-numeric-wrapper input.input-val"))return;if(i.is(".select2-search__field")||i.closest(".select2-container").length)return;if(("ontouchstart"in window||navigator.maxTouchPoints>0||window.matchMedia("(pointer: coarse)").matches)&&i.is(".bpfwe-numeric-wrapper input")&&(i.is(":focus")||""===i.val()))return;var n=e(this).closest(".elementor-widget-filter-widget");i.is(".bpfwe-numeric-wrapper input")?function(e,t){var i=e.data("settings")||{};if("yes"!==i.is_facetted)return;if(!t||!t.length)return;var n=t.find('input[type="number"]');if(n.length<2)return;var a=n.eq(0).val(),r=n.eq(1).val();if(!a||!r)return;t.attr("data-faceted-range",a+"|"+r)}(n,i.closest(".bpfwe-numeric-wrapper")):e(this).find(".bpfwe-numeric-wrapper[data-faceted-range]").removeAttr("data-faceted-range");var a=n.data("id");if(!a)return;n.find(".submit-form").length>0||I(a)}),700)),t.off("change.bpfwe-filter input.bpfwe-filter","form.form-tax .bpfwe-numeric-wrapper input.input-val").on("change.bpfwe-filter input.bpfwe-filter","form.form-tax .bpfwe-numeric-wrapper input.input-val",o((function(t){const i=e(this).closest(".bpfwe-numeric-wrapper");if(!i.length)return;const n=i.closest(".elementor-widget-filter-widget"),a=n.data("id");if(!a)return;const r=n.find(".submit-form").length>0,l=i.find('input[name^="min_"]'),o=i.find('input[name^="max_"]');if(!l.length||!o.length)return;const s=(l.val()||"").trim(),d=(o.val()||"").trim();("ontouchstart"in window||navigator.maxTouchPoints>0||window.matchMedia("(pointer: coarse)").matches)&&e(this).is(".bpfwe-numeric-wrapper input.input-val")&&(l.is(":focus")||o.is(":focus")||""===s||""===d)||""!==s&&""!==d&&(isNaN(s)||isNaN(d)||Number(s)>=Number(d)||r||I(a))}),700)),t.off("click.bpfwe-filter","form.form-tax .submit-form").on("click.bpfwe-filter","form.form-tax .submit-form",(function(){var t=e(this).closest(".elementor-widget-filter-widget").data("id");if(t)return I(t),!1})),t.off("change.bpfwe-filter","form.form-order-by").on("change.bpfwe-filter","form.form-order-by",(function(){var t=e(this).closest(".elementor-widget-sorting-widget").data("id");t&&I(t)})),t.off("submit.bpfwe-filter","form.search-post").on("submit.bpfwe-filter","form.search-post",(function(){var t=e(this).closest(".elementor-widget-search-bar-widget").data("id");if(t)return I(t),!e(this).hasClass("no-redirect")&&void 0})),t.off("click.bpfwe-filter",".pagination-filter a").on("click.bpfwe-filter",".pagination-filter a",(function(t){var i=e(this).closest("[data-id]").data("id");t.preventDefault(),I(null,d(e(this).attr("href")),i)})),t.off("click.bpfwe-filter",".load-more-filter").on("click.bpfwe-filter",".load-more-filter",(function(t){t.preventDefault();var i=e(this).closest("[data-id]"),n=i.data("id"),a=i.find(".e-load-more-anchor").data("next-page");if(a){I(null,d(a),n)}else{var r=i.find(".pagination-filter a.next");if(r.length)r.trigger("click"),g++,i.data("current-page",g),i.find(".load-more").text("Loading...").prop("disabled",!0)}})));const f=window.location.href,p=this.$element.data("settings");if(!p)return;let u=p?.target_selector??"";if(!u||!e(u).length){let t=e(".elementor-widget-loop-carousel, .elementor-widget-loop-grid, .elementor-widget-post-widget, .elementor-widget-posts").first();if(t.length){let e=t.attr("class")?.split(" ").find((e=>e.startsWith("elementor-widget-")))||"";u=t.attr("id")?`#${t.attr("id")}`:e?`.${e}`:""}}if(!u||"."===u)return;let g=1,h="",m=e(u),w=m.data("id");m.find(".pagination").data("max-page");var v={};const b=m.data("settings");if(b&&(b.pagination||b.pagination_type)){h=b.pagination||b.pagination_type;var _=(b.scroll_threshold?.size||0)+(b.scroll_threshold?.unit||"px")}else _="0px";let y=null;e(".elementor-widget-filter-widget, .elementor-widget-search-bar-widget, .elementor-widget-sorting-widget").each((function(){const t=e(this).data("settings");if(t&&t.elementor_template_id)return y=t.elementor_template_id,!1}));let x=y;if(!x)if(x=window.elementorFrontendConfig.post.id||null,x){if(!w)return;if(($=e('[data-id="'+w+'"]').parents("[data-elementor-id]").last()).length){var k="elementor_library"===$.data("elementor-post-type"),C=$.data("elementor-type");k&&C&&-1!==C.indexOf("single")&&(x=$.data("elementor-id"))}}else{if(!w)return;var $;($=e('[data-id="'+w+'"]').parents("[data-elementor-id]").last()).length&&(x=$.data("elementor-id"))}function j(t){let i=t.find(".post-container").data("total-post")||0;i=Number(i),e(".filter-post-count .number").text(i)}function I(a,r,f){0===t.find('div[data-filters-list*="'+a+'"]').length&&c();let p=a?e('div[data-filters-list*="'+a+'"]').data("id"):w;if(!p)return;f&&(p=f);let u=e('div[data-id="'+p+'"]');if(!u.length)return;i[p];let g=n[p],h=u.data("filters-list")?u.data("filters-list").split(","):[],m=u.find(".post-container"),b="",y="",k="",C="",$="",q="",A=u.data("settings")?.pagination||u.data("settings")?.pagination_type||"";"cwm_infinite"!==A&&"infinite"!==A||!v[p]||(v[p].disconnect(),v[p]=null);let E=e('.elementor-widget-sorting-widget[data-id="'+a+'"]').length>0,O=e('.elementor-widget-search-bar-widget[data-id="'+a+'"]').length>0,P=e('.elementor-widget-filter-widget[data-id="'+a+'"]').length>0;(E||O||P)&&(u.removeClass("filter-active"),u.data("current-page",1));let F=!1,T="",M=!1,D="",z=!1,H="",U="",W=!1,L=!1,R="",B=!1,J="AND",Q={optimize_query:!1,no_found_rows:!1,suppress_filters:!1,posts_per_page:-1};e(".elementor-sticky__spacer").empty();let X=P?a:null;if(!X){let t=e('div[data-id="'+p+'"]'),i=1/0;h.forEach((n=>{let a=e('.elementor-widget-filter-widget[data-id="'+n+'"]');if(a.length){let e=Math.abs(t.offset().top-a.offset().top);e<i&&(i=e,X=n)}}))}if(!X){const t=e(".elementor-widget-filter-widget:visible");if(t.length>0){const e=t.last();X=e.data("id")}}let G=e(P?'.elementor-widget-filter-widget[data-id="'+a+'"]':'.elementor-widget-filter-widget[data-id="'+X+'"]');if(h.forEach((function(t){if(!$){var i=e('.elementor-widget-sorting-widget[data-id="'+t+'"]');i.length&&($=i.data("settings")?.filter_post_type||"")}if(!$){var n=e('.elementor-widget-search-bar-widget[data-id="'+t+'"]');n.length&&($=n.data("settings")?.filter_post_type||"")}const a=X||t;var r=e('.elementor-widget-filter-widget[data-id="'+a+'"]');if(r.length){var l=r.data("settings")||{};$=l.filter_post_type||"",T=l.nothing_found_message||"",M=l.is_facetted||!1,D=a,z=l.filter_custom_handler||!1,H=l.scroll_to_top||"",U=l.display_selected_before||"",W=l.enable_query_debug||!1,L=l.inject_query_id||!1,R=l.filter_query_id||"",B=l.dynamic_filtering||!1,J=l.group_logic||"AND",Q={optimize_query:"yes"===l.optimize_query,no_found_rows:"yes"===l.no_found_rows,suppress_filters:"yes"===l.suppress_filters,posts_per_page:parseInt(l.posts_per_page,10)||-1}}})),"targeted_widget"===$){let e="";const t=u.find('[class*="type-"]').first();if(t.length){const i=t.attr("class").split(/\s+/).find((e=>0===e.indexOf("type-")));i&&(e=i.replace("type-",""))}if(!e){const t=u.data("settings")||{};t.post_type&&Array.isArray(t.post_type)&&t.post_type.length>0&&(e=t.post_type[0])}$=e||"any"}var K=[],V=[],Y=[],Z=[],ee=[];h.forEach((function(t){e('.elementor-widget-search-bar-widget[data-id="'+t+'"]').each((function(){var t=e(this).find("form.search-post input").val();if(t&&t.trim().length>0)return C=t.trim(),!1})),""!==C&&(F=!0);var i=e('.elementor-widget-sorting-widget[data-id="'+t+'"]');if(i.length){var n=i.find(".form-order-by select"),a=n.find("option:selected"),r=n.find("option:first-child").val();a.each((function(){var t=e(this);b=t.data("order"),k=t.data("meta"),y=t.val(),t.val()===r&&""===y||(F=!0)}))}var l=e('.elementor-widget-filter-widget[data-id="'+t+'"]');l.length&&(l.find(".bpfwe-taxonomy-wrapper input:checked, .bpfwe-custom-field-wrapper input:checked").each((function(){var t=e(this);(t.closest(".bpfwe-taxonomy-wrapper").length?K:V).push({taxonomy:t.data("taxonomy"),terms:t.val(),logic:t.closest("div").data("logic")}),F=!0})),l.find(".bpfwe-custom-field-relational-wrapper input:checked").each((function(){var t=e(this);Y.push({taxonomy:t.data("taxonomy"),terms:t.val(),logic:t.closest("div").data("logic")}),F=!0})),l.find(".bpfwe-custom-field-wrapper input.input-text").each((function(){var t=e(this);t.val()&&(Z.push({taxonomy:t.data("taxonomy"),terms:t.val(),logic:t.closest("div").data("logic")}),F=!0)})),l.find(".bpfwe-taxonomy-wrapper select option:selected, .bpfwe-custom-field-wrapper select option:selected").each((function(){var t=e(this);t.val()&&((t.closest(".bpfwe-taxonomy-wrapper").length?K:V).push({taxonomy:t.data("taxonomy"),terms:t.val(),logic:t.closest("div").data("logic")}),F=!0)})),l.find(".bpfwe-numeric-wrapper").each((function(){var t=e(this),i=t.attr("data-faceted-range");t.find("input:not(.input-val)").each((function(){var n=e(this),a=n.attr("data-base-value");if(""===n.val()||n.val()!=a||i){""===n.val()&&n.val(a);var r=n.attr("class").split(" ")[0];t.find("input").each((function(){var n=e(this);if(n.hasClass(r)){var a=void 0!==i?i.split("|"):n.val();ee.push({taxonomy:n.data("taxonomy"),terms:a,logic:t.data("logic")}),F=!0}}))}}))})),l.find(".bpfwe-numeric-wrapper").has("input.input-val").each((function(){const t=e(this),i=t.find("input.input-val").first(),n=t.find("input.input-val").last(),a=(i.val()||"").trim(),r=(n.val()||"").trim();if(""===a||""===r)return;const l=(i.data("base-value")??"").toString().trim(),o=(n.data("base-value")??"").toString().trim();a===l&&r===o||[i,n].forEach((e=>{const i=(e.val()||"").trim();i!==(e.data("base-value")??"").toString().trim()&&""!==i&&(ee.push({taxonomy:e.data("taxonomy"),terms:i,logic:t.data("logic")||e.closest("[data-logic]").data("logic")}),F=!0)}))})),l.find('.bpfwe-visual-range-wrapper input[type="radio"]:checked').each((function(){var t=e(this),i=t.closest(".bpfwe-visual-range-wrapper").data("taxonomy"),n=t.closest(".bpfwe-visual-range-wrapper").data("logic"),a=parseFloat(t.data("min")),r=parseFloat(t.data("max"));isNaN(a)||isNaN(r)||(ee.push({taxonomy:i,terms:a,logic:n}),ee.push({taxonomy:i,terms:r,logic:n}),F=!0)})),q=l.find('.bpfwe-filter-item[data-taxonomy="post_date"]').map((function(){return this.value})).get().join(","))}));var te=new URLSearchParams(window.location.search);function ie(i){const n=e(i);n.length&&(elementorFrontend.elementsHandler.runReadyTrigger(n),n.find("[data-element_type]").each((function(){elementorFrontend.elementsHandler.runReadyTrigger(e(this))})),"function"==typeof elementorFrontend?.utils?.runElementHandlers&&elementorFrontend.utils.runElementHandlers(n[0]),t.trigger("elementor/lazyload/observe"))}te.has("search")&&(C=te.get("search"),C&&(F=!0)),u.removeClass("e-load-more-pagination-end"),m.addClass("load"),u.addClass("load filter-initialized"),(m.hasClass("shortcode")||m.hasClass("template"))&&u.find(".loader").fadeIn(),t.on("change",'.flex-wrapper input[type="radio"], .flex-wrapper select:not([multiple])',(function(){e(".flex-wrapper").removeClass("bpfwe-skip-update"),e(this).closest(".flex-wrapper").addClass("bpfwe-skip-update")})),t.on("change",'.flex-wrapper input[type="checkbox"], .flex-wrapper select[multiple]',(function(){e(".flex-wrapper").removeClass("bpfwe-skip-update"),setTimeout((function(){e(".flex-wrapper").removeClass("bpfwe-skip-update")}),800)})),S(a,U);var ne=s(K),ae=s(V),re=s(Y),le=s(Z),oe=s(ee);const se=z?ajax_var.bpfwe_url:ajax_var.url;e.ajax({type:"POST",url:se,async:!0,data:{action:"post_filter_results",widget_id:p,filter_widget:M?D:"",page_id:x,group_logic:J,search_query:C,date_query:q,taxonomy_output:ne,dynamic_filtering:B,custom_field_output:ae,custom_field_relational_output:re,custom_field_like_output:le,numeric_output:oe,post_type:$,posts_per_page:g,order:b,order_by:y,order_by_meta:k,paged:r,archive_type:e('[name="archive_type"]').val(),archive_post_type:e('[name="archive_post_type"]').val(),archive_taxonomy:e('[name="archive_taxonomy"]').val(),archive_id:e('[name="archive_id"]').val(),nonce:ajax_var.nonce,performance_settings:JSON.stringify(Q),enable_query_debug:W,inject_id:L,query_id:R},beforeSend:function(){G.addClass("load")},success:function(t){var n=JSON.parse(t),a=n.html,r=n.filters;if(n.query&&ajax_var.isUserLoggedIn){const e='<div class="query-debug-frame" style="background:#f5f5f5; border:1px solid #ccc; padding:10px; margin:15px 0; font-family: monospace; white-space: pre-wrap;">'+n.query+"</div>",t=G.find(".query-debug-frame");t.length&&t.replaceWith(e)}!function(t,i,n){if("0"===t||!i)return;if(!n||!Object.keys(n).length)return;const a=Object.keys(n)[0],r=e('.elementor-widget-filter-widget[data-id="'+a+'"]');if(!r.length)return;const l=e(n[a]);r.find(".flex-wrapper").each((function(){const t=e(this);if(t.find(".bpfwe-visual-range-wrapper").length)return;if(t.hasClass("bpfwe-skip-update"))return;const i=t.attr("class");if(!i)return;const n=".flex-wrapper."+i.trim().replace(/\s+/g,"."),a=l.find(n);if(a.length){if(t.find(".bpfwe-numeric-wrapper").length){const e=t.find('input:not(.input-val)[name^="min_"]'),i=t.find('input:not(.input-val)[name^="max_"]'),n=a.find('input:not(.input-val)[name^="min_"]'),r=a.find('input:not(.input-val)[name^="max_"]');return e.length&&n.length&&(e.attr("max",n.attr("max")),e.attr("value",n.attr("value")),e.attr("data-base-value",n.attr("data-base-value")),e.val(n.val())),void(i.length&&r.length&&(i.attr("min",r.attr("min")),i.attr("value",r.attr("value")),i.attr("data-base-value",r.attr("data-base-value")),i.val(r.val())))}t.find(".bpfwe-option-disabled").removeClass("bpfwe-option-disabled"),t.find('input[type="checkbox"], input[type="radio"]').each((function(){const t=e(this),i=t.val(),n=t.attr("name");if(void 0===i)return;let r='input[value="'+CSS.escape(i)+'"]';n&&(r='input[name="'+CSS.escape(n)+'"]'+r);const l=a.find(r),o=t.closest("label"),s=o.find(".count");if(!l.length)return void o.addClass("bpfwe-option-disabled");o.removeClass("bpfwe-option-disabled");const d=l.closest("label").find(".count");d.length&&s.length&&s.text(d.text())})),t.find("select").each((function(){const t=e(this),i=t.attr("name");if(!i)return;const n=a.find('select[name="'+CSS.escape(i)+'"]');if(!n.length)return;t.find("option").each((function(){const t=e(this),i=t.val();if(t.prop("disabled")&&0===t.index())return;const a=n.find('option[value="'+CSS.escape(i)+'"]');a.length?t.prop("disabled",!1).removeClass("bpfwe-option-disabled").html(a.html()):t.prop("disabled",!0).addClass("bpfwe-option-disabled")}));let r=t.val()||[];if(Array.isArray(r)||(r=[r]),r=r.filter((function(e){if(!e)return!1;const i=t.find('option[value="'+CSS.escape(e)+'"]');return i.length&&!i.prop("disabled")})),t.val(r.length?r:""),t.hasClass("select2-hidden-accessible")){const e=t.data("select2").options.options;if(t.select2("destroy"),t.select2(e),t.prop("multiple")){const e=t.closest(".bpfwe-multi-select2").find(".select2-selection__rendered");e.find(".select2-selection__e-plus-button").remove(),0===(t.val()||[]).length&&e.prepend('<span class="select2-selection__choice select2-selection__e-plus-button">+</span>')}}}))}}));const o=[];if(r.find(".flex-wrapper").each((function(){const t=e(this);if(t.find(".bpfwe-numeric-wrapper, .bpfwe-visual-range-wrapper").length)return;let i=!1,n=!0;t.find("input, select").each((function(){const t=e(this);t.is('input[type="checkbox"]')&&t.prop("checked")&&(i=!0,n=!1),t.is("select[multiple]")&&(t.val()||[]).length&&(i=!0,n=!1),t.is('input[type="radio"]')&&t.prop("checked")&&(i=!0),t.is("select:not([multiple])")&&t.val()&&(i=!0)})),i&&o.push({wrapper:t,singleOnly:n})})),1===o.length&&o[0].singleOnly){const t=o[0].wrapper;t.find("label").removeClass("bpfwe-option-disabled"),t.find("option.bpfwe-option-disabled").removeClass("bpfwe-option-disabled").prop("disabled",!1),t.find(".count").each((function(){const t=e(this).attr("data-reset");void 0!==t&&e(this).text(t)}))}}(t,F,r);let l=i[p];if("0"!==t&&F){if(["infinite","load_more","load_more_on_click","load_more_infinite_scroll","cwm_infinite"].includes(A))if(u.hasClass("filter-active")){var o=u.find(".elementor-grid").children();u.hide().empty().append(e(a)),u.find(".elementor-grid").prepend(o),u.removeClass("e-load-more-pagination-loading"),u[u.hasClass("elementor-widget-posts")?"fadeIn":"show"](),u.removeClass("load")}else u.html(a).fadeIn().removeClass("load");else u.html(a).fadeIn().removeClass("load");if(u.find(".loader").fadeOut(),u.find(".no-post").length||u.find(".e-loop-nothing-found-message").length){if(T&&T.trim()){const e=T.replace(/</g,"&lt;").replace(/>/g,"&gt;");u.html(`<div class="no-post e-loop-nothing-found-message">${e}</div>`)}}else{u.find('.elementor-pagination, .pagination, nav[aria-label="Pagination"], nav[aria-label="Product Pagination"]').addClass("pagination-filter");u.find(".e-load-more-anchor");var s=u.find(".load-more"),d=u.find(".e-load-more-anchor").nextAll().find("a.elementor-button");s.addClass("load-more-filter"),d.addClass("load-more-filter"),u.addClass("filter-active");c=u.data("settings");"load_more_infinite_scroll"===c?.pagination_type&&(c.pagination_type="cwm_infinite",u.data("settings",c)),"ajax"===c?.pagination_load_type&&(c.pagination_load_type="cwm_ajax",u.data("settings",c)),j(u)}}else{u.html(l).fadeIn().removeClass("load filter-active");var c=u.data("settings");"cwm_infinite"===c?.pagination_type&&(c.pagination_type="load_more_infinite_scroll",u.data("settings",c)),"cwm_ajax"===c?.pagination_load_type&&(c.pagination_load_type="ajax",u.data("settings",c)),j(u),N(G.closest(".elementor-widget-filter-widget").data("id"),"partial")}u.removeClass("filter-initialized")},complete:function(){var e=u.find(".load-more-filter");A=u.data("settings")?.pagination||u.data("settings")?.pagination_type||"";var t=u.find(".e-load-more-anchor");if(t.length){var i=t.data("page");n=t.data("max-page")-1}else{i=u.find(".pagination").data("page");var n=u.find(".pagination").data("max-page")-1}"yes"===H&&window.scrollTo({top:u.offset().top-150,behavior:"smooth"}),i>n&&(u.addClass("e-load-more-pagination-end"),e.hide()),l=!1,u.hasClass("filter-active")&&"infinite"===A&&o((function(){!function(e,t){var i=t.find(".e-load-more-anchor"),n=t.find(".pagination-filter a.next");if(!n.length)return void(v[e]&&(v[e].disconnect(),v[e]=null));n.length&&i.length&&(v[e]||(v[e]=new IntersectionObserver((function(i){i.forEach((function(i){if(i.isIntersecting){var n=t.find(".pagination-filter a.next");if(!l&&n.length&&t.hasClass("filter-active"))l=!0,I(null,d(n.attr("href")),e)}}))}),{root:null,rootMargin:_,threshold:0})),v[e].observe(i.get(0)))}(p,u)}),800)(),u.hasClass("filter-active")&&"cwm_infinite"===A&&o((function(){!function(e,t){var i=t.find(".e-load-more-anchor"),n=t.data("current-page")||1,a=i.data("max-page");if(n>=a)return void(v[e]&&(v[e].disconnect(),v[e]=null));i.length&&n<a&&(v[e]||(v[e]=new IntersectionObserver((function(i){i.forEach((function(i){i.isIntersecting&&!l&&t.hasClass("filter-active")&&(l=!0,n++,t.data("current-page",n),I(null,n,e))}))}),{root:null,rootMargin:_,threshold:0})),v[e].observe(i.get(0)))}(p,u)}),800)(),u.find("input").val(C),ie(u),G.removeClass("load")},error:function(e,t,n){console.log("AJAX error:",n);let a=i[p];u.html(a).fadeIn().removeClass("load filter-active");var r=u.data("settings");"cwm_infinite"===r?.pagination_type&&(r.pagination_type="load_more_infinite_scroll",u.data("settings",r)),"cwm_ajax"===r?.pagination_load_type&&(r.pagination_load_type="ajax",u.data("settings",r)),j(u),ie(u)}})}function S(i,n){if(!e(".selected-terms-"+i+", .selected-count-"+i+", .quick-deselect-"+i+", .bpfwe-selected-terms, .bpfwe-selected-count").length)return;const a=e(`.elementor-widget-filter-widget[data-id="${i}"]`);if(!a.length)return;let r=[],l=[];a.find('input[type="checkbox"]:checked, input[type="radio"]:checked').each((function(){let t=e(this).closest("label").find("span").first().text().trim();t=t.replace(/\s*\(\d+\)\s*$/,"").replace(/\s*\(\–\)\s*$/,""),t&&r.push(t)})),a.find("select option:selected").each((function(){let t=e(this).text().trim();t=t.replace(/\s*\(\d+\)\s*$/,"").replace(/\s*\(\–\)\s*$/,""),t&&e(this).val()&&r.push(t)})),a.find('input[type="checkbox"]:checked, input[type="radio"]:checked, select option:selected').each((function(){const t=e(this),i=t.val();let n=t.is("option")?t.text().trim():t.closest("label").find("span").first().text().trim();n=n.replace(/\s*\(\d+\)\s*$/,"").replace(/\s*\(\–\)\s*$/,""),i&&n&&l.push({value:i,label:n})})),a.find(".bpfwe-numeric-wrapper").each((function(){const t=e(this),i=t.find('input[name^="min_"]'),n=t.find('input[name^="max_"]');if(!i.hasClass("input-val")&&!n.hasClass("input-val")&&i.length&&n.length){const e=i.val(),t=n.val(),a=i.attr("data-base-value"),o=n.attr("data-base-value");if(""===e&&""===t)return;if(e!=a||t!=o){const a=`${e||""} - ${t||""}`;r.push(a),l.push({value:`${e||""}-${t||""}`,label:a,type:"range",minInput:i,maxInput:n})}}}));const o=r.length>0?`${r.length} ${n}`:"";e(".selected-count-"+i+", .bpfwe-selected-count").each((function(){const t=e(this),i=t.find(".elementor-widget-container").first(),n=i.length?i.children().first():t.children().first();n.length&&n.text(o)}));const s=r.length>0?`${n||""} ${r.join(", ")}`.trim():"";e(".selected-terms-"+i+", .bpfwe-selected-terms").each((function(){const t=e(this),i=t.find(".elementor-widget-container").first(),n=i.length?i.children().first():t.children().first();n.length&&n.text(s)}));const d=l.map((e=>"range"===e.type?`<span class="bpfwe-term-pill" data-range="true" data-min="${e.minInput.attr("name")}" data-max="${e.maxInput.attr("name")}" data-widget-id="${i}">\n\t\t\t\t\t\t\t<span class="bpfwe-term-remove" data-widget-id="${i}">×</span> ${e.label}\n\t\t\t\t\t\t\t</span>`:`<span class="bpfwe-term-pill" data-term="${e.value}">\n\t\t\t\t\t\t<span class="bpfwe-term-remove" data-widget-id="${i}">×</span> ${e.label}\n\t\t\t\t\t\t</span>`)).join("");e(".quick-deselect-"+i).each((function(){const t=e(this),i=t.find(".elementor-widget-container").first(),n=i.length?i.children().first():t.children().first();n.length&&n.html(d)})),t.off("click",".bpfwe-term-remove").on("click",".bpfwe-term-remove",(function(){const t=e(this).parent(),i=e(this).data("widget-id"),a=e(i?`.elementor-widget-filter-widget[data-id="${i}"]`:".elementor-widget-filter-widget");if(t.data("range")){const e=t.data("min"),i=t.data("max"),n=a.find(`input[name="${e}"]`),r=a.find(`input[name="${i}"]`);n.length&&r.length&&(n.val(n.attr("data-base-value")).trigger("change"),r.val(r.attr("data-base-value")).trigger("change"))}else if(a.length){let e=a.find(`[value="${t.data("term")}"]`);if(e.is('input[type="checkbox"], input[type="radio"]'))e.prop("checked",!1).trigger("change");else if(e.is("option")){e.prop("selected",!1);const t=e.closest("select");t.prop("multiple")||t.prop("selectedIndex",0),t.trigger("change")}}S(i,n)}))}function N(t,i="partial"){e('.elementor-widget-filter-widget[data-id="'+t+'"]');var n=e('div[data-filters-list*="'+t+'"]');n.data("id")&&n.length&&((n.data("filters-list")?n.data("filters-list").split(","):[]).forEach((function(t){var i=e('.elementor-widget-filter-widget[data-id="'+t+'"]');i.length&&(i.find("input:checked").prop("checked",!1),i.find("select").each((function(){const t=e(this);if(t.find("option").each((function(){e(this).prop("disabled",!1).removeClass("bpfwe-option-disabled")})),t.hasClass("select2-hidden-accessible")){t.prop("multiple")?t.val([]):t.val(null);const e=t.data("select2").options.options;if(t.select2("destroy"),t.select2(e),t.prop("multiple")){const e=t.closest(".bpfwe-multi-select2").find(".select2-selection__rendered");e.find(".select2-selection__e-plus-button").remove();const i=t.val();Array.isArray(i)&&0!==i.length||e.prepend('<span class="select2-selection__choice select2-selection__e-plus-button">+</span>')}return}const i=t.find("option:first");i.length&&t.val(i.val())})),i.find(".bpfwe-numeric-wrapper").each((function(){const t=e(this);t.find("input:not(.input-val)").each((function(){const t=e(this).data("base-value");e(this).val(t)})),t.find("input.input-val").each((function(){e(this).val("")})),t.removeAttr("data-faceted-range")})),i.find("input.input-text").val(""),i.find("label.bpfwe-option-disabled").removeClass("bpfwe-option-disabled"),i.find(".count").each((function(){const t=e(this),i=t.attr("data-reset");void 0!==i&&""!==i&&t.text(i)})),i.find(".bpfwe-numeric-wrapper").each((function(){e(this).removeAttr("data-faceted-range");const t=e(this).find("input:not(.input-val)");if(t.length<2)return;const i=t.eq(0),n=t.eq(1),a=i.data("base-min"),r=n.data("base-max"),l=i.data("base-min")||a,o=n.data("base-max")||r;void 0!==a&&i.val(a).attr("value",a).attr("data-base-value",a),void 0!==r&&n.val(r).attr("value",r).attr("data-base-value",r),void 0!==l&&(i.attr("min",l),n.attr("min",l)),void 0!==o&&(i.attr("max",o),n.attr("max",o))})));var n=e('.elementor-widget-sorting-widget[data-id="'+t+'"]');n.length&&n.find("form.form-order-by select").prop("selectedIndex",0);var a=e('.elementor-widget-search-bar-widget[data-id="'+t+'"]');a.length&&a.find('form.search-post input[name="s"]').val("")})),n.addClass("filter-initialized"),n.data("current-page",1),"full"===i&&I(t),n.removeClass("filter-active"))}a.on("click",".reset-form",(function(){var t=e(this).closest(".elementor-widget-filter-widget").data("id");t&&N(t,"full")})),f.includes("?search=")&&I()}});elementorFrontend.isEditMode()?elementorFrontend.elementsHandler.attachHandler("filter-widget",f):elementorFrontend.elementsHandler.attachHandler(a,f)}))}(jQuery);