!function(e){"use strict";e(window).on("elementor/frontend/init",(function(){let t="";t=e(".elementor-widget-filter-widget").length?"filter-widget":e(".elementor-widget-search-bar-widget").length?"search-bar-widget":"sorting-widget";const a=elementorModules.frontend.handlers.Base.extend({bindEvents(){this.getAjaxFilter()},getAjaxFilter(){let t=!1;const a=this.$element.find(".filter-container");a.find(".bpfwe-select2 select").each((function(t){const a=e(this),i=a.closest(".bpfwe-select2"),n="bpfwe-select2-"+t;a.attr("id",n).prop("multiple",!1).select2({dropdownParent:i}),i.css({visibility:"visible",opacity:"1",transition:"opacity 0.3s ease-in-out"})})),a.find(".bpfwe-multi-select2 select").each((function(t){const a=e(this),i=a.closest(".bpfwe-multi-select2"),n="bpfwe-multi-select2-"+t;function o(){var e=i.find(".select2-selection__rendered");e.find(".select2-selection__e-plus-button").remove(),0===a.val().length&&e.prepend('<span class="select2-selection__choice select2-selection__e-plus-button">+</span>')}a.attr("id",n).prop("multiple",!0).select2({dropdownParent:i}),a.val(null).trigger("change"),i.css({visibility:"visible",opacity:"1",transition:"opacity 0.3s ease-in-out"}),o(),a.on("change",o)})),a.on("click","li.more",(function(){var t=e(this).closest("ul.taxonomy-filter");t.hasClass("show-toggle")?t.removeClass("show-toggle"):t.addClass("show-toggle")})),e(document).on("click",".low-group-trigger",(function(){var t=e(this);t.closest("li").next(".low-terms-group").toggle(),t.text("+"===t.text()?"-":"+")})),e("form.form-tax input").on("keydown",(function(e){13===e.which&&e.preventDefault()}));const i=window.location.href;let n=window.elementorFrontendConfig.post.id;const o=this.$element.data("settings");if(!o)return;let r=o?.target_selector??"";if(!r||!e(r).length){let t=e(".elementor-widget-loop-carousel, .elementor-widget-loop-grid, .elementor-widget-post-widget, .elementor-widget-posts").first();if(t.length){let e=t.attr("class")?.split(" ").find((e=>e.startsWith("elementor-widget-")))||"";r=t.attr("id")?`#${t.attr("id")}`:e?`.${e}`:""}}if(!r||"."===r)return;let l=o?.group_logic??"",s=o?.dynamic_filtering??"",d=o?.scroll_to_top??"",c=o?.nothing_found_message??"It seems we can’t find what you’re looking for.",f=1,g="",p=e(r),m=p.data("id"),h=p.html(),u=a.find("form").serialize(),v=p.find(".loader");p.find(".pagination").data("max-page");var _=_||{};const w=p.data("settings");if(w&&(w.pagination||w.pagination_type)){g=w.pagination||w.pagination_type;var y=(w.scroll_threshold&&w.scroll_threshold.size?w.scroll_threshold.size:0)+(w.scroll_threshold&&w.scroll_threshold.unit?w.scroll_threshold.unit:"px")}else y="0px";if(0===n||void 0===n){if(!m)return;var x=e('[data-id="'+m+'"]').parents("[data-elementor-id]").last();x.length&&(n=x.data("elementor-id"))}function b(e,t){let a;return function(){const i=this,n=arguments;clearTimeout(a),a=setTimeout((()=>{e.apply(i,n)}),t)}}const C=a.find(".submit-form").length>0;let k,z=!1;function j(e){var t;return(t=e.includes("?page=")?e.match(/\?page=(\d+)/):e.includes("?paged=")?e.match(/\?paged=(\d+)/):e.match(/\/(\d+)(\/|$)/)?e.match(/\/(\d+)(\/|$)/):e.match(/[?&](\w+)=\d+/))||(t=e.match(/(\d+)(\/|$)/)),t?t[1]:null}function I(){let e=window.location.origin+window.location.pathname;history.replaceState(null,"",e)}function F(){let t=p.find(".post-container").data("total-post");void 0===t&&(t=0),t=Number(t),e(".filter-post-count .number").text(t)}function A(a,f,p,w,x){var C=a.find(".post-container"),k="",z="",j="";if(!(w=w||o)||!w.target_selector||!e(w.target_selector).length)return;const I=w.target_selector;e(".elementor-widget-sorting-widget").each((function(){if((e(this).data("settings")||{}).target_selector===I)return e(this).find(".form-order-by select option:selected").each((function(){var t=e(this);k=t.data("order"),j=t.data("meta"),z=t.val()})),!1}));var A="";e(".elementor-widget-search-bar-widget").each((function(){if((e(this).data("settings")||{}).target_selector===I){const t=e(this).find("form.search-post input").val();return t&&(A=t),!1}}));var T=new URLSearchParams(window.location.search);T.has("search")&&(A=T.get("search"));let $=w.filter_post_type||w.post_type||"post";f.length&&o&&o.target_selector===I&&o.filter_post_type&&($=o.filter_post_type),a.removeClass("e-load-more-pagination-end"),C.addClass("load"),a.addClass("load"),(C.hasClass("shortcode")||C.hasClass("template"))&&v.fadeIn();var H=[],O=[],P=[],M=[];function S(e){return e.reduce((function(e,t){var a=e.reduce((function(e,a,i){return a.taxonomy===t.taxonomy?i:e}),-1);if(a>=0)e[a].terms=e[a].terms.concat(t.terms);else{var i={taxonomy:t.taxonomy,terms:[t.terms],logic:t.logic};e=e.concat([i])}return e}),[])}f.find(".bpfwe-taxonomy-wrapper input:checked, .bpfwe-custom-field-wrapper input:checked").each((function(){var t=e(this);(t.closest(".bpfwe-taxonomy-wrapper").length?H:O).push({taxonomy:t.data("taxonomy"),terms:t.val(),logic:t.closest("div").data("logic")})})),f.find(".bpfwe-custom-field-wrapper input.input-text").each((function(){var t=e(this);t.val()&&P.push({taxonomy:t.data("taxonomy"),terms:t.val(),logic:t.closest("div").data("logic")})})),f.find(".bpfwe-taxonomy-wrapper select option:selected, .bpfwe-custom-field-wrapper select option:selected").each((function(){var t=e(this);t.val()&&(t.closest(".bpfwe-taxonomy-wrapper").length?H:O).push({taxonomy:t.data("taxonomy"),terms:t.val(),logic:t.closest("div").data("logic")})})),f.find(".bpfwe-numeric-wrapper input").each((function(){var t=e(this),a=t.data("base-value");if(""===t.val()||t.val()!=a){""===t.val()&&t.val(a);var i=t.attr("class").split(" ")[0];f.find(".bpfwe-numeric-wrapper").find("input").each((function(){var t=e(this);t.hasClass(i)&&M.push({taxonomy:t.data("taxonomy"),terms:t.val(),logic:t.closest("div").data("logic")})}))}}));var D=S(H),N=S(O),J=S(P),L=S(M);e.ajax({type:"POST",url:ajax_var.url,async:!0,data:{action:"post_filter_results",widget_id:m,page_id:n,group_logic:l,search_query:A,taxonomy_output:D,dynamic_filtering:s,custom_field_output:N,custom_field_like_output:J,numeric_output:L,post_type:$,order:k,order_by:z,order_by_meta:j,paged:x,archive_type:e('[name="archive_type"]').val(),archive_post_type:e('[name="archive_post_type"]').val(),archive_taxonomy:e('[name="archive_taxonomy"]').val(),archive_id:e('[name="archive_id"]').val(),nonce:ajax_var.nonce},success:function(t){var n=JSON.parse(t).html,o=i,r=f.find("form").serialize(),l="";if(e(".elementor-widget-sorting-widget").each((function(){if((e(this).data("settings")||{}).target_selector===a.data("settings")?.target_selector)return l=e(this).find(".form-order-by select option:first").prop("selected"),!1})),"0"===t||r===u&&l&&!A){a.off(),a.html(h).fadeIn().removeClass("load"),a.removeClass("filter-active"),"cwm_infinite"===(p=a.data("settings")).pagination_type&&(p.pagination_type="load_more_infinite_scroll",a.data("settings",p)),"cwm_ajax"===p.pagination_load_type&&(p.pagination_load_type="ajax",a.data("settings",p)),F()}else{if("infinite"==g||"load_more"==g||"load_more_on_click"==g||"load_more_infinite_scroll"==g||"cwm_infinite"==g)if(a.hasClass("filter-active")){var s=a.find(".elementor-grid").children();a.hide().empty().append(e(n)),a.find(".elementor-grid").prepend(s),a.removeClass("e-load-more-pagination-loading"),a.hasClass("elementor-widget-posts")?a.fadeIn():a.show(),a.removeClass("load")}else a.html(n).fadeIn().removeClass("load");else a.html(n).fadeIn().removeClass("load");if(v.fadeOut(),e(n).text().trim()){var d=a.find('nav[aria-label="Pagination"]');d.addClass("pagination-filter"),d.find("a.page-numbers").each((function(){var t=e(this).attr("href");"/"===o.charAt(o.length-1)&&(o=o.slice(0,-1));var a=t.replace(/.*wp-admin\/admin-ajax\.php/,o);e(this).attr("href",a)}));var p,m=a.find(".e-load-more-anchor"),_=m.data("next-page"),w=a.find(".load-more"),y=a.find(".e-load-more-anchor").nextAll().find(".elementor-button-link.elementor-button");if(w.addClass("load-more-filter"),y.addClass("load-more-filter"),a.addClass("filter-active"),void 0!==_){"/"===o.charAt(o.length-1)&&(o=o.slice(0,-1));var x=_.replace(/.*wp-admin\/admin-ajax\.php/,o);m.attr("data-next-page",x)}"load_more_infinite_scroll"===(p=a.data("settings")).pagination_type&&(p.pagination_type="cwm_infinite",a.data("settings",p)),"ajax"===p.pagination_load_type&&(p.pagination_load_type="cwm_ajax",a.data("settings",p)),F()}else c=c.replace(/</g,"&lt;").replace(/>/g,"&gt;"),c&&c.trim().length&&a.html('<div class="no-post">'+c+"</div>")}},complete:function(){var i=a.find(".load-more-filter"),n=a.data("settings").pagination||a.data("settings").pagination_type,o=a.find(".e-load-more-anchor");if(o.length){var l=o.data("page");s=o.data("max-page")-1}else{l=a.find(".pagination").data("page");var s=a.find(".pagination").data("max-page")-1}"yes"==d&&window.scrollTo({top:a.offset().top-150,behavior:"smooth"}),l>s&&(a.addClass("e-load-more-pagination-end"),i.hide()),t=!1,a.hasClass("filter-active")&&"infinite"==n&&b((function(i){!function(a,i){var n=i.find(".e-load-more-anchor"),o=e(document).find(r+" .pagination-filter a.next");if(!o.length)return void(_[a]&&(_[a].disconnect(),_[a]=null));o.length&&n.length&&(_[a]||(_[a]=new IntersectionObserver((function(a){a.forEach((function(a){if(a.isIntersecting){var n=e(document).find(r+" .pagination-filter a.next");!t&&n.length&&i.hasClass("filter-active")&&(t=!0,n.click())}}))}),{root:null,rootMargin:y,threshold:0})),_[a].observe(n.get(0)))}(m,a)}),800)(),a.hasClass("filter-active")&&"cwm_infinite"==n&&b((function(e){E(m,a)}),800)(),a.find("input").val(A),elementorFrontend.elementsHandler.runReadyTrigger(e(r)),elementorFrontend.config.experimentalFeatures.e_lazyload&&document.dispatchEvent(new Event("elementor/lazyload/observe")),a.removeClass("filter-initialized")},error:function(e,t,a){console.log("AJAX error: ",a)}})}function E(e,i){var n=i.find(".e-load-more-anchor"),r=n.data("page"),l=n.data("max-page");r!==l?n.length&&r<l&&(_[e]||(_[e]=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting&&!t&&i.hasClass("filter-active")&&(t=!0,r++,A(i,a,0,o,r))}))}),{root:null,rootMargin:y,threshold:0})),_[e].observe(n.get(0))):_[e]&&(_[e].disconnect(),_[e]=null)}a.on("mousedown keydown touchstart","form.form-tax",(function(){z=!0,clearTimeout(k)})),a.on("mouseup keyup touchend","form.form-tax",(function(){k=setTimeout((()=>{z=!1}),700)})),a.on("change keydown input","form.form-tax, .bpfwe-numeric-wrapper input",b((function(t){var i=a.closest(".elementor-widget-filter-widget").data("id"),n=a.closest(".elementor-widget-filter-widget").data("settings");if(!C&&n.target_selector){if(p=e(n.target_selector),"change"===t.type||"keydown"===t.type&&"Enter"===t.key)return I(),p.addClass("filter-initialized"),p.removeClass("filter-active"),void A(p,a,i,n);z||(I(),p.addClass("filter-initialized"),p.removeClass("filter-active"),A(p,a,i,n))}}),700)),a.on("click",".submit-form",(function(){var t=a.closest(".elementor-widget-filter-widget").data("id"),i=a.closest(".elementor-widget-filter-widget").data("settings");if(i.target_selector)return p=e(i.target_selector),I(),p.addClass("filter-initialized"),p.removeClass("filter-active"),A(p,a,t,i),!1})),e(document).on("change","form.form-order-by",(function(){var t=e(this).closest(".elementor-widget-sorting-widget").data("id"),i=e(this).closest(".elementor-widget-sorting-widget").data("settings");i&&i.target_selector&&e(i.target_selector).length&&(p=e(i.target_selector),p.addClass("filter-initialized"),p.removeClass("filter-active"),A(p,a,t,i))})),e(document).off("submit","form.search-post").on("submit","form.search-post",(function(){var t=e(this).closest(".elementor-widget-search-bar-widget").data("id"),i=e(this).closest(".elementor-widget-search-bar-widget").data("settings");if(!i||!i.target_selector||!e(i.target_selector).length)return;p=e(i.target_selector);e(this).attr("action");return I(),p.addClass("filter-initialized"),p.removeClass("filter-active"),A(p,a,t,i),!e(this).hasClass("no-redirect")&&void 0})),i.includes("?search=")&&A(p,a),e(document).on("click",r+" .pagination-filter a",(function(t){t.preventDefault();var i=j(e(this).attr("href"));A(p,a,null,o,i)})),e(document).on("click",r+" .load-more-filter",(function(t){t.preventDefault();var i=p.find(".e-load-more-anchor").data("next-page");if(i){var n=j(i);A(p,a,null,o,n)}else{e(document).find(r+" .pagination-filter a.next").click(),f+=1;var l=p.find(".load-more");l.text("Loading..."),l.prop("disabled",!0)}})),a.on("click",".reset-form",(function(){var t=a.closest(".elementor-widget-filter-widget"),i=t.data("settings"),n=i.target_selector;e(document).find("form.form-order-by").each((function(){(e(this).closest(".elementor-widget-sorting-widget").data("settings")||{}).target_selector===n&&e(this).find("select").prop("selectedIndex",0).trigger("change")})),e(document).find("form.search-post").each((function(){(e(this).closest(".elementor-widget-search-bar-widget").data("settings")||{}).target_selector===n&&e(this).find('input[name="s"]').val("").trigger("input")}));t.data("id");I(),p.addClass("filter-initialized"),p.removeClass("filter-active"),A(p,a,0,i)})),F()}});elementorFrontend.isEditMode()?elementorFrontend.elementsHandler.attachHandler("filter-widget",a):elementorFrontend.elementsHandler.attachHandler(t,a)}))}(jQuery);