!function(e){"use strict";e(window).on("elementor/frontend/init",(function(){var t={},i={};const a={};let n="";n=e(".elementor-widget-filter-widget").length?"filter-widget":e(".elementor-widget-search-bar-widget").length?"search-bar-widget":"sorting-widget",e(".elementor-widget-filter-widget, .elementor-widget-search-bar-widget, .elementor-widget-sorting-widget").each((function(){var n=e(this),o=n.data("id"),r=n.data("settings"),l=r?.target_selector;if(l&&e(l).length){var s=e(l),d=s.data("filters-list")?s.data("filters-list").split(","):[];d.includes(o)||(d.push(o),s.data("filters-list",d.join(",")),s.attr("data-filters-list",d.join(",")));var c=s.data("id");if(t[c]||(t[c]=s.html()),!i[c]){const e=s.data("settings");let t=e?.posts_per_page?parseInt(e.posts_per_page):null;if(!t){let e=s.find(".elementor-posts, .grid, .columns, .elementor-grid").first();e.length&&(t=e.children("article, .post, .item, .entry").length)}if(!t){let e=s.find(".swiper-wrapper").first();e.length&&(t=e.children(".swiper-slide").length)}if(!t){let e=s.find("ul.products").first();e.length&&(t=e.children("li").length)}if(!t){let e=s.find("ul").first();e.length&&(t=e.children("li").length)}if(!t){let e=s.find("div").first();e.length&&(t=e.children("div").length)}i[c]=t>0?t:50}if(n.hasClass("elementor-widget-filter-widget")){a[c]||(a[c]=[]);const e={widgetId:o,optimize_query:"yes"===r?.optimize_query,no_found_rows:"yes"===r?.no_found_rows,suppress_filters:"yes"===r?.suppress_filters,posts_per_page:parseInt(r?.posts_per_page)||-1};a[c].push(e);const t=a[c].reduce(((e,t)=>({optimize_query:e.optimize_query||t.optimize_query,no_found_rows:e.no_found_rows||t.no_found_rows,suppress_filters:e.suppress_filters||t.suppress_filters,posts_per_page:Math.min(-1===e.posts_per_page?1/0:e.posts_per_page,-1===t.posts_per_page?1/0:t.posts_per_page)})),{optimize_query:!1,no_found_rows:!1,suppress_filters:!1,posts_per_page:-1});t.posts_per_page=t.posts_per_page===1/0?-1:t.posts_per_page,s.data("performance-settings",t),s.attr("data-performance-settings",JSON.stringify(t))}}}));const o=elementorModules.frontend.handlers.Base.extend({bindEvents(){this.getAjaxFilter()},getAjaxFilter(){let a=!1;const n=this.$element.find(".filter-container");n.find(".bpfwe-select2 select").each((function(t){const i=e(this),a=i.closest(".bpfwe-select2"),n="bpfwe-select2-"+t;i.attr("id",n).prop("multiple",!1).select2({dropdownParent:a}),a.css({visibility:"visible",opacity:"1",transition:"opacity 0.3s ease-in-out"})})),n.find(".bpfwe-multi-select2 select").each((function(t){const i=e(this),a=i.closest(".bpfwe-multi-select2"),n="bpfwe-multi-select2-"+t;function o(){var e=a.find(".select2-selection__rendered");e.find(".select2-selection__e-plus-button").remove(),0===i.val().length&&e.prepend('<span class="select2-selection__choice select2-selection__e-plus-button">+</span>')}i.attr("id",n).prop("multiple",!0).select2({dropdownParent:a}),i.val(null).trigger("change"),a.css({visibility:"visible",opacity:"1",transition:"opacity 0.3s ease-in-out"}),o(),i.on("change",o)})),n.on("click","li.more",(function(){e(this).closest("ul.taxonomy-filter").toggleClass("show-toggle")})),n.on("click",".low-group-trigger",(function(){var t=e(this),i=t.closest("li"),a=i.hasClass("child-term")?i.children(".low-terms-group"):i.next(".low-terms-group");a.toggle();var n=a.is(":visible");t.text(n?"-":"+"),t.attr("aria-expanded",n)})),e(document).off("mousedown",'input[type="radio"]').on("mousedown",'input[type="radio"]',(function(t){let i=e(this);i.is(":checked")?i.data("wasChecked",!0):i.data("wasChecked",!1)})),e(document).off("click",'input[type="radio"]').on("click",'input[type="radio"]',(function(t){let i=e(this);i.data("wasChecked")&&i.prop("checked",!1).trigger("change"),i.removeData("wasChecked")})),e(document).off("keydown","form.form-tax input").on("keydown","form.form-tax input",(function(e){13===e.which&&e.preventDefault()}));const o=window.location.href,r=this.$element.data("settings");if(!r)return;let l=r?.target_selector??"";if(!l||!e(l).length){let t=e(".elementor-widget-loop-carousel, .elementor-widget-loop-grid, .elementor-widget-post-widget, .elementor-widget-posts").first();if(t.length){let e=t.attr("class")?.split(" ").find((e=>e.startsWith("elementor-widget-")))||"";l=t.attr("id")?`#${t.attr("id")}`:e?`.${e}`:""}}if(!l||"."===l)return;let s=r?.group_logic??"",d=r?.dynamic_filtering??"",c=r?.scroll_to_top??"",p=r?.display_selected_before??"",f=r?.nothing_found_message??"It seems we can’t find what you’re looking for.",g=1,m="",u=e(l),h=u.data("id");u.find(".loader");u.find(".pagination").data("max-page");var _={};const w=u.data("settings");if(w&&(w.pagination||w.pagination_type)){m=w.pagination||w.pagination_type;var v=(w.scroll_threshold?.size||0)+(w.scroll_threshold?.unit||"px")}else v="0px";let y=window.elementorFrontendConfig.post.id;if(!y){if(!h)return;var x=e('[data-id="'+h+'"]').parents("[data-elementor-id]").last();x.length&&(y=x.data("elementor-id"))}function b(e,t){let i;return function(){const a=this,n=arguments;clearTimeout(i),i=setTimeout((()=>e.apply(a,n)),t)}}let k,C=!1;function j(e){var t;return(t=e.includes("?page=")?e.match(/\?page=(\d+)/):e.includes("?paged=")?e.match(/\?paged=(\d+)/):e.match(/\/(\d+)(\/|$)/)?e.match(/\/(\d+)(\/|$)/):e.match(/[?&](\w+)=\d+/))||(t=e.match(/(\d+)(\/|$)/)),t?t[1]:null}function z(){let e=window.location.origin+window.location.pathname;e=e.replace(/\/page\/\d+\/?$/,""),history.replaceState(null,"",e)}function I(t){let i=t.find(".post-container").data("total-post")||0;i=Number(i),e(".filter-post-count .number").text(i)}function E(r,l,g){let m=r?e('div[data-filters-list*="'+r+'"]').data("id"):h;if(!m)return;g&&(m=g);let u=e('div[data-id="'+m+'"]');if(!u.length)return;t[m];let w=i[m],x=u.data("filters-list")?u.data("filters-list").split(","):[],k=u.find(".post-container"),C="",z="",$="",q="",T="",O=u.data("settings")?.pagination||u.data("settings")?.pagination_type||"";"cwm_infinite"!==O&&"infinite"!==O||!_[m]||(_[m].disconnect(),_[m]=null);let P=e('.elementor-widget-sorting-widget[data-id="'+r+'"]').length>0,H=e('.elementor-widget-search-bar-widget[data-id="'+r+'"]').length>0,S=e('.elementor-widget-filter-widget[data-id="'+r+'"]').length>0;(P||H||S)&&(u.removeClass("filter-active"),u.data("current-page",1));let A=!1;e(".elementor-sticky__spacer").empty(),x.forEach((function(t){if(!T){var i=e('.elementor-widget-sorting-widget[data-id="'+t+'"]');i.length&&(T=i.data("settings")?.filter_post_type||"")}if(!T){var a=e('.elementor-widget-search-bar-widget[data-id="'+t+'"]');a.length&&(T=a.data("settings")?.filter_post_type||"")}var n=e('.elementor-widget-filter-widget[data-id="'+t+'"]');n.length&&(T=n.data("settings")?.filter_post_type||"")})),x.forEach((function(t){var i=e('.elementor-widget-search-bar-widget[data-id="'+t+'"]');i.length&&(q=i.find("form.search-post input").val()||"",q&&(A=!0));var a=e('.elementor-widget-sorting-widget[data-id="'+t+'"]');if(a.length){var n=a.find(".form-order-by select"),o=n.find("option:first-child");n.find("option:selected").each((function(){var t=e(this);C=t.data("order"),$=t.data("meta"),z=t.val(),t.val()!==o.val()&&(A=!0)}))}}));var M=new URLSearchParams(window.location.search);M.has("search")&&(q=M.get("search"),q&&(A=!0)),u.removeClass("e-load-more-pagination-end"),k.addClass("load"),u.addClass("load"),u.addClass("filter-initialized"),(k.hasClass("shortcode")||k.hasClass("template"))&&u.find(".loader").fadeIn();var D=[],J=[],N=[],R=[];if(e(".bpfwe-selected-terms").length){let t=[],i=e('.elementor-widget-filter-widget[data-id="'+r+'"]');i.find('input[type="checkbox"]:checked, input[type="radio"]:checked').each((function(){let i=e(this).closest("label").find(".label-text").text().trim();i&&t.push(i)})),i.find("select option:selected").each((function(){let i=e(this).text().trim();i&&e(this).val()&&t.push(i)}));let a=t.length>0?p+t.join(", "):"";console.log(p),e(".bpfwe-selected-terms").each((function(){let t=e(this),i=t.find(".elementor-widget-container").first(),n=i.length?i.children().first():t.children().first();n.length&&n.text(a)}))}if(r){const t=e('.elementor-widget-filter-widget[data-id="'+r+'"]');t.length&&(t.find(".bpfwe-taxonomy-wrapper input:checked, .bpfwe-custom-field-wrapper input:checked").each((function(){let t=e(this);(t.closest(".bpfwe-taxonomy-wrapper").length?D:J).push({taxonomy:t.data("taxonomy"),terms:t.val(),logic:t.closest("div").data("logic")}),A=!0})),t.find(".bpfwe-custom-field-wrapper input.input-text").each((function(){let t=e(this);t.val()&&(N.push({taxonomy:t.data("taxonomy"),terms:t.val(),logic:t.closest("div").data("logic")}),A=!0)})),t.find(".bpfwe-taxonomy-wrapper select option:selected, .bpfwe-custom-field-wrapper select option:selected").each((function(){let t=e(this);if(t.val()){(t.closest(".bpfwe-taxonomy-wrapper").length?D:J).push({taxonomy:t.data("taxonomy"),terms:t.val(),logic:t.closest("div").data("logic")}),A=!0}})),t.find(".bpfwe-numeric-wrapper input").each((function(){let i=e(this),a=i.data("base-value");if(""===i.val()||i.val()!=a){""===i.val()&&i.val(a);let n=i.attr("class").split(" ")[0];t.find(".bpfwe-numeric-wrapper input").each((function(){let t=e(this);t.hasClass(n)&&(R.push({taxonomy:t.data("taxonomy"),terms:t.val(),logic:t.closest("div").data("logic")}),A=!0)}))}})))}function W(e){return e.reduce((function(e,t){var i=e.reduce((function(e,i,a){return i.taxonomy===t.taxonomy?a:e}),-1);return i>=0?e[i].terms=e[i].terms.concat(t.terms):e=e.concat([{taxonomy:t.taxonomy,terms:[t.terms],logic:t.logic}]),e}),[])}var L=W(D),B=W(J),Q=W(N),U=W(R);e.ajax({type:"POST",url:ajax_var.url,async:!0,data:{action:"post_filter_results",widget_id:m,page_id:y,group_logic:s,search_query:q,taxonomy_output:L,dynamic_filtering:d,custom_field_output:B,custom_field_like_output:Q,numeric_output:U,post_type:T,posts_per_page:w,order:C,order_by:z,order_by_meta:$,paged:l,archive_type:e('[name="archive_type"]').val(),archive_post_type:e('[name="archive_post_type"]').val(),archive_taxonomy:e('[name="archive_taxonomy"]').val(),archive_id:e('[name="archive_id"]').val(),nonce:ajax_var.nonce,performance_settings:JSON.stringify(F(m))},success:function(i){var a=JSON.parse(i).html,r=o.replace(/\/page\/\d+\/?($|\?)/,"/$1").replace(/[?&]e-page-[a-z0-9]+=\d+/i,"").replace(/[?&]product-page=\d+/i,"").replace(/[?&]paged=\d+/i,"").replace(/\?&+/,"?").replace(/\?$/,"");n.find("form").serialize();let l=t[m];if("0"!==i&&A){if(["infinite","load_more","load_more_on_click","load_more_infinite_scroll","cwm_infinite"].includes(O))if(u.hasClass("filter-active")){var s=u.find(".elementor-grid").children();u.hide().empty().append(e(a)),u.find(".elementor-grid").prepend(s),u.removeClass("e-load-more-pagination-loading"),u[u.hasClass("elementor-widget-posts")?"fadeIn":"show"](),u.removeClass("load")}else u.html(a).fadeIn().removeClass("load");else u.html(a).fadeIn().removeClass("load");if(u.find(".loader").fadeOut(),e(a).text().trim()){var d=u.find('nav[aria-label="Pagination"], nav[aria-label="Product Pagination"]');d.addClass("pagination-filter"),d.find("a.page-numbers").each((function(){var t=e(this).attr("href");r.endsWith("/")&&(r=r.slice(0,-1)),e(this).attr("href",t.replace(/.*wp-admin\/admin-ajax\.php/,r))}));var c=u.find(".e-load-more-anchor"),p=c.data("next-page"),g=u.find(".load-more"),h=u.find(".e-load-more-anchor").nextAll().find(".elementor-button-link.elementor-button");if(g.addClass("load-more-filter"),h.addClass("load-more-filter"),u.addClass("filter-active"),p){r.endsWith("/")&&(r=r.slice(0,-1)),c.attr("data-next-page",p.replace(/.*wp-admin\/admin-ajax\.php/,r))}_=u.data("settings");"load_more_infinite_scroll"===_?.pagination_type&&(_.pagination_type="cwm_infinite",u.data("settings",_)),"ajax"===_?.pagination_load_type&&(_.pagination_load_type="cwm_ajax",u.data("settings",_)),I(u)}else f=f.replace(/</g,"<").replace(/>/g,">"),f.trim()&&u.html('<div class="no-post">'+f+"</div>")}else{u.html(l).fadeIn().removeClass("load filter-active");var _=u.data("settings");"cwm_infinite"===_?.pagination_type&&(_.pagination_type="load_more_infinite_scroll",u.data("settings",_)),"cwm_ajax"===_?.pagination_load_type&&(_.pagination_load_type="ajax",u.data("settings",_)),I(u)}u.removeClass("filter-initialized")},complete:function(){var e=u.find(".load-more-filter");O=u.data("settings")?.pagination||u.data("settings")?.pagination_type||"";var t=u.find(".e-load-more-anchor");if(t.length){var i=t.data("page");n=t.data("max-page")-1}else{i=u.find(".pagination").data("page");var n=u.find(".pagination").data("max-page")-1}"yes"===c&&window.scrollTo({top:u.offset().top-150,behavior:"smooth"}),i>n&&(u.addClass("e-load-more-pagination-end"),e.hide()),a=!1,u.hasClass("filter-active")&&"infinite"===O&&b((function(){!function(e,t){var i=t.find(".e-load-more-anchor"),n=t.find(".pagination-filter a.next");if(!n.length)return void(_[e]&&(_[e].disconnect(),_[e]=null));n.length&&i.length&&(_[e]||(_[e]=new IntersectionObserver((function(i){i.forEach((function(i){if(i.isIntersecting){var n=t.find(".pagination-filter a.next");if(!a&&n.length&&t.hasClass("filter-active"))a=!0,E(null,j(n.attr("href")),e)}}))}),{root:null,rootMargin:v,threshold:0})),_[e].observe(i.get(0)))}(m,u)}),800)(),u.hasClass("filter-active")&&"cwm_infinite"===O&&b((function(){!function(e,t){var i=t.find(".e-load-more-anchor"),n=t.data("current-page")||1,o=i.data("max-page");if(n>=o)return void(_[e]&&(_[e].disconnect(),_[e]=null));i.length&&n<o&&(_[e]||(_[e]=new IntersectionObserver((function(i){i.forEach((function(i){i.isIntersecting&&!a&&t.hasClass("filter-active")&&(a=!0,n++,t.data("current-page",n),E(null,n,e))}))}),{root:null,rootMargin:v,threshold:0})),_[e].observe(i.get(0)))}(m,u)}),800)(),u.find("input").val(q),elementorFrontend.elementsHandler.runReadyTrigger(u),elementorFrontend.config.experimentalFeatures.e_lazyload&&document.dispatchEvent(new Event("elementor/lazyload/observe"))},error:function(e,i,a){console.log("AJAX error:",a);let n=t[m];u.html(n).fadeIn().removeClass("load filter-active");var o=u.data("settings");"cwm_infinite"===o?.pagination_type&&(o.pagination_type="load_more_infinite_scroll",u.data("settings",o)),"cwm_ajax"===o?.pagination_load_type&&(o.pagination_load_type="ajax",u.data("settings",o)),I(u),elementorFrontend.elementsHandler.runReadyTrigger(u),elementorFrontend.config.experimentalFeatures.e_lazyload&&document.dispatchEvent(new Event("elementor/lazyload/observe"))}})}function F(t){let i=e(`.elementor-element[data-id="${t}"]`).data("performance-settings");return i||(i={optimize_query:!1,no_found_rows:!1,suppress_filters:!1,cache_results:!0,posts_per_page:-1}),i.posts_per_page=parseInt(i.posts_per_page)||-1,i}n.on("mousedown keydown touchstart","form.form-tax",(function(){C=!0,clearTimeout(k)})),n.on("mouseup keyup touchend","form.form-tax",(function(){k=setTimeout((()=>C=!1),700)})),e(document).off("change keydown input","form.form-tax, .bpfwe-numeric-wrapper input").on("change keydown input","form.form-tax, .bpfwe-numeric-wrapper input",b((function(t){var i=e(this).closest(".elementor-widget-filter-widget"),a=i.data("id");if(!a)return;if(!(i.find(".submit-form").length>0)){if("change"===t.type||"keydown"===t.type&&"Enter"===t.key)return z(),void E(a);C||(z(),E(a))}}),700)),e(document).off("click",".submit-form").on("click",".submit-form",(function(){var t=e(this).closest(".elementor-widget-filter-widget").data("id");if(t)return z(),E(t),!1})),e(document).off("change","form.form-order-by").on("change","form.form-order-by",(function(){var t=e(this).closest(".elementor-widget-sorting-widget").data("id");t&&(z(),E(t))})),e(document).off("submit","form.search-post").on("submit","form.search-post",(function(){var t=e(this).closest(".elementor-widget-search-bar-widget").data("id");if(t)return z(),E(t),!e(this).hasClass("no-redirect")&&void 0})),o.includes("?search=")&&E(),e(document).off("click",".pagination-filter a").on("click",".pagination-filter a",(function(t){var i=e(this).closest("[data-id]").data("id");t.preventDefault(),E(null,j(e(this).attr("href")),i)})),e(document).off("click",".load-more-filter").on("click",".load-more-filter",(function(t){t.preventDefault();var i=e(this).closest("[data-id]"),a=i.data("id"),n=i.find(".e-load-more-anchor").data("next-page");if(n){E(null,j(n),a)}else{var o=i.find(".pagination-filter a.next");if(o.length)o.trigger("click"),g++,i.data("current-page",g),i.find(".load-more").text("Loading...").prop("disabled",!0)}})),n.on("click",".reset-form",(function(){var t=e(this).closest(".elementor-widget-filter-widget").data("id"),i=e('div[data-filters-list*="'+t+'"]');i.data("id")&&i.length&&((i.data("filters-list")?i.data("filters-list").split(","):[]).forEach((function(t){var i=e('.elementor-widget-filter-widget[data-id="'+t+'"]');i.length&&(i.find("input:checked").prop("checked",!1),i.find("select").each((function(){e(this).val(e(this).find("option:first").val()).trigger("change")})),i.find(".bpfwe-numeric-wrapper input").each((function(){var t=e(this).data("base-value");e(this).val(t).trigger("input")})),i.find("input.input-text").val("").trigger("input"));var a=e('.elementor-widget-sorting-widget[data-id="'+t+'"]');a.length&&a.find("form.form-order-by select").prop("selectedIndex",0).trigger("change");var n=e('.elementor-widget-search-bar-widget[data-id="'+t+'"]');n.length&&n.find('form.search-post input[name="s"]').val("").trigger("input")})),z(),i.addClass("filter-initialized"),i.removeClass("filter-active"),i.data("current-page",1),E(t))})),I(u)}});elementorFrontend.isEditMode()?elementorFrontend.elementsHandler.attachHandler("filter-widget",o):elementorFrontend.elementsHandler.attachHandler(n,o)}))}(jQuery);