!function(e){"use strict";e(window).on("elementor/frontend/init",(function(){const t=e(document),i={},n={},a={};let r="",o=!1,l=!1;function s(e,t){let i;return function(){const n=this,a=arguments;clearTimeout(i),i=setTimeout((()=>e.apply(n,a)),t)}}function d(e){const t={};return e.forEach((e=>{const{taxonomy:i,terms:n,logic:a}=e;t[i]||(t[i]={taxonomy:i,terms:[],logic:a}),t[i].terms=t[i].terms.concat(n)})),Object.values(t)}function c(e){const t=new URL(e,window.location.origin),i=t.searchParams.get("page_num");if(i&&!isNaN(i))return parseInt(i,10);const n=t.searchParams.get("paged");if(n&&!isNaN(n))return parseInt(n,10);const a=t.searchParams.get("page");if(a&&!isNaN(a))return parseInt(a,10);const r=e.match(/\/page\/(\d+)(\/|$)/);return r&&r[1]?parseInt(r[1],10):1}function f(){e(".elementor-widget-filter-widget, .elementor-widget-search-bar-widget, .elementor-widget-sorting-widget").each((function(){var t=e(this),r=t.data("id"),o=t.data("settings"),l=o?.target_selector;if(l&&e(l).length){var s=e(l),d=s.data("filters-list")?s.data("filters-list").split(","):[];d.includes(r)||(d.push(r),s.data("filters-list",d.join(",")),s.attr("data-filters-list",d.join(",")));var c=s.data("id");if(i[c]||(i[c]=s.html()),n[r]||(n[r]=t.html()),!a[c]){const e=s.data("settings");let t=e?.posts_per_page?parseInt(e.posts_per_page):null;if(!t){let e=s.find(".elementor-posts, .grid, .columns, .elementor-grid").first();e.length&&(t=e.children("article, .post, .item, .entry").length)}if(!t){let e=s.find(".swiper-wrapper").first();e.length&&(t=e.children(".swiper-slide").length)}if(!t){let e=s.find("ul.products").first();e.length&&(t=e.children("li").length)}if(!t){let e=s.find("ul").first();e.length&&(t=e.children("li").length)}if(!t){let e=s.find("div").first();e.length&&(t=e.children("div").length)}a[c]=t>0?t:50}}}))}r=e(".elementor-widget-filter-widget").length?"filter-widget":e(".elementor-widget-search-bar-widget").length?"search-bar-widget":"sorting-widget",f(),function(){const t=new URLSearchParams(window.location.search),i=t.get("results");if(!i)return;const n=e("#"+i);if(!n.length)return;let a=!1,r=!1;if(["min__regular_price","max__regular_price"].forEach((function(e){if(t.has(e)){const i=e.replace("__","_");t.set(i,t.get(e)),t.delete(e),r=!0}})),r){const e=window.location.pathname+"?"+t.toString();window.history.replaceState({},"",e)}function o(){const t=new URLSearchParams;t.set("results",i),n.find(":checkbox:checked, :radio:checked").each((function(){const i=e(this),n=i.attr("name");if(!n)return;const a=i.val(),r=t.get(n);t.set(n,r?r+","+a:a)})),n.find('input[type="text"], input[type="number"]').each((function(){const i=e(this),n=i.attr("name"),a=i.val();if(!n||!a)return;if(n.startsWith("min_")||n.startsWith("max_"))return void t.set(n,a);const r=function(e){const t=(e.closest(".flex-wrapper").attr("class")||"").split(/\s+/);for(let e=0;e<t.length;e++)if(t[e]&&"flex-wrapper"!==t[e])return t[e];return null}(i),o=r?n+"_"+r:n;t.set(o,a)}));const a=window.location.pathname+"?"+t.toString();window.history.replaceState({},"",a)}const l=function(){const t={};return n.find(".flex-wrapper").each((function(){const i=(e(this).attr("class")||"").split(/\s+/);for(let e=0;e<i.length;e++)i[e]&&"flex-wrapper"!==i[e]&&(t[i[e]]=!0)})),Object.keys(t).sort((function(e,t){return t.length-e.length}))}();t.forEach((function(t,i){if("results"===i)return;if(i.startsWith("min_")||i.startsWith("max_")){let e=n.find('[name="'+i+'"]');if(!e.length){const t=i.replace("_","__");e=n.find('[name="'+t+'"]')}return void(e.length&&(e.val(t),a=!0))}let r=!1;for(let o=0;o<l.length;o++){const s=l[o],d="_"+s;if(i.endsWith(d)){const o=i.slice(0,-d.length),l=n.find(".flex-wrapper."+s).find('[name="'+o+'"]');if(l.length){if(l.is('input[type="text"], input[type="number"]')){l.val(t),a=!0,r=!0;break}if(l.is(":checkbox, :radio")){const i=t.split(",");l.each((function(){i.includes(e(this).val())&&(e(this).prop("checked",!0),a=!0)})),r=!0;break}l.val(t),a=!0,r=!0;break}}}if(r)return;const o=n.find('[name="'+i+'"]');if(o.length)if(o.is(":checkbox, :radio")){const i=t.split(",");o.each((function(){i.includes(e(this).val())&&(e(this).prop("checked",!0),a=!0)}))}else o.is('input[type="text"], input[type="number"]')&&(o.val(t),a=!0)})),a&&setTimeout((function(){o(),n.find(':checked, input[type="text"][value!=""], input[type="number"][value!=""]').trigger("change"),n.trigger("change")}),300),n.on("change input",'.bpfwe-filter-item, .input-text, [class^="bpfwe-filter-range-"], input[type="text"], input[type="number"], :checkbox, :radio',(function(){o()})),n.data("bpfweUpdateUrl",o)}(),t.on("click",".filter-title.collapsible",(function(){const t=e(this);let i=t.next(".bpfwe-taxonomy-wrapper, .bpfwe-custom-field-wrapper, .bpfwe-numeric-wrapper");i.length||(i=t.siblings(".bpfwe-taxonomy-wrapper, .bpfwe-custom-field-wrapper, .bpfwe-numeric-wrapper")),i.is(":visible")||i.css("display","flex").hide(),t.toggleClass("collapsed"),i.stop(!0,!0).slideToggle(300,(function(){i.is(":visible")&&i.css("display","flex")}))}));const p=elementorModules.frontend.handlers.Base.extend({bindEvents(){this.getAjaxFilter()},getAjaxFilter(){const r=this.$element.find(".filter-container");r.find(".bpfwe-select2 select").each((function(t){const i=e(this),n=i.closest(".bpfwe-select2"),a="bpfwe-select2-"+Math.floor(1e3*Math.random());i.attr("id",a).prop("multiple",!1).select2({dropdownParent:n}),n.css({visibility:"visible",opacity:"1",transition:"opacity 0.3s ease-in-out"})})),r.find(".bpfwe-multi-select2 select").each(((t,i)=>{const n=e(i),a=n.closest(".bpfwe-multi-select2"),r="bpfwe-multi-select2-"+Math.floor(1e3*Math.random());n.attr("id",r).prop("multiple",!0).select2({dropdownParent:a}),n.val(null).trigger("change.select2"),a.css({visibility:"visible",opacity:"1",transition:"opacity 0.3s ease-in-out"});const o=()=>{const e=a.find(".select2-selection__rendered");e.find(".select2-selection__e-plus-button").remove(),0===n.val().length&&e.prepend('<span class="select2-selection__choice select2-selection__e-plus-button">+</span>')};o(),n.on("change",o)})),r.find(".bpfwe-select-all").on("click",(function(){const t=e(this),i=t.data("taxonomy"),n=!t.hasClass("checked");t.toggleClass("checked",n);r.find("input.bpfwe-filter-item").filter('[data-taxonomy="'+i+'"]').filter((function(){return!e(this).closest("label").hasClass("bpfwe-option-disabled")})).prop("checked",n).trigger("change")})),r.find("input.bpfwe-filter-item").on("change",(function(){const t=e(this).data("taxonomy"),i=r.find("input.bpfwe-filter-item").filter('[data-taxonomy="'+t+'"]').filter((function(){return!e(this).closest("label").hasClass("bpfwe-option-disabled")})),n=r.find('.bpfwe-select-all[data-taxonomy="'+t+'"]'),a=i.length===i.filter(":checked").length;n.toggleClass("checked",a)})),r.on("click","li.more",(function(){e(this).closest("ul.taxonomy-filter").toggleClass("show-toggle")})),r.on("click",".low-group-trigger",(function(){var t=e(this),i=t.closest("li").children(".low-terms-group, .child-terms");i.toggle();var n=i.is(":visible");t.text(n?"-":"+"),t.attr("aria-expanded",n)})),o||(o=!0,t.off("mousedown.bpfwe-filter",'form.form-tax input[type="radio"]').on("mousedown.bpfwe-filter",'form.form-tax input[type="radio"]',(function(t){e(this).data("wasChecked",e(this).prop("checked"))})),t.off("click.bpfwe-filter",'form.form-tax input[type="radio"]').on("click.bpfwe-filter",'form.form-tax input[type="radio"]',(function(t){var i=e(this);i.data("wasChecked")&&i.prop("checked",!1).trigger("change"),i.removeData("wasChecked")})),t.off("mousedown.bpfwe-filter","form.form-tax label.bpfwe-visual-range-option").on("mousedown.bpfwe-filter","form.form-tax label.bpfwe-visual-range-option",(function(t){if(!e(t.target).is('input[type="radio"]')&&!e(t.target).closest('input[type="radio"]').length){var i=e(this),n=i.attr("for"),a=e();if(n){var r=document.getElementById(n);r&&(a=e(r))}else a=i.find('input[type="radio"]').first();a.length&&a.data("wasChecked",a.prop("checked"))}})),t.off("click.bpfwe-filter","form.form-tax label.bpfwe-visual-range-option").on("click.bpfwe-filter","form.form-tax label.bpfwe-visual-range-option",(function(t){if(!e(t.target).is('input[type="radio"]')&&!e(t.target).closest('input[type="radio"]').length){var i=e(this),n=i.attr("for"),a=e();if(n){var r=document.getElementById(n);r&&(a=e(r))}else a=i.find('input[type="radio"]').first();a.length&&(a.data("wasChecked")?(t.preventDefault(),a.prop("checked",!1).trigger("change")):(t.preventDefault(),a.prop("checked")||a.prop("checked",!0).trigger("change")),a.removeData("wasChecked"))}})),t.on("keydown.bpfwe-filter","form.form-tax input",(function(e){13===e.which&&e.preventDefault()})),t.on("submit.bpfwe-filter","form.form-tax",(function(e){e.preventDefault()})),t.off("change.bpfwe-filter keydown.bpfwe-filter input.bpfwe-filter","form.form-tax").on("change.bpfwe-filter keydown.bpfwe-filter input.bpfwe-filter","form.form-tax",s((function(t){if(e(t.target).closest(".bpfwe-numeric-wrapper input.input-val").length)return;var i=e(this).closest(".elementor-widget-filter-widget"),n=i.data("id");if(!n)return;if(!(i.find(".submit-form").length>0)){if("change"===t.type||"keydown"===t.type&&"Enter"===t.key)return void N(n);I||N(n)}}),700)),t.off("change.bpfwe-filter keydown.bpfwe-filter","form.form-tax .bpfwe-numeric-wrapper input.input-val").on("change.bpfwe-filter keydown.bpfwe-filter","form.form-tax .bpfwe-numeric-wrapper input.input-val",s((function(t){if("keydown"===t.type&&"Enter"!==t.key)return;const i=e(this).closest(".bpfwe-numeric-wrapper");if(!i.length)return;const n=i.closest(".elementor-widget-filter-widget"),a=n.data("id");if(!a)return;if(!(n.find(".submit-form").length>0)){const e=i.find('input[name^="min_"]'),t=i.find('input[name^="max_"]');if(!e.length||!t.length)return;const n=e.val(),r=t.val();if(""===n||""===r)return;if(isNaN(n)||isNaN(r))return;if(n>r)return;I||N(a)}}),700)),t.off("click.bpfwe-filter","form.form-tax .submit-form").on("click.bpfwe-filter","form.form-tax .submit-form",(function(){var t=e(this).closest(".elementor-widget-filter-widget").data("id");if(t)return N(t),!1})),t.off("change.bpfwe-filter","form.form-order-by").on("change.bpfwe-filter","form.form-order-by",(function(){var t=e(this).closest(".elementor-widget-sorting-widget").data("id");t&&N(t)})),t.off("submit.bpfwe-filter","form.search-post").on("submit.bpfwe-filter","form.search-post",(function(){var t=e(this).closest(".elementor-widget-search-bar-widget").data("id");if(t)return N(t),!e(this).hasClass("no-redirect")&&void 0})),t.off("click.bpfwe-filter",".pagination-filter a").on("click.bpfwe-filter",".pagination-filter a",(function(t){var i=e(this).closest("[data-id]").data("id");t.preventDefault(),N(null,c(e(this).attr("href")),i)})),t.off("click.bpfwe-filter",".load-more-filter").on("click.bpfwe-filter",".load-more-filter",(function(t){t.preventDefault();var i=e(this).closest("[data-id]"),n=i.data("id"),a=i.find(".e-load-more-anchor").data("next-page");if(a){N(null,c(a),n)}else{var r=i.find(".pagination-filter a.next");if(r.length)r.trigger("click"),h++,i.data("current-page",h),i.find(".load-more").text("Loading...").prop("disabled",!0)}})));const p=window.location.href,u=this.$element.data("settings");if(!u)return;let g=u?.target_selector??"";if(!g||!e(g).length){let t=e(".elementor-widget-loop-carousel, .elementor-widget-loop-grid, .elementor-widget-post-widget, .elementor-widget-posts").first();if(t.length){let e=t.attr("class")?.split(" ").find((e=>e.startsWith("elementor-widget-")))||"";g=t.attr("id")?`#${t.attr("id")}`:e?`.${e}`:""}}if(!g||"."===g)return;let h=1,m="",w=e(g),v=w.data("id");w.find(".pagination").data("max-page");var b={};const _=w.data("settings");if(_&&(_.pagination||_.pagination_type)){m=_.pagination||_.pagination_type;var y=(_.scroll_threshold?.size||0)+(_.scroll_threshold?.unit||"px")}else y="0px";let x=window.elementorFrontendConfig.post.id;if(x){if(!v)return;if(($=e('[data-id="'+v+'"]').parents("[data-elementor-id]").last()).length){var k="elementor_library"===$.data("elementor-post-type"),C=$.data("elementor-type");k&&C&&-1!==C.indexOf("single")&&(x=$.data("elementor-id"))}}else{if(!v)return;var $;($=e('[data-id="'+v+'"]').parents("[data-elementor-id]").last()).length&&(x=$.data("elementor-id"))}let j,I=!1;function S(t){let i=t.find(".post-container").data("total-post")||0;i=Number(i),e(".filter-post-count .number").text(i)}function N(n,r,o){0===t.find('div[data-filters-list*="'+n+'"]').length&&f();let p=n?e('div[data-filters-list*="'+n+'"]').data("id"):v;if(!p)return;o&&(p=o);let u=e('div[data-id="'+p+'"]');if(!u.length)return;i[p];let g=a[p],h=u.data("filters-list")?u.data("filters-list").split(","):[],m=u.find(".post-container"),w="",_="",k="",C="",$="",j="",I=u.data("settings")?.pagination||u.data("settings")?.pagination_type||"";"cwm_infinite"!==I&&"infinite"!==I||!b[p]||(b[p].disconnect(),b[p]=null);let q=e('.elementor-widget-sorting-widget[data-id="'+n+'"]').length>0,O=e('.elementor-widget-search-bar-widget[data-id="'+n+'"]').length>0,A=e('.elementor-widget-filter-widget[data-id="'+n+'"]').length>0;(q||O||A)&&(u.removeClass("filter-active"),u.data("current-page",1));let F=!1,P="",T=!1,D="",M=!1,W="no",z="no",H=!1,U=!1,L="",R=!1,B="AND",J={optimize_query:!1,no_found_rows:!1,suppress_filters:!1,posts_per_page:-1};e(".elementor-sticky__spacer").empty();let Q=A?n:null;if(!Q){let t=e('div[data-id="'+p+'"]'),i=1/0;h.forEach((n=>{let a=e('.elementor-widget-filter-widget[data-id="'+n+'"]');if(a.length){let e=Math.abs(t.offset().top-a.offset().top);e<i&&(i=e,Q=n)}}))}if(!Q){const t=e(".elementor-widget-filter-widget:visible");if(t.length>0){const e=t.last();Q=e.data("id")}}let X=e(A?'.elementor-widget-filter-widget[data-id="'+n+'"]':'.elementor-widget-filter-widget[data-id="'+Q+'"]');if(h.forEach((function(t){if(!$){var i=e('.elementor-widget-sorting-widget[data-id="'+t+'"]');i.length&&($=i.data("settings")?.filter_post_type||"")}if(!$){var n=e('.elementor-widget-search-bar-widget[data-id="'+t+'"]');n.length&&($=n.data("settings")?.filter_post_type||"")}const a=Q||t;var r=e('.elementor-widget-filter-widget[data-id="'+a+'"]');if(r.length){var o=r.data("settings")||{};$=o.filter_post_type||"",P=o.nothing_found_message||"",T=o.is_facetted||!1,D=a,M=o.filter_custom_handler||!1,W=o.scroll_to_top||"no",z=o.display_selected_before||"no",H=o.enable_query_debug||!1,U=o.inject_query_id||!1,L=o.filter_query_id||"",R=o.dynamic_filtering||!1,B=o.group_logic||"AND",J={optimize_query:"yes"===o.optimize_query,no_found_rows:"yes"===o.no_found_rows,suppress_filters:"yes"===o.suppress_filters,posts_per_page:parseInt(o.posts_per_page,10)||-1}}})),"targeted_widget"===$){let e="";const t=u.find('[class*="type-"]').first();if(t.length){const i=t.attr("class").split(/\s+/).find((e=>0===e.indexOf("type-")));i&&(e=i.replace("type-",""))}if(!e){const t=u.data("settings")||{};t.post_type&&Array.isArray(t.post_type)&&t.post_type.length>0&&(e=t.post_type[0])}$=e||"any"}var G=[],K=[],V=[],Y=[],Z=[];h.forEach((function(t){e('.elementor-widget-search-bar-widget[data-id="'+t+'"]').each((function(){var t=e(this).find("form.search-post input").val();if(t&&t.trim().length>0)return C=t.trim(),!1})),""!==C&&(F=!0);var i=e('.elementor-widget-sorting-widget[data-id="'+t+'"]');if(i.length){var n=i.find(".form-order-by select"),a=n.find("option:selected"),r=n.find("option:first-child").val();a.each((function(){var t=e(this);w=t.data("order"),k=t.data("meta"),_=t.val(),t.val()===r&&""===_||(F=!0)}))}var o=e('.elementor-widget-filter-widget[data-id="'+t+'"]');o.length&&(o.find(".bpfwe-taxonomy-wrapper input:checked, .bpfwe-custom-field-wrapper input:checked").each((function(){var t=e(this);(t.closest(".bpfwe-taxonomy-wrapper").length?G:K).push({taxonomy:t.data("taxonomy"),terms:t.val(),logic:t.closest("div").data("logic")}),F=!0})),o.find(".bpfwe-custom-field-relational-wrapper input:checked").each((function(){var t=e(this);V.push({taxonomy:t.data("taxonomy"),terms:t.val(),logic:t.closest("div").data("logic")}),F=!0})),o.find(".bpfwe-custom-field-wrapper input.input-text").each((function(){var t=e(this);t.val()&&(Y.push({taxonomy:t.data("taxonomy"),terms:t.val(),logic:t.closest("div").data("logic")}),F=!0)})),o.find(".bpfwe-taxonomy-wrapper select option:selected, .bpfwe-custom-field-wrapper select option:selected").each((function(){var t=e(this);t.val()&&((t.closest(".bpfwe-taxonomy-wrapper").length?G:K).push({taxonomy:t.data("taxonomy"),terms:t.val(),logic:t.closest("div").data("logic")}),F=!0)})),o.find(".bpfwe-numeric-wrapper input:not(.input-val)").each((function(){var t=e(this),i=t.data("base-value");if(""===t.val()||t.val()!=i){""===t.val()&&t.val(i);var n=t.attr("class").split(" ")[0];o.find(".bpfwe-numeric-wrapper input").each((function(){var t=e(this);t.hasClass(n)&&(Z.push({taxonomy:t.data("taxonomy"),terms:t.val(),logic:t.closest("div").data("logic")}),F=!0)}))}})),o.find(".bpfwe-numeric-wrapper").has("input.input-val").each((function(){const t=e(this),i=t.find("input.input-val").first(),n=t.find("input.input-val").last(),a=(i.val()||"").trim(),r=(n.val()||"").trim();if(""===a||""===r)return;const o=(i.data("base-value")??"").toString().trim(),l=(n.data("base-value")??"").toString().trim();a===o&&r===l||[i,n].forEach((e=>{const i=(e.val()||"").trim();i!==(e.data("base-value")??"").toString().trim()&&""!==i&&(Z.push({taxonomy:e.data("taxonomy"),terms:i,logic:t.data("logic")||e.closest("[data-logic]").data("logic")}),F=!0)}))})),o.find('.bpfwe-visual-range-wrapper input[type="radio"]:checked').each((function(){var t=e(this),i=t.closest(".bpfwe-visual-range-wrapper").data("taxonomy"),n=t.closest(".bpfwe-visual-range-wrapper").data("logic"),a=parseFloat(t.data("min")),r=parseFloat(t.data("max"));isNaN(a)||isNaN(r)||(Z.push({taxonomy:i,terms:a,logic:n}),Z.push({taxonomy:i,terms:r,logic:n}),F=!0)})),j=o.find('.bpfwe-filter-item[data-taxonomy="post_date"]').map((function(){return this.value})).get().join(","))}));var ee=new URLSearchParams(window.location.search);function te(i){const n=e(i);n.length&&(elementorFrontend.elementsHandler.runReadyTrigger(n),n.find("[data-element_type]").each((function(){elementorFrontend.elementsHandler.runReadyTrigger(e(this))})),"function"==typeof elementorFrontend?.utils?.runElementHandlers&&elementorFrontend.utils.runElementHandlers(n[0]),t.trigger("elementor/lazyload/observe"))}ee.has("search")&&(C=ee.get("search"),C&&(F=!0)),u.removeClass("e-load-more-pagination-end"),m.addClass("load"),u.addClass("load filter-initialized"),(m.hasClass("shortcode")||m.hasClass("template"))&&u.find(".loader").fadeIn(),t.on("change",'.flex-wrapper input[type="radio"], .flex-wrapper select:not([multiple])',(function(){e(".flex-wrapper").removeClass("bpfwe-skip-update"),e(this).closest(".flex-wrapper").addClass("bpfwe-skip-update")})),t.on("change",'.flex-wrapper input[type="checkbox"], .flex-wrapper select[multiple]',(function(){e(".flex-wrapper").removeClass("bpfwe-skip-update"),setTimeout((function(){e(".flex-wrapper").removeClass("bpfwe-skip-update")}),800)})),function(i,n){if(!e(".selected-terms-"+i+", .selected-count-"+i+", .quick-deselect-"+i+", .bpfwe-selected-terms, .bpfwe-selected-count").length)return;const a=e(`.elementor-widget-filter-widget[data-id="${i}"]`);if(!a.length)return;let r=[],o=[];a.find('input[type="checkbox"]:checked, input[type="radio"]:checked').each((function(){let t=e(this).closest("label").find("span").first().text().trim();t=t.replace(/\s*\(\d+\)\s*$/,"").replace(/\s*\(\–\)\s*$/,""),t&&r.push(t)})),a.find("select option:selected").each((function(){let t=e(this).text().trim();t=t.replace(/\s*\(\d+\)\s*$/,"").replace(/\s*\(\–\)\s*$/,""),t&&e(this).val()&&r.push(t)})),a.find('input[type="checkbox"]:checked, input[type="radio"]:checked, select option:selected').each((function(){const t=e(this),i=t.val();let n=t.is("option")?t.text().trim():t.closest("label").find("span").first().text().trim();n=n.replace(/\s*\(\d+\)\s*$/,"").replace(/\s*\(\–\)\s*$/,""),i&&n&&o.push({value:i,label:n})})),a.find(".bpfwe-numeric-wrapper").each((function(){const t=e(this),i=t.find('input[name^="min_"]'),n=t.find('input[name^="max_"]');if(i.length&&n.length){const e=i.val(),t=n.val(),a=i.data("base-value"),l=n.data("base-value");if(""===e&&""===t)return;if(e!=a||t!=l){const a=`${e||""} - ${t||""}`;r.push(a),o.push({value:`${e||""}-${t||""}`,label:a,type:"range",minInput:i,maxInput:n})}}}));const l=r.length>0?`${r.length} ${n}`:"";e(".selected-count-"+i+", .bpfwe-selected-count").each((function(){const t=e(this),i=t.find(".elementor-widget-container").first(),n=i.length?i.children().first():t.children().first();n.length&&n.text(l)}));const s=r.length>0?`${n||""} ${r.join(", ")}`.trim():"";e(".selected-terms-"+i+", .bpfwe-selected-terms").each((function(){const t=e(this),i=t.find(".elementor-widget-container").first(),n=i.length?i.children().first():t.children().first();n.length&&n.text(s)}));const d=o.map((e=>"range"===e.type?`<span class="bpfwe-term-pill" data-range="true" data-min="${e.minInput.attr("name")}" data-max="${e.maxInput.attr("name")}" data-widget-id="${i}">\n\t\t\t\t\t\t\t\t\t\t<span class="bpfwe-term-remove" data-widget-id="${i}">×</span> ${e.label}\n\t\t\t\t\t\t\t\t\t</span>`:`<span class="bpfwe-term-pill" data-term="${e.value}">\n\t\t\t\t\t\t\t\t\t<span class="bpfwe-term-remove" data-widget-id="${i}">×</span> ${e.label}\n\t\t\t\t\t\t\t\t</span>`)).join("");e(".quick-deselect-"+i).each((function(){const t=e(this),i=t.find(".elementor-widget-container").first(),n=i.length?i.children().first():t.children().first();n.length&&n.html(d)})),t.off("click",".bpfwe-term-remove").on("click",".bpfwe-term-remove",(function(){const t=e(this).parent(),i=e(this).data("widget-id"),n=e(i?`.elementor-widget-filter-widget[data-id="${i}"]`:".elementor-widget-filter-widget");if(t.data("range")){const e=t.data("min"),i=t.data("max"),a=n.find(`input[name="${e}"]`),r=n.find(`input[name="${i}"]`);a.length&&r.length&&(a.val(a.data("base-value")).trigger("change"),r.val(r.data("base-value")).trigger("change"))}else if(n.length){let e=n.find(`[value="${t.data("term")}"]`);if(e.is('input[type="checkbox"], input[type="radio"]'))e.prop("checked",!1).trigger("change");else if(e.is("option")){e.prop("selected",!1);const t=e.closest("select");t.prop("multiple")||t.prop("selectedIndex",0),t.trigger("change")}}}))}(n,z);var ie=d(G),ne=d(K),ae=d(V),re=d(Y),oe=d(Z);const le=M?ajax_var.bpfwe_url:ajax_var.url;e.ajax({type:"POST",url:le,async:!0,data:{action:"post_filter_results",widget_id:p,filter_widget:T?D:"",page_id:x,group_logic:B,search_query:C,date_query:j,taxonomy_output:ie,dynamic_filtering:R,custom_field_output:ne,custom_field_relational_output:ae,custom_field_like_output:re,numeric_output:oe,post_type:$,posts_per_page:g,order:w,order_by:_,order_by_meta:k,paged:r,archive_type:e('[name="archive_type"]').val(),archive_post_type:e('[name="archive_post_type"]').val(),archive_taxonomy:e('[name="archive_taxonomy"]').val(),archive_id:e('[name="archive_id"]').val(),nonce:ajax_var.nonce,performance_settings:JSON.stringify(J),enable_query_debug:H,inject_id:U,query_id:L},beforeSend:function(){X.addClass("load")},success:function(t){var n=JSON.parse(t),a=n.html,r=n.filters;if(n.query&&ajax_var.isUserLoggedIn){const e='<div class="query-debug-frame" style="background:#f5f5f5; border:1px solid #ccc; padding:10px; margin:15px 0; font-family: monospace; white-space: pre-wrap;">'+n.query+"</div>",t=X.find(".query-debug-frame");t.length&&t.replaceWith(e)}!function(t,i,n){if("0"===t||!i)return;if(!n||!Object.keys(n).length)return;const a=Object.keys(n)[0],r=e('.elementor-widget-filter-widget[data-id="'+a+'"]');if(!r.length)return;const o=e(n[a]);r.find(".flex-wrapper").each((function(){const t=e(this);if(t.find(".bpfwe-visual-range-wrapper").length)return;if(t.hasClass("bpfwe-skip-update"))return;const i=t.attr("class");if(!i)return;const n=".flex-wrapper."+i.trim().replace(/\s+/g,"."),a=o.find(n);a.length&&(t.find(".bpfwe-numeric-wrapper").length?t.replaceWith(a):(t.find(".bpfwe-option-disabled").removeClass("bpfwe-option-disabled"),t.find('input[type="checkbox"], input[type="radio"]').each((function(){const t=e(this),i=t.val(),n=t.attr("name");if(void 0===i)return;let r='input[value="'+CSS.escape(i)+'"]';n&&(r='input[name="'+CSS.escape(n)+'"]'+r);const o=a.find(r),l=t.closest("label"),s=l.find(".count");if(!o.length)return void l.addClass("bpfwe-option-disabled");l.removeClass("bpfwe-option-disabled");const d=o.closest("label").find(".count");d.length&&s.length&&s.text(d.text())})),t.find("select").each((function(){const t=e(this),i=t.attr("name");if(!i)return;const n=a.find('select[name="'+CSS.escape(i)+'"]');if(!n.length)return;t.find("option").each((function(){const t=e(this),i=t.val();if(t.prop("disabled")&&0===t.index())return;const a=n.find('option[value="'+CSS.escape(i)+'"]');a.length?t.prop("disabled",!1).removeClass("bpfwe-option-disabled").html(a.html()):t.prop("disabled",!0).addClass("bpfwe-option-disabled")}));let r=t.val()||[];if(Array.isArray(r)||(r=[r]),r=r.filter((function(e){if(!e)return!1;const i=t.find('option[value="'+CSS.escape(e)+'"]');return i.length&&!i.prop("disabled")})),t.val(r.length?r:""),t.hasClass("select2-hidden-accessible")){const e=t.data("select2").options.options;if(t.select2("destroy"),t.select2(e),t.prop("multiple")){const e=t.closest(".bpfwe-multi-select2").find(".select2-selection__rendered");e.find(".select2-selection__e-plus-button").remove(),0===(t.val()||[]).length&&e.prepend('<span class="select2-selection__choice select2-selection__e-plus-button">+</span>')}}}))))}));const l=[];if(r.find(".flex-wrapper").each((function(){const t=e(this);if(t.find(".bpfwe-numeric-wrapper, .bpfwe-visual-range-wrapper").length)return;let i=!1,n=!0;t.find("input, select").each((function(){const t=e(this);t.is('input[type="checkbox"]')&&t.prop("checked")&&(i=!0,n=!1),t.is("select[multiple]")&&(t.val()||[]).length&&(i=!0,n=!1),t.is('input[type="radio"]')&&t.prop("checked")&&(i=!0),t.is("select:not([multiple])")&&t.val()&&(i=!0)})),i&&l.push({wrapper:t,singleOnly:n})})),1===l.length&&l[0].singleOnly){const t=l[0].wrapper;t.find("label").removeClass("bpfwe-option-disabled"),t.find("option.bpfwe-option-disabled").removeClass("bpfwe-option-disabled").prop("disabled",!1),t.find(".count").each((function(){const t=e(this).attr("data-reset");void 0!==t&&e(this).text(t)}))}}(t,F,r);let o=i[p];if("0"!==t&&F){if(["infinite","load_more","load_more_on_click","load_more_infinite_scroll","cwm_infinite"].includes(I))if(u.hasClass("filter-active")){var l=u.find(".elementor-grid").children();u.hide().empty().append(e(a)),u.find(".elementor-grid").prepend(l),u.removeClass("e-load-more-pagination-loading"),u[u.hasClass("elementor-widget-posts")?"fadeIn":"show"](),u.removeClass("load")}else u.html(a).fadeIn().removeClass("load");else u.html(a).fadeIn().removeClass("load");if(u.find(".loader").fadeOut(),u.find(".no-post").length||u.find(".e-loop-nothing-found-message").length){if(P&&P.trim()){const e=P.replace(/</g,"&lt;").replace(/>/g,"&gt;");u.html(`<div class="no-post e-loop-nothing-found-message">${e}</div>`)}}else{u.find('nav[aria-label="Pagination"], nav[aria-label="Product Pagination"]').addClass("pagination-filter");u.find(".e-load-more-anchor");var s=u.find(".load-more"),d=u.find(".e-load-more-anchor").nextAll().find(".elementor-button-link.elementor-button");s.addClass("load-more-filter"),d.addClass("load-more-filter"),u.addClass("filter-active");c=u.data("settings");"load_more_infinite_scroll"===c?.pagination_type&&(c.pagination_type="cwm_infinite",u.data("settings",c)),"ajax"===c?.pagination_load_type&&(c.pagination_load_type="cwm_ajax",u.data("settings",c)),S(u)}}else{u.html(o).fadeIn().removeClass("load filter-active");var c=u.data("settings");"cwm_infinite"===c?.pagination_type&&(c.pagination_type="load_more_infinite_scroll",u.data("settings",c)),"cwm_ajax"===c?.pagination_load_type&&(c.pagination_load_type="ajax",u.data("settings",c)),S(u),E(X.closest(".elementor-widget-filter-widget").data("id"),"partial")}u.removeClass("filter-initialized")},complete:function(){var e=u.find(".load-more-filter");I=u.data("settings")?.pagination||u.data("settings")?.pagination_type||"";var t=u.find(".e-load-more-anchor");if(t.length){var i=t.data("page");n=t.data("max-page")-1}else{i=u.find(".pagination").data("page");var n=u.find(".pagination").data("max-page")-1}"yes"===W&&window.scrollTo({top:u.offset().top-150,behavior:"smooth"}),i>n&&(u.addClass("e-load-more-pagination-end"),e.hide()),l=!1,u.hasClass("filter-active")&&"infinite"===I&&s((function(){!function(e,t){var i=t.find(".e-load-more-anchor"),n=t.find(".pagination-filter a.next");if(!n.length)return void(b[e]&&(b[e].disconnect(),b[e]=null));n.length&&i.length&&(b[e]||(b[e]=new IntersectionObserver((function(i){i.forEach((function(i){if(i.isIntersecting){var n=t.find(".pagination-filter a.next");if(!l&&n.length&&t.hasClass("filter-active"))l=!0,N(null,c(n.attr("href")),e)}}))}),{root:null,rootMargin:y,threshold:0})),b[e].observe(i.get(0)))}(p,u)}),800)(),u.hasClass("filter-active")&&"cwm_infinite"===I&&s((function(){!function(e,t){var i=t.find(".e-load-more-anchor"),n=t.data("current-page")||1,a=i.data("max-page");if(n>=a)return void(b[e]&&(b[e].disconnect(),b[e]=null));i.length&&n<a&&(b[e]||(b[e]=new IntersectionObserver((function(i){i.forEach((function(i){i.isIntersecting&&!l&&t.hasClass("filter-active")&&(l=!0,n++,t.data("current-page",n),N(null,n,e))}))}),{root:null,rootMargin:y,threshold:0})),b[e].observe(i.get(0)))}(p,u)}),800)(),u.find("input").val(C),te(u),X.removeClass("load")},error:function(e,t,n){console.log("AJAX error:",n);let a=i[p];u.html(a).fadeIn().removeClass("load filter-active");var r=u.data("settings");"cwm_infinite"===r?.pagination_type&&(r.pagination_type="load_more_infinite_scroll",u.data("settings",r)),"cwm_ajax"===r?.pagination_load_type&&(r.pagination_load_type="ajax",u.data("settings",r)),S(u),te(u)}})}function E(t,i="partial"){e('.elementor-widget-filter-widget[data-id="'+t+'"]');var a=e('div[data-filters-list*="'+t+'"]');a.data("id")&&a.length&&((a.data("filters-list")?a.data("filters-list").split(","):[]).forEach((function(t){var i=e('.elementor-widget-filter-widget[data-id="'+t+'"]');if(i.length){i.find("input:checked").prop("checked",!1),i.find("select").each((function(){const t=e(this);if(t.find("option").each((function(){e(this).prop("disabled",!1).removeClass("bpfwe-option-disabled")})),t.hasClass("select2-hidden-accessible")){t.prop("multiple")?t.val([]):t.val(null);const e=t.data("select2").options.options;if(t.select2("destroy"),t.select2(e),t.prop("multiple")){const e=t.closest(".bpfwe-multi-select2").find(".select2-selection__rendered");e.find(".select2-selection__e-plus-button").remove();const i=t.val();Array.isArray(i)&&0!==i.length||e.prepend('<span class="select2-selection__choice select2-selection__e-plus-button">+</span>')}return}const i=t.find("option:first");i.length&&t.val(i.val())})),i.find(".bpfwe-numeric-wrapper input:not(.input-value)").each((function(){var t=e(this).data("base-value");e(this).val(t)})),i.find("input.input-text").val(""),i.find("label.bpfwe-option-disabled").removeClass("bpfwe-option-disabled"),i.find(".count").each((function(){const t=e(this),i=t.attr("data-reset");void 0!==i&&""!==i&&t.text(i)}));const a=n[t]?e(n[t]):null;a&&i.find(".bpfwe-numeric-wrapper").each((function(){const t=e(this).closest(".flex-wrapper");if(!t.length)return;const i=".flex-wrapper."+(t.attr("class")||"").trim().replace(/\s+/g,"."),n=a.find(i);n.length&&t.replaceWith(n)}))}var a=e('.elementor-widget-sorting-widget[data-id="'+t+'"]');a.length&&a.find("form.form-order-by select").prop("selectedIndex",0);var r=e('.elementor-widget-search-bar-widget[data-id="'+t+'"]');r.length&&r.find('form.search-post input[name="s"]').val("")})),a.addClass("filter-initialized"),a.data("current-page",1),"full"===i&&N(t),a.removeClass("filter-active"))}r.on("mousedown keydown touchstart","form.form-tax",(function(){I=!0,clearTimeout(j)})),r.on("mouseup keyup touchend","form.form-tax",(function(){j=setTimeout((()=>I=!1),700)})),r.on("click",".reset-form",(function(){var t=e(this).closest(".elementor-widget-filter-widget").data("id");t&&E(t,"full")})),p.includes("?search=")&&N()}});elementorFrontend.isEditMode()?elementorFrontend.elementsHandler.attachHandler("filter-widget",p):elementorFrontend.elementsHandler.attachHandler(r,p)}))}(jQuery);