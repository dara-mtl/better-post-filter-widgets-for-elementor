!function(e){"use strict";e(window).on("elementor/frontend/init",(function(){const t=elementorModules.frontend.handlers.Base.extend({bindEvents:function(){this.fetchMasonry(),this.changePostStatus(),this.getPinnedPosts(),this.getPostsByAjax(),this.postCarousel()},debounce:function(e,t){let s;return function(){const n=this,i=arguments;clearTimeout(s),s=setTimeout((()=>{e.apply(n,i)}),t)}},fetchMasonry:function(){var t=this.getElementSettings(),s=this.$element.find(".bpfwe-masonry");if(0===s.length)return;var n=s.find(".post-wrapper");if(0===n.length)return;const i=elementorFrontend.config.responsive.breakpoints,o=()=>{const o=(()=>{const e=window.innerWidth;let s="";return e<=i.widescreen.value&&void 0!==t.nb_columns_widescreen&&(s=t.nb_columns_widescreen||4),e<=i.laptop.value&&void 0!==t.nb_columns&&(s=t.nb_columns||3),e<=i.tablet_extra.value&&void 0!==t.nb_columns_tablet_extra&&(s=t.nb_columns_tablet_extra||3),e<=i.tablet.value&&void 0!==t.nb_columns_tablet&&(s=t.nb_columns_tablet||2),e<=i.mobile_extra.value&&void 0!==t.nb_columns_mobile_extra&&(s=t.nb_columns_mobile_extra||2),e<=i.mobile.value&&void 0!==t.nb_columns_mobile&&(s=t.nb_columns_mobile||1),void 0!==s&&""!==s||(s=t.nb_columns||3),s})();s.removeClass().addClass("elementor-grid bpfwe-masonry masonry-layout columns-"+o),s.children(".masonry-column").remove();for(let t=1;t<=o;t++){const n=e("<div></div>").addClass("masonry-column masonry-column-"+t);s.append(n)}let a=1;s.find(".post-wrapper").remove(),n.each(((t,n)=>{const i=s.find(".masonry-column-"+a);e(n).css({opacity:"0",transform:"translateY(20px)"}),i.append(e(n)),a=a<o?a+1:1,setTimeout((()=>{e(n).css({opacity:"1",transform:"translateY(0)",transition:"opacity 0.5s ease, transform 0.5s ease"})}),100*t)}))};o(),e(window).on("resize",this.debounce(o,300))},changePostStatus:function(){e(document).off("click",".unpublish-button").on("click",".unpublish-button",(function(t){var s=e(this).attr("data-postid"),n=e(this),i=n.find(".status-label"),o=i.text(),a=n.attr("data-opposite-label"),r=document.createElement("span");return r.classList.add("status-indicator"),r.style.width="16px",r.style.height="16px",r.style.border="3px solid #f3f3f3",r.style.borderTop="3px solid #3498db",r.style.borderRadius="50%",r.style.animation="spin 1s linear infinite",r.style.display="inline-block",r.style.marginLeft="5px",i.after(r),e.ajax({type:"POST",url:ajax_var.url,async:!0,data:{action:"change_post_status",post_id:s,nonce:ajax_var.nonce},success:function(e){setTimeout((function(){r.remove(),i.text(a).show(),n.attr("data-opposite-label",o)}),2e3)},error:function(e,t,s){console.log("AJAX request failed: "+t+", "+s)}}),!1}))},getPinnedPosts:function(){e(document).off("click",".post-pin").on("click",".post-pin",(function(t){t.preventDefault();var s=e(this),n=s.data("postid"),i=s.attr("class"),o=e(".pinned_post_query");e.ajax({type:"POST",url:ajax_var.url,data:{action:"pin_post",post_id:n,pin_class:i,nonce:ajax_var.nonce},success:function(){(s.toggleClass("unpin"),0!==o.length)&&(e('.post-pin[data-postid="'+n+'"]').not(s).removeClass("unpin"),o.animate({opacity:.65},"normal",(function(){o.load(location.href+" .pinned_post_query:first > *",(function(){o.animate({opacity:1},"normal")}))})))}})}))},getPostsByAjax:function(){if(document.getElementById("elementor-preview-iframe"))return;var t=this,s=!1,n=this.$element,i=n.find(".post-container"),o=n.find(".loader"),a=n.data("id"),r=".elementor-element-"+a+" .post-container-inner",l=i.find(".pagination"),d=l.data("page"),p=l.data("max-page")-1,c=c||{};let _=window.elementorFrontendConfig.post.id;const u=window.location.href;if(!_){if(!a)return;var f=e('[data-id="'+a+'"]').parents("[data-elementor-id]").last();f.length&&(_=f.data("elementor-id"))}if(0===i.length)return;var m=this.getElementSettings();if(m)var h=m.pagination||m.pagination_type,w=m.scroll_to_top,v=m.pagination_mode||"native",g=(m.scroll_threshold&&m.scroll_threshold.size?m.scroll_threshold.size:0)+(m.scroll_threshold&&m.scroll_threshold.unit?m.scroll_threshold.unit:"px");else g="0px";function b(){let t=n.find(".post-container").data("total-post");void 0===t&&(t=0),t=Number(t),e(".filter-post-count .number").text(t)}function y(t,s,o){const l="infinite"===h||"load_more"===h,d=n.find(".load-more"),p=function(e){const t=new URL(e,window.location.origin),s=t.searchParams.get("page_num");if(s&&!isNaN(s))return parseInt(s,10);const n=t.searchParams.get("paged");if(n&&!isNaN(n))return parseInt(n,10);const i=t.searchParams.get("page");if(i&&!isNaN(i))return parseInt(i,10);const o=e.match(/\/page\/(\d+)(\/|$)/);return o&&o[1]?parseInt(o[1],10):1}(t),c=new URLSearchParams(window.location.search).get("s");l&&d.prop("disabled",!0);const f={type:"POST",url:ajax_var.url,async:!0,data:{action:"bpfwe_handle_pagination_ajax",nonce:ajax_var.nonce,widget_id:a,page_id:_,base:u,paged:p,post_type:s,query_type:o,s:c,archive_type:e('[name="archive_type"]').val()||"",archive_post_type:e('[name="archive_post_type"]').val()||"",archive_taxonomy:e('[name="archive_taxonomy"]').val()||"",archive_id:e('[name="archive_id"]').val()||""},error:function(e,t,s){console.log("AJAX request failed: "+t+", "+s)}};l?(f.success=function(t){var s=JSON.parse(t),n=e(s.html).find(".post-container-inner");const o=i.find(".elementor-grid").children().clone();i.empty().append(e(n)),i.find(".elementor-grid").prepend(o),i.hide().show().removeClass("load"),$(),x(r)},f.complete=function(){d.prop("disabled",!1)}):f.success=function(t){var s=JSON.parse(t),n=e(s.html).find(".post-container-inner");i.empty().append(e(n)).removeClass("load"),$(),x(r)},e.ajax(f)}function x(t){const s=e(t);s.length&&(elementorFrontend.elementsHandler.runReadyTrigger(s),s.find("[data-element_type]").each((function(){elementorFrontend.elementsHandler.runReadyTrigger(e(this))})),"function"==typeof elementorFrontend?.utils?.runElementHandlers&&elementorFrontend.utils.runElementHandlers(s[0]),C(),e(document).trigger("elementor/lazyload/observe"))}function C(){0!==e(".elementor-widget-post-widget .e-off-canvas").length&&e(".elementor-widget-post-widget").each((function(){const t=e(this),s=t.data("id");t.find('[data-elementor-type="loop-item"]').each((function(){const t=e(this),n=(t.attr("class")||"").match(/e-loop-item-(\d+)/);if(!n)return;const i=n[1],o=t.find(".e-off-canvas");if(!o.length)return;const a=o.attr("id");if(!a||!a.startsWith("off-canvas-"))return;const r=a.replace(/^off-canvas-/,""),l=`off-canvas-${s}-${i}-${r}`;o.attr("id",l),t.find('a[href*="elementor-action"]').each((function(){const t=e(this),n=t.attr("href");if(!n)return;const o=decodeURIComponent(n),a=o.match(/settings=([^&]+)/);if(!a)return;const d=JSON.parse(atob(a[1]));if(!d||"object"!=typeof d||!d.id)return;d.id=`${s}-${i}-${r}`;const p=btoa(JSON.stringify(d)),c=o.replace(/settings=[^&]+/,"settings="+encodeURIComponent(p));t.attr("href",c),t.attr("aria-controls",l)}))}))}))}function $(){var e=n.find(".load-more");o.hide(),(d+=1)>p&&e.hide(),"yes"==w&&window.scrollTo({top:i.offset().top-150,behavior:"smooth"}),b(),s=!1,t.fetchMasonry(),t.postCarousel()}if(b(),C(),n.on("click",".pagination a",(function(t){if(e(this).closest(".pagination-filter").length)return;t.preventDefault(),i.addClass("load"),(i.hasClass("shortcode")||i.hasClass("template"))&&o.show();let s=e(this).closest(".pagination").data("post-type")||"post",a=e(this).closest(".pagination").data("query")||"custom";"remote"===v?function(t){if("infinite"==h||"load_more"==h){var s=n.find(".load-more");s.prop("disabled",!0),e.ajax({type:"POST",url:ajax_var.url,async:!0,dataType:"json",data:{action:"load_page",page_url:t,nonce:ajax_var.nonce},success:function(t){var s=t.data.html,n=i.find(".elementor-grid").children().clone();i.empty().append(e(s).find(r)),i.find(".elementor-grid").prepend(n),i.hide().show().removeClass("load"),$(),x(r)},error:function(e,t,s){console.log("AJAX request failed: "+t+", "+s)},complete:function(){s.prop("disabled",!1)}})}else e.ajax({type:"POST",url:ajax_var.url,async:!0,dataType:"json",data:{action:"load_page",page_url:t,nonce:ajax_var.nonce},success:function(t){var s=t.data.html;i.empty().append(e(s).find(r)),i.hide().show().removeClass("load"),$(),x(r)},error:function(e,t,s){console.log("AJAX request failed: "+t+", "+s)}})}(e(this).attr("href")):y(e(this).attr("href"),s,a)})),n.off("click",".load-more").on("click",".load-more",(function(t){e(this).hasClass("load-more-filter")||(t.preventDefault(),s=!0,n.find(".pagination a.next").click())})),"infinite"===h){if(l.hasClass("pagination-filter"))return void(c[a]&&(c[a].unobserve(P.get(0)),c[a]=null));var P=n.find(".e-load-more-anchor");P.length&&(c[a]||(c[a]=new IntersectionObserver((function(e){if(e.forEach((function(e){if(e.isIntersecting){var t=n.find(".pagination a.next");!s&&t.length&&(s=!0,t.click())}})),!n.find(".pagination a.next").length)return c[a].unobserve(P.get(0)),void(c[a]=null)}),{root:null,rootMargin:g,threshold:0})),c[a].observe(P.get(0)))}const F=[38,38,40,40,37,39,37,39,66,65];let k=0;const S="Follow the white rabbit.";e(document).off("keydown").on("keydown",(function(e){e.keyCode===F[k]?(k++,k===F.length&&(!function(){const e=document.createElement("div");e.textContent=S,e.style.position="fixed",e.style.bottom="10px",e.style.right="10px",e.style.backgroundColor="#333",e.style.color="#fff",e.style.padding="10px",e.style.zIndex="1000",document.body.appendChild(e),setTimeout((()=>{e.remove()}),5e3)}(),k=0)):k=0}))},postCarousel:function(){var t=this.getElementSettings(),s=this.$element.data("id"),n=this.$element.find(".bpfwe-swiper");if(0===n.length)return;let i;i?(i.destroy(!0,!0),i=null):n.css({display:"grid",opacity:"1","-webkit-transform":"translateY(0px)","-ms-transform":"translateY(0px)",transform:"translateY(0px)"});let o=t.carousel_breakpoints?parseInt(t.carousel_breakpoints):0;const a=()=>{n.removeClass("elementor-grid").addClass(`swiper swiper-container bpfwe-swiper-${s}`),n.children(".post-wrapper").addClass("swiper-slide").wrapAll('<div class="swiper-wrapper"></div>');const o=e(`<div class="swiper-button-next bpfwe-slider-arrow-${s}"></div>`),a=e(`<div class="swiper-button-prev bpfwe-slider-arrow-${s}"></div>`),r=e(`<div class="swiper-pagination swiper-pagination-${s}"></div>`),l=e(`<div style="display:none;" class="swiper-button-next bpfwe-slider-arrow-${s}"></div>`),d=e(`<div style="display:none;" class="swiper-button-prev bpfwe-slider-arrow-${s}"></div>`),p=e(`<div style="display:none;" class="swiper-pagination swiper-pagination-${s}"></div>`);t.post_slider_arrows?n.append(o).append(a):n.append(l).append(d),t.post_slider_pagination?n.parent().append(r):n.parent().append(p);const c=t.post_slider_autoplay||!1;t.autoplay=!!c&&{delay:t.post_slider_autoplay_delay};const _={},u=elementorFrontend.config.responsive.breakpoints;_[u.mobile.value]={slidesPerView:parseFloat(t.post_slider_slides_per_view_mobile)||1,slidesPerGroup:parseInt(t.post_slider_slides_to_scroll_mobile)||1,spaceBetween:parseFloat(t.post_slider_gap_mobile)||20},void 0!==t.post_slider_slides_per_view_mobile_extra&&(_[u.mobile_extra.value]={slidesPerView:parseFloat(t.post_slider_slides_per_view_mobile_extra)||2,slidesPerGroup:parseInt(t.post_slider_slides_to_scroll_mobile_extra)||1,spaceBetween:parseFloat(t.post_slider_gap_mobile_extra)||20}),_[u.tablet.value]={slidesPerView:parseFloat(t.post_slider_slides_per_view_tablet)||3,slidesPerGroup:parseInt(t.post_slider_slides_to_scroll_tablet)||1,spaceBetween:parseFloat(t.post_slider_gap_tablet)||20},void 0!==t.post_slider_slides_per_view_tablet_extra&&(_[u.tablet_extra.value]={slidesPerView:parseFloat(t.post_slider_slides_per_view_tablet_extra)||3,slidesPerGroup:parseInt(t.post_slider_slides_to_scroll_tablet_extra)||1,spaceBetween:parseFloat(t.post_slider_gap_tablet_extra)||20}),void 0!==t.post_slider_slides_per_view_laptop&&(_[u.laptop.value]={slidesPerView:parseFloat(t.post_slider_slides_per_view_laptop)||3,slidesPerGroup:parseInt(t.post_slider_slides_to_scroll_laptop)||1,spaceBetween:parseFloat(t.post_slider_gap_laptop)||20}),void 0!==t.post_slider_slides_per_view_widescreen&&(_[u.widescreen.value]={slidesPerView:parseFloat(t.post_slider_slides_per_view_widescreen)||5,slidesPerGroup:parseInt(t.post_slider_slides_to_scroll_widescreen)||1,spaceBetween:parseFloat(t.post_slider_gap_widescreen)||20}),"fade"===t.post_slider_transition_effect?t.breakpoints={}:t.breakpoints=_;const f={slideVisibleClass:"swiper-slide-visible",watchSlidesProgress:!0,allowTouchMove:"yes"===t.post_slider_allow_touch_move,autoHeight:"yes"===t.post_slider_auto_h,effect:t.post_slider_transition_effect,direction:t.post_slider_layout,loop:"yes"===t.post_slider_loop,centerInsufficientSlides:!1,parallax:"yes"===t.post_slider_parallax,speed:t.post_slider_speed,handleElementorBreakpoints:!0,slidesPerView:parseFloat(t.post_slider_slides_per_view),slidesPerGroup:parseInt(t.post_slider_slides_to_scroll),spaceBetween:parseFloat(t.post_slider_gap),breakpoints:t.breakpoints,centeredSlides:"yes"===t.post_slider_centered_slides,slideToClickedSlide:"yes"===t.slide_to_clicked_slide,centeredSlidesBounds:"yes"===t.post_slider_slides_round_lenghts,navigation:{nextEl:`.swiper-button-next.bpfwe-slider-arrow-${s}`,prevEl:`.swiper-button-prev.bpfwe-slider-arrow-${s}`},pagination:{el:`.swiper-pagination-${s}`,type:t.post_slider_pagination_type,clickable:!0},autoplay:t.autoplay,mousewheel:"yes"===t.post_slider_allow_mousewheel,watchOverflow:!0};if("vertical"===t.post_slider_layout){const n=e(`.bpfwe-swiper-${s}`),i=parseFloat(t.post_slider_slides_per_view)||1,o=parseFloat(t.post_slider_gap)||0,a=()=>{requestAnimationFrame((()=>{const t=n.find(".post-wrapper");let s=0;const a=[];t.each((function(t){a[t]=e(this).css("height"),e(this).css("height","auto")})),t.each((function(){const t=e(this).innerHeight();t>s&&(s=t)})),t.each((function(t){e(this).css("height",a[t])}));const r=i*o,l=e(document).find(".swiper-slide-visible").length;let d="";d=l>0?s*l+r:s*i+r,n.css({height:`${d}px`})}))},r=this.debounce(a,100);e(window).on("resize.verticalSwiper-"+s,this.debounce(a,100)),r()}if("yes"===t.enable_marquee&&(f.loop=!0,f.autoplay={delay:1,disableOnInteraction:!1},f.allowTouchMove=!1,f.centeredSlides=!1,n.find(".swiper-wrapper").css("transition-timing-function","linear")),"yes"===t.post_slider_lazy_load&&(f.preloadImages=!1,f.lazy={loadPrevNext:!0}),void 0===i){new(0,elementorFrontend.utils.swiper)(n,f).then((e=>{i=e,this.initSwiperFeatures(i)}))}else{new(0,elementorFrontend.utils.swiper)(n,f).then((e=>{i=e,this.initSwiperFeatures(i)})),i&&(i=new i(n,f)),this.initSwiperFeatures(i)}},r=()=>{const t=e(window).width()<=o;t&&!i?a():!t&&i&&i&&"function"==typeof i.destroy&&(i.destroy(!0,!0),i=null,n.removeClass(`swiper swiper-container bpfwe-swiper-${s}`).addClass("elementor-grid"),n.find(".post-wrapper").removeClass("swiper-slide swiper-slide-duplicate-prev swiper-slide-duplicate-next").unwrap(".swiper-wrapper"),n.find(`.swiper-button-next.bpfwe-slider-arrow-${s}, .swiper-button-prev.bpfwe-slider-arrow-${s}, .swiper-pagination-${s}`).remove(),n.find(".post-wrapper").removeAttr("style"),n.addClass("elementor-grid"),n.css({transition:"opacity 1s ease, transform 0.8s ease",display:"grid",opacity:"1","-webkit-transform":"translateY(0px)","-ms-transform":"translateY(0px)",transform:"translateY(0px)"}),e(window).off("resize.verticalSwiper-"+s))};t.carousel_breakpoints&&0!==t.carousel_breakpoints.length?(r(),e(window).off("resize."+s),e(window).on("resize."+s,this.debounce(r,200))):a()},initSwiperFeatures:function(t){const s=document.querySelectorAll(".sync-sliders .swiper-container");if(s.length>1){const e=Array.from(s).map((e=>e.swiper));let t=!1;const n=(s,n=null)=>{if(t)return;t=!0;const i=null!==n?n:s.realIndex;e.forEach((e=>{if(e!==s){let t=e.realIndex,n=e.slides.length-2*e.loopedSlides;e.params.loop?(e.loopFix(),0===i&&t===n-1?e.slideToLoop(n,s.params.speed,!1):i===n-1&&0===t?e.slideToLoop(-1,s.params.speed,!1):e.slideToLoop(i,s.params.speed,!1)):e.slideTo(i,s.params.speed,!1)}})),a(),t=!1};e.forEach((e=>{const t=e.realIndex;e.on("slideChange",(()=>n(e))),e.slides.forEach((s=>{parseInt(s.dataset.swiperSlideIndex,10)===t&&s.classList.add("active"),s.addEventListener("click",(()=>{parseInt(s.dataset.swiperSlideIndex,10);e.slides.forEach((e=>e.classList.remove("active"))),s.classList.add("active")}))}))}))}const n=this.$element.data("id"),i=e(`.bg-slide-${n}`);let o=!0;const a=()=>{const t=e(`.bpfwe-swiper-${n} .swiper-slide-active`).find(".post-image img");if(t.length&&i.length){const s=t.attr("data-bpfwe-src");if(s)return i.each((function(){const t=e(this);o?(t.css("--bg-image-after",`url(${s})`),t.addClass("after-active").removeClass("before-active")):(t.css("--bg-image-before",`url(${s})`),t.addClass("before-active").removeClass("after-active"))})),o=!o,!0}return!1};a(),t.on("slideChangeTransitionStart",a);e(`.bpfwe-swiper-${n} .swiper-slide`);const r=e("body").find(`[class*="${n}-slide-"]`)||[];if(r.length){r.each((function(){this.target_swiper=t})),r.on("click",(function(s){s.preventDefault();const n=e(this).attr("class");let i=n.match(/-slide-(\d+)/),o=n.includes("-slide-prev"),a=n.includes("-slide-next");if(i){let e=parseInt(i[1]);e>=0&&t.slideToLoop(e)}else o?t.slidePrev():a&&t.slideNext()})),t.on("slideChange",(function(){const s=t.realIndex;r.removeClass("active");const i=e(`.${n}-slide-${s}`);i.length&&i.addClass("active")}));const s=e(`.${n}-slide-0`);s.length&&s.addClass("active")}}});elementorFrontend.elementsHandler.attachHandler("post-widget",t)}))}(jQuery);