!function(e){"use strict";e(window).on("elementor/frontend/init",(function(){const t=elementorModules.frontend.handlers.Base.extend({bindEvents:function(){this.fetchMasonry(),this.fetchFeedLayout(),this.changePostStatus(),this.getPinnedPosts(),this.getPostsByAjax(),this.postCarousel()},debounce:function(e,t){let s;return function(){const i=this,n=arguments;clearTimeout(s),s=setTimeout((()=>{e.apply(i,n)}),t)}},fetchMasonry:function(){var t=this.getElementSettings(),s=this.$element.find(".bpfwe-masonry");if(0===s.length)return;var i=s.find(".post-wrapper");if(0===i.length)return;const n=elementorFrontend.config.responsive.breakpoints;let a=null,r=!0,o=void 0!==window.orientation?window.orientation:null;const l=()=>{const l=(()=>{const e=window.innerWidth;let s="";return e<=n.widescreen.value&&void 0!==t.nb_columns_widescreen&&(s=t.nb_columns_widescreen||4),e<=n.laptop.value&&void 0!==t.nb_columns&&(s=t.nb_columns||3),e<=n.tablet_extra.value&&void 0!==t.nb_columns_tablet_extra&&(s=t.nb_columns_tablet_extra||3),e<=n.tablet.value&&void 0!==t.nb_columns_tablet&&(s=t.nb_columns_tablet||2),e<=n.mobile_extra.value&&void 0!==t.nb_columns_mobile_extra&&(s=t.nb_columns_mobile_extra||2),e<=n.mobile.value&&void 0!==t.nb_columns_mobile&&(s=t.nb_columns_mobile||1),void 0!==s&&""!==s||(s=t.nb_columns||3),s})();let d=!1;(l!==a||r)&&(d=r,a=l),void 0!==window.orientation&&window.orientation!==o&&(d=!0,o=window.orientation),s.removeClass((function(e,t){return(t.match(/(^|\s)columns-\S+/g)||[]).join(" ")})).addClass("elementor-grid bpfwe-masonry masonry-layout columns-"+l),s.children(".masonry-column").remove();for(let t=1;t<=l;t++){const i=e("<div></div>").addClass("masonry-column masonry-column-"+t);s.append(i)}let p=1;s.find(".post-wrapper").remove(),i.each(((t,i)=>{const n=s.find(".masonry-column-"+p);d&&e(i).css({opacity:"0",transform:"translateY(20px)"}),n.append(e(i)),p=p<l?p+1:1,d&&setTimeout((()=>{e(i).css({opacity:"1",transform:"translateY(0)",transition:"opacity 0.5s ease, transform 0.5s ease"})}),100*t)})),r=!1};l(),e(window).off("resize.bpfweMasonry").on("resize.bpfweMasonry",this.debounce(l,300))},fetchFeedLayout:function(){var t=this.getElementSettings();if(!("feed"===t.classic_layout))return;var s,i=t.uncategorized_section_label||"Uncategorized";if((s=this.$element.find(".post-container")).removeClass("feed-ready"),0===s.length)return;var n=s.find(".post-container-inner");0===n.length&&(n=s);var a=n.find(".elementor-grid"),r=n.find(".pagination"),o=n.find(".load-more-wrapper");if(0===a.length)return;var l=a.find(".post-wrapper");if(0===l.length)return;const d=e=>e?e.toLowerCase().trim().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+|-+$/g,""):"";var p="feed-section-"+this.$element.data("id");s.attr("id",p);var c=[];l.each((function(){var t=e(this),s=(t.attr("data-terms")||t.attr("data-term")||t.attr("data-term")||"").split(",").map((e=>e.trim())).filter(Boolean),i=t.attr("data-term-names")||"";c.push({$el:t,terms:s,termSlugs:s.map((e=>d(e))),termNames:i})}));var f=[],u={},_={};c.forEach((e=>{e.terms.forEach((e=>{if(e&&!u.hasOwnProperty(e)){var t=d(e);t&&(u[e]=t,_[t]=e,f.push(e))}}))}));var h=c.filter((e=>0===e.terms.length)),m=h.length>0;f.sort(((e,t)=>e.localeCompare(t)));var w={};f.forEach((e=>{for(var t=e,s=0;s<c.length;s++){var i=c[s].termNames;if(i){for(var n=i.split(",").map((e=>e.trim())),a=0;a<n.length;a++){var r=n[a].split(":");if(2===r.length&&r[0].trim()===e){t=r[1].trim();break}}if(t!==e)break}}w[e]=t})),a.remove(),r.remove(),o.remove();var v=this.$element.data("id"),g="feed-filters-"+v,b="feed-anchor-filters-"+v,y="feed-term-list-"+v,x="feed-anchor-list-"+v,C=e('<div class="'+g+'"></div>'),$=e('<a href="#" class="sort-all active">All</a>');C.append($),f.forEach((t=>{var s=u[t],i=w[t]||t,n=e('<a href="#" class="sort-'+s+'">'+i+"</a>");C.append(n)}));var k=e('<div class="'+b+'"></div>');if(f.forEach((t=>{var s=u[t],i=w[t]||t,n=e('<a href="#'+s+"-"+v+'" class="external sort-'+s+'">'+i+"</a>");k.append(n)})),m&&this.$element.hasClass("show-no-terms")&&k.append(e("<a></a>").attr("href","#none-"+v).addClass("external sort-none").text(i)),e(document).on("click","."+g+" a",(function(t){t.preventDefault();var s=e(this);if(!s.hasClass("active")){e("."+g+" a").removeClass("active"),s.addClass("active");var i=s.hasClass("sort-all"),a=i?null:s.attr("class").match(/sort-([\w-]+)/)[1],r=n.find(".feed-header"),o=n.find(".elementor-grid"),l=r.add(o),d=i?l:r.filter('[data-term="'+a+'"]').add(o.filter(".term-"+a));l.not(d).stop(!0,!0).fadeOut(300),d.stop(!0,!0).fadeIn(300)}})),e("."+y).each((function(){var t=e(this),s=t.find(".elementor-widget-container").first(),i=s.length?s.children().first():t.children().first();i.length&&i.html(C.clone())})),e("."+x).each((function(){var t=e(this),s=t.find(".elementor-widget-container").first(),i=s.length?s.children().first():t.children().first();i.length&&i.html(k.clone())})),f.forEach((t=>{var s=u[t],i=w[t]||t,a=e("<div></div>").addClass("feed-header").attr("data-term",s).attr("id",s+"-"+v).append(e("<span></span>").addClass("feed-title").text(i));n.append(a);var r=e("<div></div>").addClass("elementor-grid term-"+s);c.forEach((e=>{e.termSlugs.includes(s)&&r.append(e.$el.clone())})),n.append(r)})),m&&this.$element.hasClass("show-no-terms")){var F="none",S=e("<div></div>").addClass("feed-header").attr("data-term",F).attr("id",F+"-"+v).append(e("<span></span>").addClass("feed-title").text(i));n.append(S);var I=e("<div></div>").addClass("elementor-grid term-none");h.forEach((function(e){I.append(e.$el.clone())})),n.append(I)}n.append(r),n.append(o),s.addClass("feed-ready");var P=e(".feed-anchor-filters-"+v);if(P.length){if(window._feedAnchorObservers||(window._feedAnchorObservers={}),window._feedAnchorObservers[v]){try{window._feedAnchorObservers[v].disconnect()}catch(e){console.warn("Failed to disconnect old observer:",e)}delete window._feedAnchorObservers[v]}var E=new IntersectionObserver((function(e){e.forEach((function(e){if(e.isIntersecting){var t=e.target.getAttribute("id");if(!t)return;P.find("a").removeClass("active"),P.find('a[href="#'+t+'"]').addClass("active")}}))}),{root:null,threshold:.3});window._feedAnchorObservers[v]=E,n.find(".feed-header").each((function(){E.observe(this)}))}},changePostStatus:function(){e(document).off("click",".unpublish-button").on("click",".unpublish-button",(function(t){var s=e(this).attr("data-postid"),i=e(this),n=i.find(".status-label"),a=n.text(),r=i.attr("data-opposite-label"),o=document.createElement("span");return o.classList.add("status-indicator"),o.style.width="16px",o.style.height="16px",o.style.border="3px solid #f3f3f3",o.style.borderTop="3px solid #3498db",o.style.borderRadius="50%",o.style.animation="spin 1s linear infinite",o.style.display="inline-block",o.style.marginLeft="5px",n.after(o),e.ajax({type:"POST",url:ajax_var.url,async:!0,data:{action:"change_post_status",post_id:s,nonce:ajax_var.nonce},success:function(e){setTimeout((function(){o.remove(),n.text(r).show(),i.attr("data-opposite-label",a)}),2e3)},error:function(e,t,s){console.log("AJAX request failed: "+t+", "+s)}}),!1}))},getPinnedPosts:function(){e(document).off("click",".post-pin").on("click",".post-pin",(function(t){t.preventDefault();var s=e(this),i=s.data("postid"),n=s.attr("class"),a=e(".pinned_post_query");e.ajax({type:"POST",url:ajax_var.url,data:{action:"pin_post",post_id:i,pin_class:n,nonce:ajax_var.nonce},success:function(){(s.toggleClass("unpin"),0!==a.length)&&(e('.post-pin[data-postid="'+i+'"]').not(s).removeClass("unpin"),a.animate({opacity:.65},"normal",(function(){a.load(location.href+" .pinned_post_query:first > *",(function(){a.animate({opacity:1},"normal")}))})))}})}))},getPostsByAjax:function(){if(document.getElementById("elementor-preview-iframe"))return;var t=this,s=!1,i=this.$element,n=i.find(".post-container"),a=i.find(".loader"),r=i.data("id"),o=".elementor-element-"+r+" .post-container-inner",l=n.find(".pagination"),d=l.data("page"),p=l.data("max-page")-1,c=c||{};let f=window.elementorFrontendConfig.post.id;window.location.href;if(!f){if(!r)return;var u=e('[data-id="'+r+'"]').parents("[data-elementor-id]").last();u.length&&(f=u.data("elementor-id"))}if(0===n.length)return;var _=this.getElementSettings();if(_)var h=_.pagination||_.pagination_type,m=_.scroll_to_top,w=(_.scroll_threshold&&_.scroll_threshold.size?_.scroll_threshold.size:0)+(_.scroll_threshold&&_.scroll_threshold.unit?_.scroll_threshold.unit:"px");else w="0px";function v(){let t=i.find(".post-container").data("total-post");void 0===t&&(t=0),t=Number(t),e(".filter-post-count .number").text(t)}function g(){0!==e(".elementor-widget-post-widget .e-off-canvas").length&&e(".elementor-widget-post-widget").each((function(){const t=e(this),s=t.data("id");t.find('[data-elementor-type="loop-item"]').each((function(){const t=e(this),i=(t.attr("class")||"").match(/e-loop-item-(\d+)/);if(!i)return;const n=i[1],a=t.find(".e-off-canvas");if(!a.length)return;const r=a.attr("id");if(!r||!r.startsWith("off-canvas-"))return;const o=r.replace(/^off-canvas-/,""),l=`off-canvas-${s}-${n}-${o}`;a.attr("id",l),t.find('a[href*="elementor-action"]').each((function(){const t=e(this),i=t.attr("href");if(!i)return;const a=decodeURIComponent(i),r=a.match(/settings=([^&]+)/);if(!r)return;const d=JSON.parse(atob(r[1]));if(!d||"object"!=typeof d||!d.id)return;d.id=`${s}-${n}-${o}`;const p=btoa(JSON.stringify(d)),c=a.replace(/settings=[^&]+/,"settings="+encodeURIComponent(p));t.attr("href",c),t.attr("aria-controls",l)}))}))}))}function b(){var e=i.find(".load-more");a.hide(),(d+=1)>p&&e.hide(),"yes"==m&&window.scrollTo({top:n.offset().top-150,behavior:"smooth"}),v(),s=!1,t.fetchMasonry(),t.fetchFeedLayout(),t.postCarousel()}if(v(),g(),i.on("click",".pagination a",(function(t){e(this).closest(".pagination-filter").length||(t.preventDefault(),n.addClass("load"),(n.hasClass("shortcode")||n.hasClass("template"))&&a.show(),function(t){const s="infinite"===h||"load_more"===h,a=i.find(".load-more");s&&a.prop("disabled",!0);const r={type:"POST",url:t,async:!0,dataType:"html",data:{action:"load_posts_ajax",nonce:ajax_var.nonce},error:function(e,t,s){console.log("AJAX request failed: "+t+", "+s)}};s?(r.success=function(t){const s=e(t).find(o),i=n.find(".elementor-grid").children().clone();n.empty().append(s),n.find(".elementor-grid").prepend(i),n.hide().show().removeClass("load"),b()},r.complete=function(){a.prop("disabled",!1)}):r.success=function(t){const s=e(t).find(o);n.empty().append(s),n.hide().show().removeClass("load"),b()},e.ajax(r)}(e(this).attr("href")))})),i.off("click",".load-more").on("click",".load-more",(function(t){e(this).hasClass("load-more-filter")||(t.preventDefault(),s=!0,i.find(".pagination a.next").click())})),"infinite"===h){if(l.hasClass("pagination-filter"))return void(c[r]&&(c[r].unobserve(y.get(0)),c[r]=null));var y=i.find(".e-load-more-anchor");y.length&&(c[r]||(c[r]=new IntersectionObserver((function(e){if(e.forEach((function(e){if(e.isIntersecting){var t=i.find(".pagination a.next");!s&&t.length&&(s=!0,t.click())}})),!i.find(".pagination a.next").length)return c[r].unobserve(y.get(0)),void(c[r]=null)}),{root:null,rootMargin:w,threshold:0})),c[r].observe(y.get(0)))}const x=[38,38,40,40,37,39,37,39,66,65];let C=0;const $="Follow the white rabbit.";e(document).off("keydown").on("keydown",(function(e){e.keyCode===x[C]?(C++,C===x.length&&(!function(){const e=document.createElement("div");e.textContent=$,e.style.position="fixed",e.style.bottom="10px",e.style.right="10px",e.style.backgroundColor="#333",e.style.color="#fff",e.style.padding="10px",e.style.zIndex="1000",document.body.appendChild(e),setTimeout((()=>{e.remove()}),5e3)}(),C=0)):C=0}))},postCarousel:function(){var t=this.getElementSettings(),s=this.$element.data("id"),i=this.$element.find(".bpfwe-swiper");if(0===i.length)return;let n;n?(n.destroy(!0,!0),n=null):i.css({display:"grid",opacity:"1","-webkit-transform":"translateY(0px)","-ms-transform":"translateY(0px)",transform:"translateY(0px)"});let a=t.carousel_breakpoints?parseInt(t.carousel_breakpoints):0;const r=()=>{i.removeClass("elementor-grid").addClass(`swiper swiper-container bpfwe-swiper-${s}`),i.children(".post-wrapper").addClass("swiper-slide").wrapAll('<div class="swiper-wrapper"></div>');const a=e(`<div class="swiper-button-next bpfwe-slider-arrow-${s}"></div>`),r=e(`<div class="swiper-button-prev bpfwe-slider-arrow-${s}"></div>`),o=e(`<div class="swiper-pagination swiper-pagination-${s}"></div>`),l=e(`<div style="display:none;" class="swiper-button-next bpfwe-slider-arrow-${s}"></div>`),d=e(`<div style="display:none;" class="swiper-button-prev bpfwe-slider-arrow-${s}"></div>`),p=e(`<div style="display:none;" class="swiper-pagination swiper-pagination-${s}"></div>`);t.post_slider_arrows?i.append(a).append(r):i.append(l).append(d),t.post_slider_pagination?i.parent().append(o):i.parent().append(p);const c=t.post_slider_autoplay||!1;t.autoplay=!!c&&{delay:t.post_slider_autoplay_delay};const f={},u=elementorFrontend.config.responsive.breakpoints;f[u.mobile.value]={slidesPerView:parseFloat(t.post_slider_slides_per_view_mobile)||1,slidesPerGroup:parseInt(t.post_slider_slides_to_scroll_mobile)||1,spaceBetween:parseFloat(t.post_slider_gap_mobile)||20},void 0!==t.post_slider_slides_per_view_mobile_extra&&(f[u.mobile_extra.value]={slidesPerView:parseFloat(t.post_slider_slides_per_view_mobile_extra)||2,slidesPerGroup:parseInt(t.post_slider_slides_to_scroll_mobile_extra)||1,spaceBetween:parseFloat(t.post_slider_gap_mobile_extra)||20}),f[u.tablet.value]={slidesPerView:parseFloat(t.post_slider_slides_per_view_tablet)||3,slidesPerGroup:parseInt(t.post_slider_slides_to_scroll_tablet)||1,spaceBetween:parseFloat(t.post_slider_gap_tablet)||20},void 0!==t.post_slider_slides_per_view_tablet_extra&&(f[u.tablet_extra.value]={slidesPerView:parseFloat(t.post_slider_slides_per_view_tablet_extra)||3,slidesPerGroup:parseInt(t.post_slider_slides_to_scroll_tablet_extra)||1,spaceBetween:parseFloat(t.post_slider_gap_tablet_extra)||20}),void 0!==t.post_slider_slides_per_view_laptop&&(f[u.laptop.value]={slidesPerView:parseFloat(t.post_slider_slides_per_view_laptop)||3,slidesPerGroup:parseInt(t.post_slider_slides_to_scroll_laptop)||1,spaceBetween:parseFloat(t.post_slider_gap_laptop)||20}),void 0!==t.post_slider_slides_per_view_widescreen&&(f[u.widescreen.value]={slidesPerView:parseFloat(t.post_slider_slides_per_view_widescreen)||5,slidesPerGroup:parseInt(t.post_slider_slides_to_scroll_widescreen)||1,spaceBetween:parseFloat(t.post_slider_gap_widescreen)||20}),"fade"===t.post_slider_transition_effect?t.breakpoints={}:t.breakpoints=f;const _={slideVisibleClass:"swiper-slide-visible",watchSlidesProgress:!0,allowTouchMove:"yes"===t.post_slider_allow_touch_move,autoHeight:"yes"===t.post_slider_auto_h,effect:t.post_slider_transition_effect,direction:t.post_slider_layout,loop:"yes"===t.post_slider_loop,centerInsufficientSlides:!1,parallax:"yes"===t.post_slider_parallax,speed:t.post_slider_speed,handleElementorBreakpoints:!0,slidesPerView:parseFloat(t.post_slider_slides_per_view),slidesPerGroup:parseInt(t.post_slider_slides_to_scroll),spaceBetween:parseFloat(t.post_slider_gap),breakpoints:t.breakpoints,centeredSlides:"yes"===t.post_slider_centered_slides,slideToClickedSlide:"yes"===t.slide_to_clicked_slide,centeredSlidesBounds:"yes"===t.post_slider_slides_round_lenghts,navigation:{nextEl:`.swiper-button-next.bpfwe-slider-arrow-${s}`,prevEl:`.swiper-button-prev.bpfwe-slider-arrow-${s}`},pagination:{el:`.swiper-pagination-${s}`,type:t.post_slider_pagination_type,clickable:!0},autoplay:t.autoplay,mousewheel:"yes"===t.post_slider_allow_mousewheel,watchOverflow:!0};if("vertical"===t.post_slider_layout){const i=e(`.bpfwe-swiper-${s}`),n=parseFloat(t.post_slider_slides_per_view)||1,a=parseFloat(t.post_slider_gap)||0,r=()=>{requestAnimationFrame((()=>{const t=i.find(".post-wrapper");let s=0;const r=[];t.each((function(t){r[t]=e(this).css("height"),e(this).css("height","auto")})),t.each((function(){const t=e(this).innerHeight();t>s&&(s=t)})),t.each((function(t){e(this).css("height",r[t])}));const o=n*a,l=e(document).find(".swiper-slide-visible").length;let d="";d=l>0?s*l+o:s*n+o,i.css({height:`${d}px`})}))},o=this.debounce(r,100);e(window).on("resize.verticalSwiper-"+s,this.debounce(r,100)),o()}if("yes"===t.enable_marquee&&(_.loop=!0,_.autoplay={delay:1,disableOnInteraction:!1},_.allowTouchMove=!1,_.centeredSlides=!1,i.find(".swiper-wrapper").css("transition-timing-function","linear")),"yes"===t.post_slider_lazy_load&&(_.preloadImages=!1,_.lazy={loadPrevNext:!0}),void 0===n){new(0,elementorFrontend.utils.swiper)(i,_).then((e=>{n=e,this.initSwiperFeatures(n)}))}else{new(0,elementorFrontend.utils.swiper)(i,_).then((e=>{n=e,this.initSwiperFeatures(n)})),n&&(n=new n(i,_)),this.initSwiperFeatures(n)}},o=()=>{const t=e(window).width()<=a;t&&!n?r():!t&&n&&n&&"function"==typeof n.destroy&&(n.destroy(!0,!0),n=null,i.removeClass(`swiper swiper-container bpfwe-swiper-${s}`).addClass("elementor-grid"),i.find(".post-wrapper").removeClass("swiper-slide swiper-slide-duplicate-prev swiper-slide-duplicate-next").unwrap(".swiper-wrapper"),i.find(`.swiper-button-next.bpfwe-slider-arrow-${s}, .swiper-button-prev.bpfwe-slider-arrow-${s}, .swiper-pagination-${s}`).remove(),i.find(".post-wrapper").removeAttr("style"),i.addClass("elementor-grid"),i.css({transition:"opacity 1s ease, transform 0.8s ease",display:"grid",opacity:"1","-webkit-transform":"translateY(0px)","-ms-transform":"translateY(0px)",transform:"translateY(0px)"}),e(window).off("resize.verticalSwiper-"+s))};t.carousel_breakpoints&&0!==t.carousel_breakpoints.length?(o(),e(window).off("resize."+s),e(window).on("resize."+s,this.debounce(o,200))):r()},initSwiperFeatures:function(t){const s=document.querySelectorAll(".sync-sliders .swiper-container");if(s.length>1){const e=Array.from(s).map((e=>e.swiper));let t=!1;const i=(s,i=null)=>{if(t)return;t=!0;const n=null!==i?i:s.realIndex;e.forEach((e=>{if(e!==s){let t=e.realIndex,i=e.slides.length-2*e.loopedSlides;e.params.loop?(e.loopFix(),0===n&&t===i-1?e.slideToLoop(i,s.params.speed,!1):n===i-1&&0===t?e.slideToLoop(-1,s.params.speed,!1):e.slideToLoop(n,s.params.speed,!1)):e.slideTo(n,s.params.speed,!1)}})),r(),t=!1};e.forEach((e=>{const t=e.realIndex;e.on("slideChange",(()=>i(e))),e.slides.forEach((s=>{parseInt(s.dataset.swiperSlideIndex,10)===t&&s.classList.add("active"),s.addEventListener("click",(()=>{parseInt(s.dataset.swiperSlideIndex,10);e.slides.forEach((e=>e.classList.remove("active"))),s.classList.add("active")}))}))}))}const i=this.$element.data("id"),n=e(`.bg-slide-${i}`);let a=!0;const r=()=>{const t=e(`.bpfwe-swiper-${i} .swiper-slide-active`).find(".post-image img");if(t.length&&n.length){const s=t.attr("data-bpfwe-src");if(s)return n.each((function(){const t=e(this);a?(t.css("--bg-image-after",`url(${s})`),t.addClass("after-active").removeClass("before-active")):(t.css("--bg-image-before",`url(${s})`),t.addClass("before-active").removeClass("after-active"))})),a=!a,!0}return!1};r(),t.on("slideChangeTransitionStart",r);e(`.bpfwe-swiper-${i} .swiper-slide`);const o=e("body").find(`[class*="${i}-slide-"]`)||[];if(o.length){o.each((function(){this.target_swiper=t})),o.on("click",(function(s){s.preventDefault();const i=e(this).attr("class");let n=i.match(/-slide-(\d+)/),a=i.includes("-slide-prev"),r=i.includes("-slide-next");if(n){let e=parseInt(n[1]);e>=0&&t.slideToLoop(e)}else a?t.slidePrev():r&&t.slideNext()})),t.on("slideChange",(function(){const s=t.realIndex;o.removeClass("active");const n=e(`.${i}-slide-${s}`);n.length&&n.addClass("active")}));const s=e(`.${i}-slide-0`);s.length&&s.addClass("active")}}});elementorFrontend.elementsHandler.attachHandler("post-widget",t)}))}(jQuery);