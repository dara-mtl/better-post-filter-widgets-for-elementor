!function(e){"use strict";e(window).on("elementor/frontend/init",function(){let t=elementorModules.frontend.handlers.Base.extend({bindEvents:function(){this.fetchMasonry(),this.changePostStatus(),this.getPinnedPosts(),this.getPostsByAjax(),this.postCarousel()},debounce:function(e,t){let s;return function(){let i=this,l=arguments;clearTimeout(s),s=setTimeout(()=>{e.apply(i,l)},t)}},fetchMasonry:function(){var t=this.getElementSettings(),s=this.$element.find(".bpfwe-masonry");if(0===s.length)return;var i=s.find(".post-wrapper");if(0===i.length)return;let l=elementorFrontend.config.responsive.breakpoints,o=()=>{let e=window.innerWidth,s="";return e<=l.widescreen.value&&void 0!==t.nb_columns_widescreen&&(s=t.nb_columns_widescreen||4),e<=l.laptop.value&&void 0!==t.nb_columns&&(s=t.nb_columns||3),e<=l.tablet_extra.value&&void 0!==t.nb_columns_tablet_extra&&(s=t.nb_columns_tablet_extra||3),e<=l.tablet.value&&void 0!==t.nb_columns_tablet&&(s=t.nb_columns_tablet||2),e<=l.mobile_extra.value&&void 0!==t.nb_columns_mobile_extra&&(s=t.nb_columns_mobile_extra||2),e<=l.mobile.value&&void 0!==t.nb_columns_mobile&&(s=t.nb_columns_mobile||1),(void 0===s||""===s)&&(s=t.nb_columns||3),s},n=()=>{let t=o();s.removeClass().addClass("elementor-grid bpfwe-masonry masonry-layout columns-"+t),s.children(".masonry-column").remove();for(let l=1;l<=t;l++){let n=e("<div></div>").addClass("masonry-column masonry-column-"+l);s.append(n)}let a=1;s.find(".post-wrapper").remove(),i.each((i,l)=>{let o=s.find(".masonry-column-"+a);e(l).css({opacity:"0",transform:"translateY(20px)"}),o.append(e(l)),a=a<t?a+1:1,setTimeout(()=>{e(l).css({opacity:"1",transform:"translateY(0)",transition:"opacity 0.5s ease, transform 0.5s ease"})},100*i)})};n(),e(window).on("resize",this.debounce(n,300))},changePostStatus:function(){e(document).off("click",".unpublish-button").on("click",".unpublish-button",function(t){var s=e(this).attr("data-postid"),i=e(this),l=i.find(".status-label"),o=l.text(),n=i.attr("data-opposite-label"),a=document.createElement("span");return a.classList.add("status-indicator"),a.style.width="16px",a.style.height="16px",a.style.border="3px solid #f3f3f3",a.style.borderTop="3px solid #3498db",a.style.borderRadius="50%",a.style.animation="spin 1s linear infinite",a.style.display="inline-block",a.style.marginLeft="5px",l.after(a),e.ajax({type:"POST",url:ajax_var.url,async:!0,data:{action:"change_post_status",post_id:s,nonce:ajax_var.nonce},success:function(e){setTimeout(function(){a.remove(),l.text(n).show(),i.attr("data-opposite-label",o)},2e3)},error:function(e,t,s){console.log("AJAX request failed: "+t+", "+s)}}),!1})},getPinnedPosts:function(){e(document).off("click",".post-pin").on("click",".post-pin",function(t){t.preventDefault();var s=e(this),i=s.data("postid"),l=s.attr("class"),o=e(".pinned_post_query");e.ajax({type:"POST",url:ajax_var.url,data:{action:"pin_post",post_id:i,pin_class:l,nonce:ajax_var.nonce},success:function(){s.toggleClass("unpin"),0!==o.length&&(e('.post-pin[data-postid="'+i+'"]').not(s).removeClass("unpin"),o.animate({opacity:.65},"normal",function(){o.load(location.href+" .pinned_post_query:first > *",function(){o.animate({opacity:1},"normal")})}))}})})},getPostsByAjax:function(){if(document.getElementById("elementor-preview-iframe"))return;var t=this,s=!1,i=this.$element,l=i.find(".post-container"),o=i.find(".loader"),n=i.data("id"),a=".elementor-element-"+n+" .post-container-inner",r=l.find(".pagination"),d=r.data("page"),p=r.data("max-page")-1,c=c||{};if(0===l.length)return;var u=this.getElementSettings();if(u)var f=u.pagination||u.pagination_type,w=u.scroll_to_top,h=u.scroll_threshold&&u.scroll_threshold.size?u.scroll_threshold.size:0,m=h+(u.scroll_threshold&&u.scroll_threshold.unit?u.scroll_threshold.unit:"px");else var m="0px";function v(){let t=i.find(".post-container").data("total-post");void 0===t&&(t=0),t=Number(t),e(".filter-post-count .number").text(t)}function b(){var e=i.find(".load-more");o.hide(),(d+=1)>p&&e.hide(),"yes"==w&&window.scrollTo({top:l.offset().top-150,behavior:"smooth"}),v(),s=!1,t.fetchMasonry(),t.postCarousel()}if(v(),i.on("click",".pagination a",function(t){!e(this).closest(".pagination-filter").length&&(t.preventDefault(),l.addClass("load"),(l.hasClass("shortcode")||l.hasClass("template"))&&o.show(),function t(s){if("infinite"==f||"load_more"==f){var o=i.find(".load-more");o.prop("disabled",!0),e.ajax({type:"POST",url:ajax_var.url,async:!0,dataType:"json",data:{action:"load_page",page_url:s,nonce:ajax_var.nonce},success:function(t){var s=t.data.html,i=l.find(".elementor-grid").children().clone();l.empty().append(e(s).find(a)),l.find(".elementor-grid").prepend(i),l.hide().show().removeClass("load"),b()},error:function(e,t,s){console.log("AJAX request failed: "+t+", "+s)},complete:function(){o.prop("disabled",!1)}})}else e.ajax({type:"POST",url:ajax_var.url,async:!0,dataType:"json",data:{action:"load_page",page_url:s,nonce:ajax_var.nonce},success:function(t){var s=t.data.html;l.empty().append(e(s).find(a)),l.hide().show().removeClass("load"),b()},error:function(e,t,s){console.log("AJAX request failed: "+t+", "+s)}})}(e(this).attr("href")))}),i.off("click",".load-more").on("click",".load-more",function(t){!e(this).hasClass("load-more-filter")&&(t.preventDefault(),s=!0,i.find(".pagination a.next").click())}),"infinite"===f){if(r.hasClass("pagination-filter")){c[n]&&(c[n].unobserve(g.get(0)),c[n]=null);return}var g=i.find(".e-load-more-anchor");g.length&&(c[n]||(c[n]=new IntersectionObserver(function(e){if(e.forEach(function(e){if(e.isIntersecting){var t=i.find(".pagination a.next");!s&&t.length&&(s=!0,t.click())}}),!i.find(".pagination a.next").length){c[n].unobserve(g.get(0)),c[n]=null;return}},{root:null,rootMargin:m,threshold:0})),c[n].observe(g.get(0)))}let y=[38,38,40,40,37,39,37,39,66,65],$=0;e(document).off("keydown").on("keydown",function(e){e.keyCode===y[$]?++$===y.length&&(function e(){let t=document.createElement("div");t.textContent="Follow the white rabbit.",t.style.position="fixed",t.style.bottom="10px",t.style.right="10px",t.style.backgroundColor="#333",t.style.color="#fff",t.style.padding="10px",t.style.zIndex="1000",document.body.appendChild(t),setTimeout(()=>{t.remove()},5e3)}(),$=0):$=0})},postCarousel:function(){var t=this.getElementSettings(),s=this.$element.data("id"),i=this.$element.find(".bpfwe-swiper");if(0===i.length)return;let l;l?(l.destroy(!0,!0),l=null):i.removeClass("bpfwe-swiper");let o=t.carousel_breakpoints?parseInt(t.carousel_breakpoints):0,n=()=>{i.removeClass("elementor-grid").addClass(`swiper swiper-container bpfwe-swiper-${s}`),i.children(".post-wrapper").addClass("swiper-slide").wrapAll('<div class="swiper-wrapper"></div>');let o=e(`<div class="swiper-button-next bpfwe-slider-arrow-${s}"></div>`),n=e(`<div class="swiper-button-prev bpfwe-slider-arrow-${s}"></div>`),a=e(`<div class="swiper-pagination swiper-pagination-${s}"></div>`),r=e(`<div style="display:none;" class="swiper-button-next bpfwe-slider-arrow-${s}"></div>`),d=e(`<div style="display:none;" class="swiper-button-prev bpfwe-slider-arrow-${s}"></div>`),p=e(`<div style="display:none;" class="swiper-pagination swiper-pagination-${s}"></div>`);t.post_slider_arrows?i.append(o).append(n):i.append(r).append(d),t.post_slider_pagination?i.append(a):i.append(p);let c=t.post_slider_autoplay||!1;c?t.autoplay={delay:t.post_slider_autoplay_delay}:t.autoplay=!1;let u={},f=elementorFrontend.config.responsive.breakpoints;u[f.mobile.value]={slidesPerView:parseFloat(t.post_slider_slides_per_view_mobile)||1,slidesPerGroup:parseInt(t.post_slider_slides_to_scroll_mobile)||1,spaceBetween:parseFloat(t.post_slider_gap_mobile)||20},void 0!==t.post_slider_slides_per_view_mobile_extra&&(u[f.mobile_extra.value]={slidesPerView:parseFloat(t.post_slider_slides_per_view_mobile_extra)||2,slidesPerGroup:parseInt(t.post_slider_slides_to_scroll_mobile_extra)||1,spaceBetween:parseFloat(t.post_slider_gap_mobile_extra)||20}),u[f.tablet.value]={slidesPerView:parseFloat(t.post_slider_slides_per_view_tablet)||3,slidesPerGroup:parseInt(t.post_slider_slides_to_scroll_tablet)||1,spaceBetween:parseFloat(t.post_slider_gap_tablet)||20},void 0!==t.post_slider_slides_per_view_tablet_extra&&(u[f.tablet_extra.value]={slidesPerView:parseFloat(t.post_slider_slides_per_view_tablet_extra)||3,slidesPerGroup:parseInt(t.post_slider_slides_to_scroll_tablet_extra)||1,spaceBetween:parseFloat(t.post_slider_gap_tablet_extra)||20}),void 0!==t.post_slider_slides_per_view_laptop&&(u[f.laptop.value]={slidesPerView:parseFloat(t.post_slider_slides_per_view_laptop)||3,slidesPerGroup:parseInt(t.post_slider_slides_to_scroll_laptop)||1,spaceBetween:parseFloat(t.post_slider_gap_laptop)||20}),void 0!==t.post_slider_slides_per_view_widescreen&&(u[f.widescreen.value]={slidesPerView:parseFloat(t.post_slider_slides_per_view_widescreen)||5,slidesPerGroup:parseInt(t.post_slider_slides_to_scroll_widescreen)||1,spaceBetween:parseFloat(t.post_slider_gap_widescreen)||20}),"fade"===t.post_slider_transition_effect?t.breakpoints={}:t.breakpoints=u;let w={allowTouchMove:"yes"===t.post_slider_allow_touch_move,autoHeight:"yes"===t.post_slider_auto_h,effect:t.post_slider_transition_effect,direction:"horizontal",loop:"yes"===t.post_slider_loop,centerInsufficientSlides:!1,parallax:"yes"===t.post_slider_parallax,speed:t.post_slider_speed,handleElementorBreakpoints:!0,slidesPerView:parseFloat(t.post_slider_slides_per_view),slidesPerGroup:parseInt(t.post_slider_slides_to_scroll),spaceBetween:parseFloat(t.post_slider_gap),breakpoints:t.breakpoints,centeredSlides:"yes"===t.post_slider_centered_slides,slideToClickedSlide:"yes"===t.slide_to_clicked_slide,centeredSlidesBounds:"yes"===t.post_slider_slides_round_lenghts,navigation:{nextEl:`.swiper-button-next.bpfwe-slider-arrow-${s}`,prevEl:`.swiper-button-prev.bpfwe-slider-arrow-${s}`},pagination:{el:`.swiper-pagination-${s}`,type:t.post_slider_pagination_type,clickable:!0},autoplay:t.autoplay,mousewheel:"yes"===t.post_slider_allow_mousewheel,watchOverflow:!0};if("yes"===t.enable_marquee&&(w.loop=!0,w.autoplay={delay:1,disableOnInteraction:!1},w.allowTouchMove=!1,w.centeredSlides=!1,i.find(".swiper-wrapper").css("transition-timing-function","linear")),"yes"===t.post_slider_lazy_load&&(w.preloadImages=!1,w.lazy={loadPrevNext:!0}),void 0===l){let h=elementorFrontend.utils.swiper;new h(i,w).then(e=>{l=e,this.initSwiperFeatures(l)})}else{let m=elementorFrontend.utils.swiper;new m(i,w).then(e=>{l=e,this.initSwiperFeatures(l)}),l&&(l=new l(i,w)),this.initSwiperFeatures(l)}},a=()=>{l&&"function"==typeof l.destroy&&(l.destroy(!0,!0),l=null,i.removeClass(`swiper swiper-container bpfwe-swiper-${s}`).addClass("elementor-grid"),i.find(".post-wrapper").removeClass("swiper-slide").unwrap(".swiper-wrapper"),i.find(`.swiper-button-next.bpfwe-slider-arrow-${s}, .swiper-button-prev.bpfwe-slider-arrow-${s}, .swiper-pagination-${s}`).remove(),i.find(".post-wrapper").removeAttr("style"),i.addClass("elementor-grid"))},r=()=>{let t=e(window).width(),s=t<=o;s&&!l?n():!s&&l&&a()};t.carousel_breakpoints&&0!==t.carousel_breakpoints.length?(r(),e(window).off("resize."+s),e(window).on("resize."+s,this.debounce(r,200))):n()},initSwiperFeatures:function(t){let s=document.querySelectorAll(".sync-sliders .swiper-container");if(s.length>1){let i=Array.from(s).map(e=>e.swiper),l=!1,o=e=>{if(l)return;l=!0;let t=e.realIndex;i.forEach(s=>{if(s!==e){let i=s.realIndex,l=s.slides.length-2*s.loopedSlides;s.params.loop?(s.loopFix(),0===t&&i===l-1?s.slideToLoop(l,e.params.speed,!1):t===l-1&&0===i?s.slideToLoop(-1,e.params.speed,!1):s.slideToLoop(t,e.params.speed,!1)):s.slideTo(t,e.params.speed,!1)}}),d(),l=!1};i.forEach(e=>{e.on("slideChange",()=>o(e))})}let n=this.$element.data("id"),a=e(`.bg-slide-${n}`),r=!0,d=()=>{let t=e(`.bpfwe-swiper-${n} .swiper-slide-active`),s=t.find(".post-image img");if(s.length&&a.length){let i=s.attr("data-bpfwe-src");if(i)return a.each(function(){let t=e(this);r?(t.css("--bg-image-after",`url(${i})`),t.addClass("after-active").removeClass("before-active")):(t.css("--bg-image-before",`url(${i})`),t.addClass("before-active").removeClass("after-active"))}),r=!r,!0}return!1};d(),t.on("slideChangeTransitionStart",d),e(`.bpfwe-swiper-${n} .swiper-slide`);let p=e("body").find(`[class*="${n}-slide-"]`)||[];if(p.length){p.each(function(){this.target_swiper=t}),p.on("click",function(s){s.preventDefault();let i=e(this).attr("class"),l=i.match(/-slide-(\d+)/),o=i.includes("-slide-prev"),n=i.includes("-slide-next");if(l){let a=parseInt(l[1]);a>=0&&t.slideToLoop(a)}else o?t.slidePrev():n&&t.slideNext()}),t.on("slideChange",function(){let s=t.realIndex;p.removeClass("active");let i=e(`.${n}-slide-${s}`);i.length&&i.addClass("active")});let c=e(`.${n}-slide-0`);c.length&&c.addClass("active")}}});elementorFrontend.elementsHandler.attachHandler("post-widget",t)})}(jQuery);