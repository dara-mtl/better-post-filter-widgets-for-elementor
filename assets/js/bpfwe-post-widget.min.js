!function(e){"use strict";e(window).on("elementor/frontend/init",(function(){const s=elementorModules.frontend.handlers.Base.extend({bindEvents:function(){this.fetchMasonry(),this.changePostStatus(),this.getPinnedPosts(),this.getPostsByAjax(),this.postCarousel()},debounce:function(e,s){let t;return function(){const i=this,o=arguments;clearTimeout(t),t=setTimeout((()=>{e.apply(i,o)}),s)}},fetchMasonry:function(){var s=this.getElementSettings(),t=this.$element.find(".bpfwe-masonry");if(0===t.length)return;var i=t.find(".post-wrapper");if(0===i.length)return;const o=elementorFrontend.config.responsive.breakpoints,n=()=>{const n=(()=>{const e=window.innerWidth;let t="";return e<=o.widescreen.value&&void 0!==s.nb_columns_widescreen&&(t=s.nb_columns_widescreen||4),e<=o.laptop.value&&void 0!==s.nb_columns&&(t=s.nb_columns||3),e<=o.tablet_extra.value&&void 0!==s.nb_columns_tablet_extra&&(t=s.nb_columns_tablet_extra||3),e<=o.tablet.value&&void 0!==s.nb_columns_tablet&&(t=s.nb_columns_tablet||2),e<=o.mobile_extra.value&&void 0!==s.nb_columns_mobile_extra&&(t=s.nb_columns_mobile_extra||2),e<=o.mobile.value&&void 0!==s.nb_columns_mobile&&(t=s.nb_columns_mobile||1),void 0!==t&&""!==t||(t=s.nb_columns||3),t})();t.removeClass().addClass("elementor-grid bpfwe-masonry masonry-layout columns-"+n),t.children(".masonry-column").remove();for(let s=1;s<=n;s++){const i=e("<div></div>").addClass("masonry-column masonry-column-"+s);t.append(i)}let a=1;t.find(".post-wrapper").remove(),i.each(((s,i)=>{const o=t.find(".masonry-column-"+a);e(i).css({opacity:"0",transform:"translateY(20px)"}),o.append(e(i)),a=a<n?a+1:1,setTimeout((()=>{e(i).css({opacity:"1",transform:"translateY(0)",transition:"opacity 0.5s ease, transform 0.5s ease"})}),100*s)}))};n(),e(window).on("resize",this.debounce(n,300))},changePostStatus:function(){e(document).off("click",".unpublish-button").on("click",".unpublish-button",(function(s){var t=e(this).attr("data-postid"),i=e(this),o=i.find(".status-label"),n=o.text(),a=i.attr("data-opposite-label"),r=document.createElement("span");return r.classList.add("status-indicator"),r.style.width="16px",r.style.height="16px",r.style.border="3px solid #f3f3f3",r.style.borderTop="3px solid #3498db",r.style.borderRadius="50%",r.style.animation="spin 1s linear infinite",r.style.display="inline-block",r.style.marginLeft="5px",o.after(r),e.ajax({type:"POST",url:ajax_var.url,async:!0,data:{action:"change_post_status",post_id:t,nonce:ajax_var.nonce},success:function(e){setTimeout((function(){r.remove(),o.text(a).show(),i.attr("data-opposite-label",n)}),2e3)},error:function(e,s,t){console.log("AJAX request failed: "+s+", "+t)}}),!1}))},getPinnedPosts:function(){e(document).off("click",".post-pin").on("click",".post-pin",(function(s){s.preventDefault();var t=e(this),i=t.data("postid"),o=t.attr("class"),n=e(".pinned_post_query");e.ajax({type:"POST",url:ajax_var.url,data:{action:"pin_post",post_id:i,pin_class:o,nonce:ajax_var.nonce},success:function(){(t.toggleClass("unpin"),0!==n.length)&&(e('.post-pin[data-postid="'+i+'"]').not(t).removeClass("unpin"),n.animate({opacity:.65},"normal",(function(){n.load(location.href+" .pinned_post_query:first > *",(function(){n.animate({opacity:1},"normal")}))})))}})}))},getPostsByAjax:function(){if(document.getElementById("elementor-preview-iframe"))return;var s=this,t=!1,i=this.$element,o=i.find(".post-container"),n=i.find(".loader"),a=i.data("id"),r=".elementor-element-"+a+" .post-container-inner",l=o.find(".pagination"),d=l.data("page"),p=l.data("max-page")-1,c=c||{};if(0===o.length)return;var _=this.getElementSettings();if(_)var u=_.pagination||_.pagination_type,f=_.scroll_to_top,w=(_.scroll_threshold&&_.scroll_threshold.size?_.scroll_threshold.size:0)+(_.scroll_threshold&&_.scroll_threshold.unit?_.scroll_threshold.unit:"px");else w="0px";function m(){let s=i.find(".post-container").data("total-post");void 0===s&&(s=0),s=Number(s),e(".filter-post-count .number").text(s)}function h(){var e=i.find(".load-more");n.hide(),(d+=1)>p&&e.hide(),"yes"==f&&window.scrollTo({top:o.offset().top-150,behavior:"smooth"}),m(),t=!1,s.fetchMasonry(),s.postCarousel()}if(m(),i.on("click",".pagination a",(function(s){e(this).closest(".pagination-filter").length||(s.preventDefault(),o.addClass("load"),(o.hasClass("shortcode")||o.hasClass("template"))&&n.show(),function(s){if("infinite"==u||"load_more"==u){var t=i.find(".load-more");t.prop("disabled",!0),e.ajax({type:"POST",url:ajax_var.url,async:!0,dataType:"json",data:{action:"load_page",page_url:s,nonce:ajax_var.nonce},success:function(s){var t=s.data.html,i=o.find(".elementor-grid").children().clone();o.empty().append(e(t).find(r)),o.find(".elementor-grid").prepend(i),o.hide().show().removeClass("load"),h()},error:function(e,s,t){console.log("AJAX request failed: "+s+", "+t)},complete:function(){t.prop("disabled",!1)}})}else e.ajax({type:"POST",url:ajax_var.url,async:!0,dataType:"json",data:{action:"load_page",page_url:s,nonce:ajax_var.nonce},success:function(s){var t=s.data.html;o.empty().append(e(t).find(r)),o.hide().show().removeClass("load"),h()},error:function(e,s,t){console.log("AJAX request failed: "+s+", "+t)}})}(e(this).attr("href")))})),i.off("click",".load-more").on("click",".load-more",(function(s){e(this).hasClass("load-more-filter")||(s.preventDefault(),t=!0,i.find(".pagination a.next").click())})),"infinite"===u){if(l.hasClass("pagination-filter"))return void(c[a]&&(c[a].unobserve(v.get(0)),c[a]=null));var v=i.find(".e-load-more-anchor");v.length&&(c[a]||(c[a]=new IntersectionObserver((function(e){if(e.forEach((function(e){if(e.isIntersecting){var s=i.find(".pagination a.next");!t&&s.length&&(t=!0,s.click())}})),!i.find(".pagination a.next").length)return c[a].unobserve(v.get(0)),void(c[a]=null)}),{root:null,rootMargin:w,threshold:0})),c[a].observe(v.get(0)))}const b=[38,38,40,40,37,39,37,39,66,65];let g=0;const y="Follow the white rabbit.";e(document).off("keydown").on("keydown",(function(e){e.keyCode===b[g]?(g++,g===b.length&&(!function(){const e=document.createElement("div");e.textContent=y,e.style.position="fixed",e.style.bottom="10px",e.style.right="10px",e.style.backgroundColor="#333",e.style.color="#fff",e.style.padding="10px",e.style.zIndex="1000",document.body.appendChild(e),setTimeout((()=>{e.remove()}),5e3)}(),g=0)):g=0}))},postCarousel:function(){var s=this.getElementSettings(),t=this.$element.data("id"),i=this.$element.find(".bpfwe-swiper");if(0===i.length)return;let o;o?(o.destroy(!0,!0),o=null):i.css({display:"grid",opacity:"1","-webkit-transform":"translateY(0px)","-ms-transform":"translateY(0px)",transform:"translateY(0px)"});let n=s.carousel_breakpoints?parseInt(s.carousel_breakpoints):0;const a=()=>{i.removeClass("elementor-grid").addClass(`swiper swiper-container bpfwe-swiper-${t}`),i.children(".post-wrapper").addClass("swiper-slide").wrapAll('<div class="swiper-wrapper"></div>');const n=e(`<div class="swiper-button-next bpfwe-slider-arrow-${t}"></div>`),a=e(`<div class="swiper-button-prev bpfwe-slider-arrow-${t}"></div>`),r=e(`<div class="swiper-pagination swiper-pagination-${t}"></div>`),l=e(`<div style="display:none;" class="swiper-button-next bpfwe-slider-arrow-${t}"></div>`),d=e(`<div style="display:none;" class="swiper-button-prev bpfwe-slider-arrow-${t}"></div>`),p=e(`<div style="display:none;" class="swiper-pagination swiper-pagination-${t}"></div>`);s.post_slider_arrows?i.append(n).append(a):i.append(l).append(d),s.post_slider_pagination?i.append(r):i.append(p);const c=s.post_slider_autoplay||!1;s.autoplay=!!c&&{delay:s.post_slider_autoplay_delay};const _={},u=elementorFrontend.config.responsive.breakpoints;_[u.mobile.value]={slidesPerView:parseFloat(s.post_slider_slides_per_view_mobile)||1,slidesPerGroup:parseInt(s.post_slider_slides_to_scroll_mobile)||1,spaceBetween:parseFloat(s.post_slider_gap_mobile)||20},void 0!==s.post_slider_slides_per_view_mobile_extra&&(_[u.mobile_extra.value]={slidesPerView:parseFloat(s.post_slider_slides_per_view_mobile_extra)||2,slidesPerGroup:parseInt(s.post_slider_slides_to_scroll_mobile_extra)||1,spaceBetween:parseFloat(s.post_slider_gap_mobile_extra)||20}),_[u.tablet.value]={slidesPerView:parseFloat(s.post_slider_slides_per_view_tablet)||3,slidesPerGroup:parseInt(s.post_slider_slides_to_scroll_tablet)||1,spaceBetween:parseFloat(s.post_slider_gap_tablet)||20},void 0!==s.post_slider_slides_per_view_tablet_extra&&(_[u.tablet_extra.value]={slidesPerView:parseFloat(s.post_slider_slides_per_view_tablet_extra)||3,slidesPerGroup:parseInt(s.post_slider_slides_to_scroll_tablet_extra)||1,spaceBetween:parseFloat(s.post_slider_gap_tablet_extra)||20}),void 0!==s.post_slider_slides_per_view_laptop&&(_[u.laptop.value]={slidesPerView:parseFloat(s.post_slider_slides_per_view_laptop)||3,slidesPerGroup:parseInt(s.post_slider_slides_to_scroll_laptop)||1,spaceBetween:parseFloat(s.post_slider_gap_laptop)||20}),void 0!==s.post_slider_slides_per_view_widescreen&&(_[u.widescreen.value]={slidesPerView:parseFloat(s.post_slider_slides_per_view_widescreen)||5,slidesPerGroup:parseInt(s.post_slider_slides_to_scroll_widescreen)||1,spaceBetween:parseFloat(s.post_slider_gap_widescreen)||20}),"fade"===s.post_slider_transition_effect?s.breakpoints={}:s.breakpoints=_;const f={slideVisibleClass:"swiper-slide-visible",watchSlidesProgress:!0,allowTouchMove:"yes"===s.post_slider_allow_touch_move,autoHeight:"yes"===s.post_slider_auto_h,effect:s.post_slider_transition_effect,direction:s.post_slider_layout,loop:"yes"===s.post_slider_loop,centerInsufficientSlides:!1,parallax:"yes"===s.post_slider_parallax,speed:s.post_slider_speed,handleElementorBreakpoints:!0,slidesPerView:parseFloat(s.post_slider_slides_per_view),slidesPerGroup:parseInt(s.post_slider_slides_to_scroll),spaceBetween:parseFloat(s.post_slider_gap),breakpoints:s.breakpoints,centeredSlides:"yes"===s.post_slider_centered_slides,slideToClickedSlide:"yes"===s.slide_to_clicked_slide,centeredSlidesBounds:"yes"===s.post_slider_slides_round_lenghts,navigation:{nextEl:`.swiper-button-next.bpfwe-slider-arrow-${t}`,prevEl:`.swiper-button-prev.bpfwe-slider-arrow-${t}`},pagination:{el:`.swiper-pagination-${t}`,type:s.post_slider_pagination_type,clickable:!0},autoplay:s.autoplay,mousewheel:"yes"===s.post_slider_allow_mousewheel,watchOverflow:!0};if("vertical"===s.post_slider_layout){const i=e(`.bpfwe-swiper-${t}`),o=parseFloat(s.post_slider_slides_per_view)||1,n=parseFloat(s.post_slider_gap)||0,a=()=>{requestAnimationFrame((()=>{const s=i.find(".post-wrapper");let t=0;const a=[];s.each((function(s){a[s]=e(this).css("height"),e(this).css("height","auto")})),s.each((function(){const s=e(this).innerHeight();s>t&&(t=s)})),s.each((function(s){e(this).css("height",a[s])}));const r=o*n,l=e(document).find(".swiper-slide-visible").length;let d="";d=l>0?t*l+r:t*o+r,i.css({height:`${d}px`})}))},r=this.debounce(a,100);e(window).on("resize.verticalSwiper-"+t,this.debounce(a,100)),r()}if("yes"===s.enable_marquee&&(f.loop=!0,f.autoplay={delay:1,disableOnInteraction:!1},f.allowTouchMove=!1,f.centeredSlides=!1,i.find(".swiper-wrapper").css("transition-timing-function","linear")),"yes"===s.post_slider_lazy_load&&(f.preloadImages=!1,f.lazy={loadPrevNext:!0}),void 0===o){new(0,elementorFrontend.utils.swiper)(i,f).then((e=>{o=e,this.initSwiperFeatures(o)}))}else{new(0,elementorFrontend.utils.swiper)(i,f).then((e=>{o=e,this.initSwiperFeatures(o)})),o&&(o=new o(i,f)),this.initSwiperFeatures(o)}},r=()=>{const s=e(window).width()<=n;s&&!o?a():!s&&o&&o&&"function"==typeof o.destroy&&(o.destroy(!0,!0),o=null,i.removeClass(`swiper swiper-container bpfwe-swiper-${t}`).addClass("elementor-grid"),i.find(".post-wrapper").removeClass("swiper-slide swiper-slide-duplicate-prev swiper-slide-duplicate-next").unwrap(".swiper-wrapper"),i.find(`.swiper-button-next.bpfwe-slider-arrow-${t}, .swiper-button-prev.bpfwe-slider-arrow-${t}, .swiper-pagination-${t}`).remove(),i.find(".post-wrapper").removeAttr("style"),i.addClass("elementor-grid"),i.css({transition:"opacity 1s ease, transform 0.8s ease",display:"grid",opacity:"1","-webkit-transform":"translateY(0px)","-ms-transform":"translateY(0px)",transform:"translateY(0px)"}),e(window).off("resize.verticalSwiper-"+t))};s.carousel_breakpoints&&0!==s.carousel_breakpoints.length?(r(),e(window).off("resize."+t),e(window).on("resize."+t,this.debounce(r,200))):a()},initSwiperFeatures:function(s){const t=document.querySelectorAll(".sync-sliders .swiper-container");if(t.length>1){const e=Array.from(t).map((e=>e.swiper));let s=!1;const i=(t,i=null)=>{if(s)return;s=!0;const o=null!==i?i:t.realIndex;e.forEach((e=>{if(e!==t){let s=e.realIndex,i=e.slides.length-2*e.loopedSlides;e.params.loop?(e.loopFix(),0===o&&s===i-1?e.slideToLoop(i,t.params.speed,!1):o===i-1&&0===s?e.slideToLoop(-1,t.params.speed,!1):e.slideToLoop(o,t.params.speed,!1)):e.slideTo(o,t.params.speed,!1)}})),a(),s=!1};e.forEach((e=>{const s=e.realIndex;e.on("slideChange",(()=>i(e))),e.slides.forEach((t=>{parseInt(t.dataset.swiperSlideIndex,10)===s&&t.classList.add("active"),t.addEventListener("click",(()=>{parseInt(t.dataset.swiperSlideIndex,10);e.slides.forEach((e=>e.classList.remove("active"))),t.classList.add("active")}))}))}))}const i=this.$element.data("id"),o=e(`.bg-slide-${i}`);let n=!0;const a=()=>{const s=e(`.bpfwe-swiper-${i} .swiper-slide-active`).find(".post-image img");if(s.length&&o.length){const t=s.attr("data-bpfwe-src");if(t)return o.each((function(){const s=e(this);n?(s.css("--bg-image-after",`url(${t})`),s.addClass("after-active").removeClass("before-active")):(s.css("--bg-image-before",`url(${t})`),s.addClass("before-active").removeClass("after-active"))})),n=!n,!0}return!1};a(),s.on("slideChangeTransitionStart",a);e(`.bpfwe-swiper-${i} .swiper-slide`);const r=e("body").find(`[class*="${i}-slide-"]`)||[];if(r.length){r.each((function(){this.target_swiper=s})),r.on("click",(function(t){t.preventDefault();const i=e(this).attr("class");let o=i.match(/-slide-(\d+)/),n=i.includes("-slide-prev"),a=i.includes("-slide-next");if(o){let e=parseInt(o[1]);e>=0&&s.slideToLoop(e)}else n?s.slidePrev():a&&s.slideNext()})),s.on("slideChange",(function(){const t=s.realIndex;r.removeClass("active");const o=e(`.${i}-slide-${t}`);o.length&&o.addClass("active")}));const t=e(`.${i}-slide-0`);t.length&&t.addClass("active")}}});elementorFrontend.elementsHandler.attachHandler("post-widget",s)}))}(jQuery);